!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=89)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return Xi}));var r={},a={};function i(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function o(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function s(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function c(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),a=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+s(-e,6):e>9999?"+"+s(e,6):s(e,4))+"-"+s(t.getUTCMonth()+1,2)+"-"+s(t.getUTCDate(),2)+(i?"T"+s(n,2)+":"+s(r,2)+":"+s(a,2)+"."+s(i,3)+"Z":a?"T"+s(n,2)+":"+s(r,2)+":"+s(a,2)+"Z":r||n?"T"+s(n,2)+":"+s(r,2)+"Z":"")}var l=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function s(t,e){var i,o=[],s=t.length,c=0,l=0,u=s<=0,h=!1;function f(){if(u)return a;if(h)return h=!1,r;var e,i,o=c;if(34===t.charCodeAt(o)){for(;c++<s&&34!==t.charCodeAt(c)||34===t.charCodeAt(++c););return(e=c)>=s?u=!0:10===(i=t.charCodeAt(c++))?h=!0:13===i&&(h=!0,10===t.charCodeAt(c)&&++c),t.slice(o+1,e-1).replace(/""/g,'"')}for(;c<s;){if(10===(i=t.charCodeAt(e=c++)))h=!0;else if(13===i)h=!0,10===t.charCodeAt(c)&&++c;else if(i!==n)continue;return t.slice(o,e)}return u=!0,t.slice(o,s)}for(10===t.charCodeAt(s-1)&&--s,13===t.charCodeAt(s-1)&&--s;(i=f())!==a;){for(var d=[];i!==r&&i!==a;)d.push(i),i=f();e&&null==(d=e(d,l++))||o.push(d)}return o}function l(e,n){return e.map((function(e){return n.map((function(t){return h(e[t])})).join(t)}))}function u(e){return e.map(h).join(t)}function h(t){return null==t?"":t instanceof Date?c(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,a=s(t,(function(t,a){if(n)return n(t,a-1);r=t,n=e?function(t,e){var n=i(t);return function(r,a){return e(n(r),a,t)}}(t,e):i(t)}));return a.columns=r||[],a},parseRows:s,format:function(e,n){return null==n&&(n=o(e)),[n.map(h).join(t)].concat(l(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=o(t)),l(t,e).join("\n")},formatRows:function(t){return t.map(u).join("\n")},formatRow:u,formatValue:h}},u=l(","),h=u.parse,f=(u.parseRows,u.format,u.formatBody,u.formatRows,u.formatRow,u.formatValue,l("\t")),d=f.parse;f.parseRows,f.format,f.formatBody,f.formatRows,f.formatRow,f.formatValue;function p(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var v=function(t,e){return fetch(t,e).then(p)};function m(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),v(e,n).then((function(e){return t(e,r)}))}}m(h),m(d);function y(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function g(t){return function(e,n){return v(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}g("application/xml"),g("text/html"),g("image/svg+xml");function b(){}var w=function(t){return null==t?b:function(){return this.querySelector(t)}};function _(){return[]}var x=function(t){return null==t?_:function(){return this.querySelectorAll(t)}},k=function(t){return function(){return this.matches(t)}},S=function(t){return new Array(t.length)};function O(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}O.prototype={constructor:O,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function j(t,e,n,r,a,i){for(var o,s=0,c=e.length,l=i.length;s<l;++s)(o=e[s])?(o.__data__=i[s],r[s]=o):n[s]=new O(t,i[s]);for(;s<c;++s)(o=e[s])&&(a[s]=o)}function M(t,e,n,r,a,i,o){var s,c,l,u={},h=e.length,f=i.length,d=new Array(h);for(s=0;s<h;++s)(c=e[s])&&(d[s]=l="$"+o.call(c,c.__data__,s,e),l in u?a[s]=c:u[l]=c);for(s=0;s<f;++s)(c=u[l="$"+o.call(t,i[s],s,i)])?(r[s]=c,c.__data__=i[s],u[l]=null):n[s]=new O(t,i[s]);for(s=0;s<h;++s)(c=e[s])&&u[d[s]]===c&&(a[s]=c)}function E(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var A="http://www.w3.org/1999/xhtml",D={svg:"http://www.w3.org/2000/svg",xhtml:A,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},C=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),D.hasOwnProperty(e)?{space:D[e],local:t}:t};function T(t){return function(){this.removeAttribute(t)}}function P(t){return function(){this.removeAttributeNS(t.space,t.local)}}function R(t,e){return function(){this.setAttribute(t,e)}}function N(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function L(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function B(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var I=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function F(t){return function(){this.style.removeProperty(t)}}function V(t,e,n){return function(){this.style.setProperty(t,e,n)}}function H(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function U(t,e){return t.style.getPropertyValue(e)||I(t).getComputedStyle(t,null).getPropertyValue(e)}function G(t){return function(){delete this[t]}}function z(t,e){return function(){this[t]=e}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Y(t){return t.trim().split(/^|\s+/)}function q(t){return t.classList||new X(t)}function X(t){this._node=t,this._names=Y(t.getAttribute("class")||"")}function $(t,e){for(var n=q(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function J(t,e){for(var n=q(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function K(t){return function(){$(this,t)}}function Z(t){return function(){J(this,t)}}function Q(t,e){return function(){(e.apply(this,arguments)?$:J)(this,t)}}X.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function tt(){this.textContent=""}function et(t){return function(){this.textContent=t}}function nt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function rt(){this.innerHTML=""}function at(t){return function(){this.innerHTML=t}}function it(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ot(){this.nextSibling&&this.parentNode.appendChild(this)}function st(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ct(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===A&&e.documentElement.namespaceURI===A?e.createElement(t):e.createElementNS(n,t)}}function lt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var ut=function(t){var e=C(t);return(e.local?lt:ct)(e)};function ht(){return null}function ft(){var t=this.parentNode;t&&t.removeChild(this)}function dt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var vt={},mt=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(vt={mouseenter:"mouseover",mouseleave:"mouseout"}));function yt(t,e,n){return t=gt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function gt(t,e,n){return function(r){var a=mt;mt=r;try{t.call(this,this.__data__,e,n)}finally{mt=a}}}function bt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function wt(t){return function(){var e=this.__on;if(e){for(var n,r=0,a=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?e.length=a:delete this.__on}}}function _t(t,e,n){var r=vt.hasOwnProperty(t.type)?yt:gt;return function(a,i,o){var s,c=this.__on,l=r(e,i,o);if(c)for(var u=0,h=c.length;u<h;++u)if((s=c[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},c?c.push(s):this.__on=[s]}}function xt(t,e,n){var r=I(t),a=r.CustomEvent;"function"==typeof a?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function kt(t,e){return function(){return xt(this,t,e)}}function St(t,e){return function(){return xt(this,t,e.apply(this,arguments))}}var Ot=[null];function jt(t,e){this._groups=t,this._parents=e}function Mt(){return new jt([[document.documentElement]],Ot)}jt.prototype=Mt.prototype={constructor:jt,select:function(t){"function"!=typeof t&&(t=w(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=e[a],c=s.length,l=r[a]=new Array(c),u=0;u<c;++u)(i=s[u])&&(o=t.call(i,i.__data__,u,s))&&("__data__"in i&&(o.__data__=i.__data__),l[u]=o);return new jt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=[],a=[],i=0;i<n;++i)for(var o,s=e[i],c=s.length,l=0;l<c;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),a.push(o));return new jt(r,a)},filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o=e[a],s=o.length,c=r[a]=[],l=0;l<s;++l)(i=o[l])&&t.call(i,i.__data__,l,o)&&c.push(i);return new jt(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),u=-1,this.each((function(t){p[++u]=t})),p;var n,r=e?M:j,a=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=i.length,s=new Array(o),c=new Array(o),l=new Array(o),u=0;u<o;++u){var h=a[u],f=i[u],d=f.length,p=t.call(h,h&&h.__data__,u,a),v=p.length,m=c[u]=new Array(v),y=s[u]=new Array(v);r(h,f,m,y,l[u]=new Array(d),p,e);for(var g,b,w=0,_=0;w<v;++w)if(g=m[w]){for(w>=_&&(_=w+1);!(b=y[_])&&++_<v;);g._next=b||null}}return(s=new jt(s,a))._enter=c,s._exit=l,s},enter:function(){return new jt(this._enter||this._groups.map(S),this._parents)},exit:function(){return new jt(this._exit||this._groups.map(S),this._parents)},join:function(t,e,n){var r=this.enter(),a=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(a=e(a)),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var c,l=e[s],u=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(c=l[d]||u[d])&&(f[d]=c);for(;s<r;++s)o[s]=e[s];return new jt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,a=t[e],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=E);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,s=n[i],c=s.length,l=a[i]=new Array(c),u=0;u<c;++u)(o=s[u])&&(l[u]=o);l.sort(e)}return new jt(a,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a,i=e[n],o=0,s=i.length;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this},attr:function(t,e){var n=C(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?P:T:"function"==typeof e?n.local?B:L:n.local?N:R)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?F:"function"==typeof e?H:V)(t,e,null==n?"":n)):U(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?W:z)(t,e)):this.node()[t]},classed:function(t,e){var n=Y(t+"");if(arguments.length<2){for(var r=q(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?Q:e?K:Z)(n,e))},text:function(t){return arguments.length?this.each(null==t?tt:("function"==typeof t?nt:et)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?rt:("function"==typeof t?it:at)(t)):this.node().innerHTML},raise:function(){return this.each(ot)},lower:function(){return this.each(st)},append:function(t){var e="function"==typeof t?t:ut(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ut(t),r=null==e?ht:"function"==typeof e?e:w(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ft)},clone:function(t){return this.select(t?pt:dt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,a,i=bt(t+""),o=i.length;if(!(arguments.length<2)){for(s=e?_t:wt,null==n&&(n=!1),r=0;r<o;++r)this.each(s(i[r],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<o;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?St:kt)(t,e))}};var Et=Mt,At=(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158)),Dt=(function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),{value:function(){}});function Ct(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Tt(r)}function Tt(t){this._=t}function Pt(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Rt(t,e){for(var n,r=0,a=t.length;r<a;++r)if((n=t[r]).name===e)return n.value}function Nt(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=Dt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Tt.prototype=Ct.prototype={constructor:Tt,on:function(t,e){var n,r=this._,a=Pt(t+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<o;)if(n=(t=a[i]).type)r[n]=Nt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Nt(r[n],t.name,null);return this}for(;++i<o;)if((n=(t=a[i]).type)&&(n=Rt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Tt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,i=r.length;a<i;++a)r[a].value.apply(e,n)}};var Lt=Ct;function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var It,Ft,Vt=0,Ht=0,Ut=0,Gt=0,zt=0,Wt=0,Yt="object"===("undefined"==typeof performance?"undefined":Bt(performance))&&performance.now?performance:Date,qt="object"===("undefined"==typeof window?"undefined":Bt(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xt(){return zt||(qt($t),zt=Yt.now()+Wt)}function $t(){zt=0}function Jt(){this._call=this._time=this._next=null}function Kt(t,e,n){var r=new Jt;return r.restart(t,e,n),r}function Zt(){zt=(Gt=Yt.now())+Wt,Vt=Ht=0;try{!function(){Xt(),++Vt;for(var t,e=It;e;)(t=zt-e._time)>=0&&e._call.call(null,t),e=e._next;--Vt}()}finally{Vt=0,function(){var t,e,n=It,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:It=e);Ft=t,te(r)}(),zt=0}}function Qt(){var t=Yt.now(),e=t-Gt;e>1e3&&(Wt-=e,Gt=t)}function te(t){Vt||(Ht&&(Ht=clearTimeout(Ht)),t-zt>24?(t<1/0&&(Ht=setTimeout(Zt,t-Yt.now()-Wt)),Ut&&(Ut=clearInterval(Ut))):(Ut||(Gt=Yt.now(),Ut=setInterval(Qt,1e3)),Vt=1,qt(Zt)))}Jt.prototype=Kt.prototype={constructor:Jt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Xt():+n)+(null==e?0:+e),this._next||Ft===this||(Ft?Ft._next=this:It=this,Ft=this),this._call=t,this._time=n,te()},stop:function(){this._call&&(this._call=null,this._time=1/0,te())}};var ee=function(t,e,n){var r=new Jt;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},ne=Lt("start","end","cancel","interrupt"),re=[],ae=function(t,e,n,r,a,i){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,a=t.__transition;function i(c){var l,u,h,f;if(1!==n.state)return s();for(l in a)if((f=a[l]).name===n.name){if(3===f.state)return ee(i);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete a[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete a[l])}if(ee((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(c))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,u=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function o(e){for(var a=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(t,a);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete a[e],a)return;delete t.__transition}a[e]=n,n.timer=Kt((function(t){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:a,on:ne,tween:re,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})};function ie(t,e){var n=se(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function oe(t,e){var n=se(t,e);if(n.state>3)throw new Error("too late; already running");return n}function se(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var ce,le,ue,he,fe=n(4),de=180/Math.PI,pe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ve=function(t,e,n,r,a,i){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*de,skewX:Math.atan(c)*de,scaleX:o,scaleY:s}};function me(t,e,n,r){function a(t){return t.length?t.pop()+" ":""}return function(i,o){var s=[],c=[];return i=t(i),o=t(o),function(t,r,a,i,o,s){if(t!==a||r!==i){var c=o.push("translate(",null,e,null,n);s.push({i:c-4,x:Object(fe.a)(t,a)},{i:c-2,x:Object(fe.a)(r,i)})}else(a||i)&&o.push("translate("+a+e+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,s,c),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:Object(fe.a)(t,e)})):e&&n.push(a(n)+"rotate("+e+r)}(i.rotate,o.rotate,s,c),function(t,e,n,i){t!==e?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:Object(fe.a)(t,e)}):e&&n.push(a(n)+"skewX("+e+r)}(i.skewX,o.skewX,s,c),function(t,e,n,r,i,o){if(t!==n||e!==r){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:Object(fe.a)(t,n)},{i:s-2,x:Object(fe.a)(e,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,s,c),i=o=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var ye=me((function(t){return"none"===t?pe:(ce||(ce=document.createElement("DIV"),le=document.documentElement,ue=document.defaultView),ce.style.transform=t,t=ue.getComputedStyle(le.appendChild(ce),null).getPropertyValue("transform"),le.removeChild(ce),t=t.slice(7,-1).split(","),ve(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),ge=me((function(t){return null==t?pe:(he||(he=document.createElementNS("http://www.w3.org/2000/svg","g")),he.setAttribute("transform",t),(t=he.transform.baseVal.consolidate())?(t=t.matrix,ve(t.a,t.b,t.c,t.d,t.e,t.f)):pe)}),", ",")",")");function be(t,e){var n,r;return function(){var a=oe(this,t),i=a.tween;if(i!==n)for(var o=0,s=(r=n=i).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}a.tween=r}}function we(t,e,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var i=oe(this,t),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:e,value:n},c=0,l=a.length;c<l;++c)if(a[c].name===e){a[c]=s;break}c===l&&a.push(s)}i.tween=a}}function _e(t,e,n){var r=t._id;return t.each((function(){var t=oe(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return se(t,r).value[e]}}var xe=n(10),ke=n(38),Se=n(45),Oe=function(t,e){var n;return("number"==typeof e?fe.a:e instanceof xe.e?ke.a:(n=Object(xe.e)(e))?(e=n,ke.a):Se.a)(t,e)};function je(t){return function(){this.removeAttribute(t)}}function Me(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ee(t,e,n){var r,a,i=n+"";return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ae(t,e,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function De(t,e,n){var r,a,i;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(s=c+"")?null:o===r&&s===a?i:(a=s,i=e(r=o,c));this.removeAttribute(t)}}function Ce(t,e,n){var r,a,i;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:o===r&&s===a?i:(a=s,i=e(r=o,c));this.removeAttributeNS(t.space,t.local)}}function Te(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Pe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Re(t,e){var n,r;function a(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Pe(t,a)),n}return a._value=e,a}function Ne(t,e){var n,r;function a(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Te(t,a)),n}return a._value=e,a}function Le(t,e){return function(){ie(this,t).delay=+e.apply(this,arguments)}}function Be(t,e){return e=+e,function(){ie(this,t).delay=e}}function Ie(t,e){return function(){oe(this,t).duration=+e.apply(this,arguments)}}function Fe(t,e){return e=+e,function(){oe(this,t).duration=e}}function Ve(t,e){if("function"!=typeof e)throw new Error;return function(){oe(this,t).ease=e}}function He(t,e,n){var r,a,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?ie:oe;return function(){var o=i(this,t),s=o.on;s!==r&&(a=(r=s).copy()).on(e,n),o.on=a}}var Ue=Et.prototype.constructor;function Ge(t){return function(){this.style.removeProperty(t)}}function ze(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function We(t,e,n){var r,a;function i(){var i=e.apply(this,arguments);return i!==a&&(r=(a=i)&&ze(t,i,n)),r}return i._value=e,i}function Ye(t){return function(e){this.textContent=t.call(this,e)}}function qe(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Ye(r)),e}return r._value=t,r}var Xe=0;function $e(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Je(t){return Et().transition(t)}function Ke(){return++Xe}var Ze=Et.prototype;$e.prototype=Je.prototype={constructor:$e,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=w(t));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s,c,l=r[o],u=l.length,h=i[o]=new Array(u),f=0;f<u;++f)(s=l[f])&&(c=t.call(s,s.__data__,f,l))&&("__data__"in s&&(c.__data__=s.__data__),h[f]=c,ae(h[f],e,n,f,h,se(s,n)));return new $e(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=x(t));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var c,l=r[s],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var f,d=t.call(c,c.__data__,h,l),p=se(c,n),v=0,m=d.length;v<m;++v)(f=d[v])&&ae(f,e,n,v,d,p);i.push(d),o.push(c)}return new $e(i,o,e,n)},filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o=e[a],s=o.length,c=r[a]=[],l=0;l<s;++l)(i=o[l])&&t.call(i,i.__data__,l,o)&&c.push(i);return new $e(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var c,l=e[s],u=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(c=l[d]||u[d])&&(f[d]=c);for(;s<r;++s)o[s]=e[s];return new $e(o,this._parents,this._name,this._id)},selection:function(){return new Ue(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ke(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],c=s.length,l=0;l<c;++l)if(o=s[l]){var u=se(o,e);ae(o,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new $e(r,this._parents,t,n)},call:Ze.call,nodes:Ze.nodes,node:Ze.node,size:Ze.size,empty:Ze.empty,each:Ze.each,on:function(t,e){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(t):this.each(He(n,t,e))},attr:function(t,e){var n=C(t),r="transform"===n?ge:Oe;return this.attrTween(t,"function"==typeof e?(n.local?Ce:De)(n,r,_e(this,"attr."+t,e)):null==e?(n.local?Me:je)(n):(n.local?Ae:Ee)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=C(t);return this.tween(n,(r.local?Re:Ne)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ye:Oe;return null==e?this.styleTween(t,function(t,e){var n,r,a;return function(){var i=U(this,t),o=(this.style.removeProperty(t),U(this,t));return i===o?null:i===n&&o===r?a:a=e(n=i,r=o)}}(t,r)).on("end.style."+t,Ge(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,a,i;return function(){var o=U(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=U(this,t)),o===c?null:o===r&&c===a?i:(a=c,i=e(r=o,s))}}(t,r,_e(this,"style."+t,e))).each(function(t,e){var n,r,a,i,o="style."+e,s="end."+o;return function(){var c=oe(this,t),l=c.on,u=null==c.value[o]?i||(i=Ge(e)):void 0;l===n&&a===u||(r=(n=l).copy()).on(s,a=u),c.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,a,i=n+"";return function(){var o=U(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,We(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(_e(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,qe(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,a=se(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===t)return r.value;return null}return this.each((null==e?be:we)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Le:Be)(e,t)):se(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ie:Fe)(e,t)):se(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Ve(e,t)):se(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var s={value:o},c={value:function(){0==--a&&i()}};n.each((function(){var n=oe(this,r),a=n.on;a!==t&&((e=(t=a).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e}))}))}};var Qe={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function tn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Qe.time=Xt(),Qe;return n}Et.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,a,i=t.__transition,o=!0;if(i){for(a in e=null==e?null:e+"",i)(n=i[a]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete t.__transition}}(this,t)}))},Et.prototype.transition=function(t){var e,n;t instanceof $e?(e=t._id,t=t._name):(e=Ke(),(n=Qe).time=Xt(),t=null==t?null:t+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],c=s.length,l=0;l<c;++l)(o=s[l])&&ae(o,t,e,l,s,n||tn(o,e));return new $e(r,this._parents,t,e)};var en=n(29);function nn(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var a,i,o,s,c,l,u,h,f,d=t._root,p={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(i=(v+y)/2))?v=i:y=i,(u=n>=(o=(m+g)/2))?m=o:g=o,a=d,!(d=d[h=u<<1|l]))return a[h]=p,t;if(s=+t._x.call(null,d.data),c=+t._y.call(null,d.data),e===s&&n===c)return p.next=d,a?a[h]=p:t._root=p,t;do{a=a?a[h]=new Array(4):t._root=new Array(4),(l=e>=(i=(v+y)/2))?v=i:y=i,(u=n>=(o=(m+g)/2))?m=o:g=o}while((h=u<<1|l)==(f=(c>=o)<<1|s>=i));return a[f]=d,a[h]=p,t}var rn=function(t,e,n,r,a){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=a};function an(t){return t[0]}function on(t){return t[1]}function sn(t,e,n){var r=new cn(null==e?an:e,null==n?on:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function cn(t,e,n,r,a,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function ln(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var un=sn.prototype=cn.prototype;un.copy=function(){var t,e,n=new cn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=ln(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var a=0;a<4;++a)(e=r.source[a])&&(e.length?t.push({source:e,target:r.target[a]=new Array(4)}):r.target[a]=ln(e));return n},un.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return nn(this.cover(e,n),e,n,t)},un.addAll=function(t){var e,n,r,a,i=t.length,o=new Array(i),s=new Array(i),c=1/0,l=1/0,u=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=r,s[n]=a,r<c&&(c=r),r>u&&(u=r),a<l&&(l=a),a>h&&(h=a));if(c>u||l>h)return this;for(this.cover(c,l).cover(u,h),n=0;n<i;++n)nn(this,o[n],s[n],t[n]);return this},un.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var o,s,c=a-n,l=this._root;n>t||t>=a||r>e||e>=i;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=l,l=o,c*=2,s){case 0:a=n+c,i=r+c;break;case 1:n=a-c,i=r+c;break;case 2:a=n+c,r=i-c;break;case 3:n=a-c,r=i-c}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},un.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},un.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},un.find=function(t,e,n){var r,a,i,o,s,c,l,u=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new rn(v,u,h,f,d)),null==n?n=1/0:(u=t-n,h=e-n,f=t+n,d=e+n,n*=n);c=p.pop();)if(!(!(v=c.node)||(a=c.x0)>f||(i=c.y0)>d||(o=c.x1)<u||(s=c.y1)<h))if(v.length){var m=(a+o)/2,y=(i+s)/2;p.push(new rn(v[3],m,y,o,s),new rn(v[2],a,y,m,s),new rn(v[1],m,i,o,y),new rn(v[0],a,i,m,y)),(l=(e>=y)<<1|t>=m)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=c)}else{var g=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),w=g*g+b*b;if(w<n){var _=Math.sqrt(n=w);u=t-_,h=e-_,f=t+_,d=e+_,r=v.data}}return r},un.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,a,i,o,s,c,l,u,h,f,d=this._root,p=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((l=i>=(s=(p+m)/2))?p=s:m=s,(u=o>=(c=(v+y)/2))?v=c:y=c,e=d,!(d=d[h=u<<1|l]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(a=d.next)&&delete d.next,r?(a?r.next=a:delete r.next,this):e?(a?e[h]=a:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=a,this)},un.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},un.root=function(){return this._root},un.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},un.visit=function(t){var e,n,r,a,i,o,s=[],c=this._root;for(c&&s.push(new rn(c,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(c=e.node,r=e.x0,a=e.y0,i=e.x1,o=e.y1)&&c.length){var l=(r+i)/2,u=(a+o)/2;(n=c[3])&&s.push(new rn(n,l,u,i,o)),(n=c[2])&&s.push(new rn(n,r,u,l,o)),(n=c[1])&&s.push(new rn(n,l,a,i,u)),(n=c[0])&&s.push(new rn(n,r,a,l,u))}return this},un.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new rn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var a=e.node;if(a.length){var i,o=e.x0,s=e.y0,c=e.x1,l=e.y1,u=(o+c)/2,h=(s+l)/2;(i=a[0])&&n.push(new rn(i,o,s,u,h)),(i=a[1])&&n.push(new rn(i,u,s,c,h)),(i=a[2])&&n.push(new rn(i,o,h,u,l)),(i=a[3])&&n.push(new rn(i,u,h,c,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},un.x=function(t){return arguments.length?(this._x=t,this):this._x},un.y=function(t){return arguments.length?(this._y=t,this):this._y};var hn=function(t){return function(){return t}},fn=function(){return 1e-6*(Math.random()-.5)};function dn(t){return t.x+t.vx}function pn(t){return t.y+t.vy}var vn=Math.PI*(3-Math.sqrt(5)),mn=n(1),yn=n(20),gn=Math.PI,bn=2*gn,wn=bn-1e-6;function _n(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function xn(){return new _n}_n.prototype=xn.prototype={constructor:_n,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,a,i){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(t,e,n,r,a){t=+t,e=+e,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,s=n-t,c=r-e,l=i-t,u=o-e,h=l*l+u*u;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(u*s-c*l)>1e-6&&a){var f=n-i,d=r-o,p=s*s+c*c,v=f*f+d*d,m=Math.sqrt(p),y=Math.sqrt(h),g=a*Math.tan((gn-Math.acos((p+h-v)/(2*m*y)))/2),b=g/y,w=g/m;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*l)+","+(e+b*u)),this._+="A"+a+","+a+",0,0,"+ +(u*f>l*d)+","+(this._x1=t+w*s)+","+(this._y1=e+w*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,a,i){t=+t,e=+e,i=!!i;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=t+o,l=e+s,u=1^i,h=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+c+","+l),n&&(h<0&&(h=h%bn+bn),h>wn?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=gn)+","+u+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=e+n*Math.sin(a))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var kn=xn,Sn=function(t){return function(){return t}};function On(t){this._context=t}On.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var jn=function(t){return new On(t)};function Mn(t){return t[0]}function En(t){return t[1]}var An=function(){var t=Mn,e=En,n=Sn(!0),r=null,a=jn,i=null;function o(o){var s,c,l,u=o.length,h=!1;for(null==r&&(i=a(l=kn())),s=0;s<=u;++s)!(s<u&&n(c=o[s],s,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(c,s,o),+e(c,s,o));if(l)return i=null,l+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:Sn(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Sn(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:Sn(!!t),o):n},o.curve=function(t){return arguments.length?(a=t,null!=r&&(i=a(r)),o):a},o.context=function(t){return arguments.length?(null==t?r=i=null:i=a(r=t),o):r},o};function Dn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Cn(t){this._context=t}Cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Tn(t,e){this._basis=new Cn(t),this._beta=e}Tn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,a=t[0],i=e[0],o=t[n]-a,s=e[n]-i,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(a+r*o),this._beta*e[c]+(1-this._beta)*(i+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Pn=function t(e){function n(t){return 1===e?new Cn(t):new Tn(t,e)}return n.beta=function(e){return t(+e)},n}(.85),Rn=(Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI),Nn=2*Rn;var Ln={draw:function(t,e){var n=Math.sqrt(e/Rn);t.moveTo(n,0),t.arc(0,0,n,0,Nn)}},Bn=(Math.sqrt(1/3),Math.sin(Rn/10)/Math.sin(7*Rn/10)),In=(Math.sin(Nn/10),Math.cos(Nn/10),Math.sqrt(3)),Fn={draw:function(t,e){var n=-Math.sqrt(e/(3*In));t.moveTo(0,2*n),t.lineTo(-In*n,-n),t.lineTo(In*n,-n),t.closePath()}},Vn=(Math.sqrt(3),Math.sqrt(12),Array.prototype.slice),Hn=function(t){return t};function Un(t){return"translate("+(t+.5)+",0)"}function Gn(t){return"translate(0,"+(t+.5)+")"}function zn(t){return function(e){return+t(e)}}function Wn(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Yn(){return!this.__axis}function qn(t,e){var n=[],r=null,a=null,i=6,o=6,s=3,c=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",u=1===t||3===t?Un:Gn;function h(h){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==a?e.tickFormat?e.tickFormat.apply(e,n):Hn:a,p=Math.max(i,0)+s,v=e.range(),m=+v[0]+.5,y=+v[v.length-1]+.5,g=(e.bandwidth?Wn:zn)(e.copy()),b=h.selection?h.selection():h,w=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(f,e).order(),x=_.exit(),k=_.enter().append("g").attr("class","tick"),S=_.select("line"),O=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(k),S=S.merge(k.append("line").attr("stroke","currentColor").attr(l+"2",c*i)),O=O.merge(k.append("text").attr("fill","currentColor").attr(l,c*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==b&&(w=w.transition(h),_=_.transition(h),S=S.transition(h),O=O.transition(h),x=x.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=g(t))?u(t):this.getAttribute("transform")})),k.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return u(e&&isFinite(e=e(t))?e:g(t))}))),x.remove(),w.attr("d",4===t||2==t?o?"M"+c*o+","+m+"H0.5V"+y+"H"+c*o:"M0.5,"+m+"V"+y:o?"M"+m+","+c*o+"V0.5H"+y+"V"+c*o:"M"+m+",0.5H"+y),_.attr("opacity",1).attr("transform",(function(t){return u(g(t))})),S.attr(l+"2",c*i),O.attr(l,c*p).text(d),b.filter(Yn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=g}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Vn.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Vn.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Vn.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(a=t,h):a},h.tickSize=function(t){return arguments.length?(i=o=+t,h):i},h.tickSizeInner=function(t){return arguments.length?(i=+t,h):i},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}var Xn=n(5),$n=function(t){return t};function Jn(t,e){t&&Zn.hasOwnProperty(t.type)&&Zn[t.type](t,e)}var Kn={Feature:function(t,e){Jn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)Jn(n[r].geometry,e)}},Zn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Qn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)Qn(n[r],e,0)},Polygon:function(t,e){tr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)tr(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)Jn(n[r],e)}};function Qn(t,e,n){var r,a=-1,i=t.length-n;for(e.lineStart();++a<i;)r=t[a],e.point(r[0],r[1],r[2]);e.lineEnd()}function tr(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Qn(t[n],e,1);e.polygonEnd()}var er=function(t,e){t&&Kn.hasOwnProperty(t.type)?Kn[t.type](t,e):Jn(t,e)},nr=function(){return new rr};function rr(){this.reset()}rr.prototype={constructor:rr,reset:function(){this.s=this.t=0},add:function(t){ir(ar,t,this.t),ir(this,ar.s,this.s),this.s?this.t+=ar.t:this.s=ar.t},valueOf:function(){return this.s}};var ar=new rr;function ir(t,e,n){var r=t.s=e+n,a=r-e,i=r-a;t.t=e-i+(n-a)}var or=Math.PI,sr=or/2,cr=or/4,lr=2*or,ur=180/or,hr=or/180,fr=Math.abs,dr=Math.atan,pr=Math.atan2,vr=Math.cos,mr=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),yr=Math.sign||function(t){return t>0?1:t<0?-1:0},gr=Math.sqrt;Math.tan;function br(t){return t>1?sr:t<-1?-sr:Math.asin(t)}function wr(){}var _r,xr,kr,Sr,Or=nr(),jr=nr(),Mr={point:wr,lineStart:wr,lineEnd:wr,polygonStart:function(){Mr.lineStart=Er,Mr.lineEnd=Cr},polygonEnd:function(){Mr.lineStart=Mr.lineEnd=Mr.point=wr,Or.add(fr(jr)),jr.reset()},result:function(){var t=Or/2;return Or.reset(),t}};function Er(){Mr.point=Ar}function Ar(t,e){Mr.point=Dr,_r=kr=t,xr=Sr=e}function Dr(t,e){jr.add(Sr*t-kr*e),kr=t,Sr=e}function Cr(){Dr(_r,xr)}var Tr=Mr,Pr=1/0,Rr=Pr,Nr=-Pr,Lr=Nr;var Br,Ir,Fr,Vr,Hr={point:function(t,e){t<Pr&&(Pr=t);t>Nr&&(Nr=t);e<Rr&&(Rr=e);e>Lr&&(Lr=e)},lineStart:wr,lineEnd:wr,polygonStart:wr,polygonEnd:wr,result:function(){var t=[[Pr,Rr],[Nr,Lr]];return Nr=Lr=-(Rr=Pr=1/0),t}},Ur=0,Gr=0,zr=0,Wr=0,Yr=0,qr=0,Xr=0,$r=0,Jr=0,Kr={point:Zr,lineStart:Qr,lineEnd:na,polygonStart:function(){Kr.lineStart=ra,Kr.lineEnd=aa},polygonEnd:function(){Kr.point=Zr,Kr.lineStart=Qr,Kr.lineEnd=na},result:function(){var t=Jr?[Xr/Jr,$r/Jr]:qr?[Wr/qr,Yr/qr]:zr?[Ur/zr,Gr/zr]:[NaN,NaN];return Ur=Gr=zr=Wr=Yr=qr=Xr=$r=Jr=0,t}};function Zr(t,e){Ur+=t,Gr+=e,++zr}function Qr(){Kr.point=ta}function ta(t,e){Kr.point=ea,Zr(Fr=t,Vr=e)}function ea(t,e){var n=t-Fr,r=e-Vr,a=gr(n*n+r*r);Wr+=a*(Fr+t)/2,Yr+=a*(Vr+e)/2,qr+=a,Zr(Fr=t,Vr=e)}function na(){Kr.point=Zr}function ra(){Kr.point=ia}function aa(){oa(Br,Ir)}function ia(t,e){Kr.point=oa,Zr(Br=Fr=t,Ir=Vr=e)}function oa(t,e){var n=t-Fr,r=e-Vr,a=gr(n*n+r*r);Wr+=a*(Fr+t)/2,Yr+=a*(Vr+e)/2,qr+=a,Xr+=(a=Vr*t-Fr*e)*(Fr+t),$r+=a*(Vr+e),Jr+=3*a,Zr(Fr=t,Vr=e)}var sa=Kr;function ca(t){this._context=t}ca.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,lr)}},result:wr};var la,ua,ha,fa,da,pa=nr(),va={point:wr,lineStart:function(){va.point=ma},lineEnd:function(){la&&ya(ua,ha),va.point=wr},polygonStart:function(){la=!0},polygonEnd:function(){la=null},result:function(){var t=+pa;return pa.reset(),t}};function ma(t,e){va.point=ya,ua=fa=t,ha=da=e}function ya(t,e){fa-=t,da-=e,pa.add(gr(fa*fa+da*da)),fa=t,da=e}var ga=va;function ba(){this._string=[]}function wa(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}ba.prototype={_radius:4.5,_circle:wa(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=wa(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var _a=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:wr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},xa=function(t,e){return fr(t[0]-e[0])<1e-6&&fr(t[1]-e[1])<1e-6};function ka(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Sa=function(t,e,n,r,a){var i,o,s=[],c=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(xa(r,o)){for(a.lineStart(),i=0;i<e;++i)a.point((r=t[i])[0],r[1]);a.lineEnd()}else s.push(n=new ka(r,t,null,!0)),c.push(n.o=new ka(r,null,n,!1)),s.push(n=new ka(o,t,null,!1)),c.push(n.o=new ka(o,null,n,!0))}})),s.length){for(c.sort(e),Oa(s),Oa(c),i=0,o=c.length;i<o;++i)c[i].e=n=!n;for(var l,u,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;l=f.z,a.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(i=0,o=l.length;i<o;++i)a.point((u=l[i])[0],u[1]);else r(f.x,f.n.x,1,a);f=f.n}else{if(d)for(l=f.p.z,i=l.length-1;i>=0;--i)a.point((u=l[i])[0],u[1]);else r(f.x,f.p.x,-1,a);f=f.p}l=(f=f.o).z,d=!d}while(!f.v);a.lineEnd()}}};function Oa(t){if(e=t.length){for(var e,n,r=0,a=t[0];++r<e;)a.n=n=t[r],n.p=a,a=n;a.n=n=t[0],n.p=a}}function ja(t){return[pr(t[1],t[0]),br(t[2])]}function Ma(t){var e=t[0],n=t[1],r=vr(n);return[r*vr(e),r*mr(e),mr(n)]}function Ea(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Aa(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Da(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ca(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ta(t){var e=gr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Pa=nr();function Ra(t){return fr(t[0])<=or?t[0]:yr(t[0])*((fr(t[0])+or)%lr-or)}var Na=function(t,e,n,r){return function(a){var i,o,s,c=e(a),l=_a(),u=e(l),h=!1,f={point:d,lineStart:v,lineEnd:m,polygonStart:function(){f.point=y,f.lineStart=g,f.lineEnd=b,o=[],i=[]},polygonEnd:function(){f.point=d,f.lineStart=v,f.lineEnd=m,o=Object(mn.merge)(o);var t=function(t,e){var n=Ra(e),r=e[1],a=mr(r),i=[mr(n),-vr(n),0],o=0,s=0;Pa.reset(),1===a?r=sr+1e-6:-1===a&&(r=-sr-1e-6);for(var c=0,l=t.length;c<l;++c)if(h=(u=t[c]).length)for(var u,h,f=u[h-1],d=Ra(f),p=f[1]/2+cr,v=mr(p),m=vr(p),y=0;y<h;++y,d=b,v=_,m=x,f=g){var g=u[y],b=Ra(g),w=g[1]/2+cr,_=mr(w),x=vr(w),k=b-d,S=k>=0?1:-1,O=S*k,j=O>or,M=v*_;if(Pa.add(pr(M*S*mr(O),m*x+M*vr(O))),o+=j?k+S*lr:k,j^d>=n^b>=n){var E=Aa(Ma(f),Ma(g));Ta(E);var A=Aa(i,E);Ta(A);var D=(j^k>=0?-1:1)*br(A[2]);(r>D||r===D&&(E[0]||E[1]))&&(s+=j^k>=0?1:-1)}}return(o<-1e-6||o<1e-6&&Pa<-1e-6)^1&s}(i,r);o.length?(h||(a.polygonStart(),h=!0),Sa(o,Ba,t,n,a)):t&&(h||(a.polygonStart(),h=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),h&&(a.polygonEnd(),h=!1),o=i=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(e,n){t(e,n)&&a.point(e,n)}function p(t,e){c.point(t,e)}function v(){f.point=p,c.lineStart()}function m(){f.point=d,c.lineEnd()}function y(t,e){s.push([t,e]),u.point(t,e)}function g(){u.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,c=u.clean(),f=l.result(),d=f.length;if(s.pop(),i.push(s),s=null,d)if(1&c){if((e=(n=f[0]).length-1)>0){for(h||(a.polygonStart(),h=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else d>1&&2&c&&f.push(f.pop().concat(f.shift())),o.push(f.filter(La))}return f}};function La(t){return t.length>1}function Ba(t,e){return((t=t.x)[0]<0?t[1]-sr-1e-6:sr-t[1])-((e=e.x)[0]<0?e[1]-sr-1e-6:sr-e[1])}var Ia=Na((function(){return!0}),(function(t){var e,n=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,o){var s=i>0?or:-or,c=fr(i-n);fr(c-or)<1e-6?(t.point(n,r=(r+o)/2>0?sr:-sr),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(i,r),e=0):a!==s&&c>=or&&(fr(n-a)<1e-6&&(n-=1e-6*a),fr(i-s)<1e-6&&(i-=1e-6*s),r=function(t,e,n,r){var a,i,o=mr(t-n);return fr(o)>1e-6?dr((mr(e)*(i=vr(r))*mr(n)-mr(r)*(a=vr(e))*mr(t))/(a*i*o)):(e+r)/2}(n,r,i,o),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=i,r=o),a=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var a;if(null==t)a=n*sr,r.point(-or,a),r.point(0,a),r.point(or,a),r.point(or,0),r.point(or,-a),r.point(0,-a),r.point(-or,-a),r.point(-or,0),r.point(-or,a);else if(fr(t[0]-e[0])>1e-6){var i=t[0]<e[0]?or:-or;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(e[0],e[1])}),[-or,-sr]);var Fa=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function Va(t,e){return[fr(t)>or?t+Math.round(-t/lr)*lr:t,e]}function Ha(t,e,n){return(t%=lr)?e||n?Fa(Ga(t),za(e,n)):Ga(t):e||n?za(e,n):Va}function Ua(t){return function(e,n){return[(e+=t)>or?e-lr:e<-or?e+lr:e,n]}}function Ga(t){var e=Ua(t);return e.invert=Ua(-t),e}function za(t,e){var n=vr(t),r=mr(t),a=vr(e),i=mr(e);function o(t,e){var o=vr(e),s=vr(t)*o,c=mr(t)*o,l=mr(e),u=l*n+s*r;return[pr(c*a-u*i,s*n-l*r),br(u*a+c*i)]}return o.invert=function(t,e){var o=vr(e),s=vr(t)*o,c=mr(t)*o,l=mr(e),u=l*a-c*i;return[pr(c*a+l*i,s*n+u*r),br(u*n-s*r)]},o}Va.invert=Va;function Wa(t,e,n,r,a,i){if(n){var o=vr(e),s=mr(e),c=r*n;null==a?(a=e+r*lr,i=e-c/2):(a=Ya(o,a),i=Ya(o,i),(r>0?a<i:a>i)&&(a+=r*lr));for(var l,u=a;r>0?u>i:u<i;u-=c)l=ja([o,-s*vr(u),-s*mr(u)]),t.point(l[0],l[1])}}function Ya(t,e){(e=Ma(e))[0]-=t,Ta(e);var n,r=(n=-e[1])>1?0:n<-1?or:Math.acos(n);return((-e[2]<0?-r:r)+lr-1e-6)%lr}var qa=function(t){var e=vr(t),n=6*hr,r=e>0,a=fr(e)>1e-6;function i(t,n){return vr(t)*vr(n)>e}function o(t,n,r){var a=[1,0,0],i=Aa(Ma(t),Ma(n)),o=Ea(i,i),s=i[0],c=o-s*s;if(!c)return!r&&t;var l=e*o/c,u=-e*s/c,h=Aa(a,i),f=Ca(a,l);Da(f,Ca(i,u));var d=h,p=Ea(f,d),v=Ea(d,d),m=p*p-v*(Ea(f,f)-1);if(!(m<0)){var y=gr(m),g=Ca(d,(-p-y)/v);if(Da(g,f),g=ja(g),!r)return g;var b,w=t[0],_=n[0],x=t[1],k=n[1];_<w&&(b=w,w=_,_=b);var S=_-w,O=fr(S-or)<1e-6;if(!O&&k<x&&(b=x,x=k,k=b),O||S<1e-6?O?x+k>0^g[1]<(fr(g[0]-w)<1e-6?x:k):x<=g[1]&&g[1]<=k:S>or^(w<=g[0]&&g[0]<=_)){var j=Ca(d,(-p+y)/v);return Da(j,f),[g,ja(j)]}}}function s(e,n){var a=r?t:or-t,i=0;return e<-a?i|=1:e>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}return Na(i,(function(t){var e,n,c,l,u;return{lineStart:function(){l=c=!1,u=1},point:function(h,f){var d,p=[h,f],v=i(h,f),m=r?v?0:s(h,f):v?s(h+(h<0?or:-or),f):0;if(!e&&(l=c=v)&&t.lineStart(),v!==c&&(!(d=o(e,p))||xa(e,d)||xa(p,d))&&(p[0]+=1e-6,p[1]+=1e-6,v=i(p[0],p[1])),v!==c)u=0,v?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(a&&e&&r^v){var y;m&n||!(y=o(p,e,!0))||(u=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||e&&xa(e,p)||t.point(p[0],p[1]),e=p,c=v,n=m},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return u|(l&&c)<<1}}}),(function(e,r,a,i){Wa(i,t,n,a,e,r)}),r?[0,-t]:[-or,t-or])};function Xa(t,e,n,r){function a(a,i){return t<=a&&a<=n&&e<=i&&i<=r}function i(a,i,s,l){var u=0,h=0;if(null==a||(u=o(a,s))!==(h=o(i,s))||c(a,i)<0^s>0)do{l.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==h);else l.point(i[0],i[1])}function o(r,a){return fr(r[0]-t)<1e-6?a>0?0:3:fr(r[0]-n)<1e-6?a>0?2:1:fr(r[1]-e)<1e-6?a>0?1:0:a>0?3:2}function s(t,e){return c(t.x,e.x)}function c(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var c,l,u,h,f,d,p,v,m,y,g,b=o,w=_a(),_={point:x,lineStart:function(){_.point=k,l&&l.push(u=[]);y=!0,m=!1,p=v=NaN},lineEnd:function(){c&&(k(h,f),d&&m&&w.rejoin(),c.push(w.result()));_.point=x,m&&b.lineEnd()},polygonStart:function(){b=w,c=[],l=[],g=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,a=l.length;n<a;++n)for(var i,o,s=l[n],c=1,u=s.length,h=s[0],f=h[0],d=h[1];c<u;++c)i=f,o=d,h=s[c],f=h[0],d=h[1],o<=r?d>r&&(f-i)*(r-o)>(d-o)*(t-i)&&++e:d<=r&&(f-i)*(r-o)<(d-o)*(t-i)&&--e;return e}(),n=g&&e,a=(c=Object(mn.merge)(c)).length;(n||a)&&(o.polygonStart(),n&&(o.lineStart(),i(null,null,1,o),o.lineEnd()),a&&Sa(c,s,e,i,o),o.polygonEnd());b=o,c=l=u=null}};function x(t,e){a(t,e)&&b.point(t,e)}function k(i,o){var s=a(i,o);if(l&&u.push([i,o]),y)h=i,f=o,d=s,y=!1,s&&(b.lineStart(),b.point(i,o));else if(s&&m)b.point(i,o);else{var c=[p=Math.max(-1e9,Math.min(1e9,p)),v=Math.max(-1e9,Math.min(1e9,v))],w=[i=Math.max(-1e9,Math.min(1e9,i)),o=Math.max(-1e9,Math.min(1e9,o))];!function(t,e,n,r,a,i){var o,s=t[0],c=t[1],l=0,u=1,h=e[0]-s,f=e[1]-c;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>l&&(l=o)}if(o=a-s,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<u&&(u=o)}if(o=r-c,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<u&&(u=o)}else if(f>0){if(o>u)return;o>l&&(l=o)}if(o=i-c,f||!(o<0)){if(o/=f,f<0){if(o>u)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<u&&(u=o)}return l>0&&(t[0]=s+l*h,t[1]=c+l*f),u<1&&(e[0]=s+u*h,e[1]=c+u*f),!0}}}}}(c,w,t,e,n,r)?s&&(b.lineStart(),b.point(i,o),g=!1):(m||(b.lineStart(),b.point(c[0],c[1])),b.point(w[0],w[1]),s||b.lineEnd(),g=!1)}p=i,v=o,m=s}return _}}function $a(t){return function(e){var n=new Ja;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Ja(){}function Ka(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),er(n,t.stream(Hr)),e(Hr.result()),null!=r&&t.clipExtent(r),t}function Za(t,e,n){return Ka(t,(function(n){var r=e[1][0]-e[0][0],a=e[1][1]-e[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+e[0][0]+(r-i*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(a-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,s])}),n)}function Qa(t,e,n){return Za(t,[[0,0],e],n)}function ti(t,e,n){return Ka(t,(function(n){var r=+e,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];t.scale(150*a).translate([i,o])}),n)}function ei(t,e,n){return Ka(t,(function(n){var r=+e,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([i,o])}),n)}Ja.prototype={constructor:Ja,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ni=vr(30*hr),ri=function(t,e){return+e?function(t,e){function n(r,a,i,o,s,c,l,u,h,f,d,p,v,m){var y=l-r,g=u-a,b=y*y+g*g;if(b>4*e&&v--){var w=o+f,_=s+d,x=c+p,k=gr(w*w+_*_+x*x),S=br(x/=k),O=fr(fr(x)-1)<1e-6||fr(i-h)<1e-6?(i+h)/2:pr(_,w),j=t(O,S),M=j[0],E=j[1],A=M-r,D=E-a,C=g*A-y*D;(C*C/b>e||fr((y*A+g*D)/b-.5)>.3||o*f+s*d+c*p<ni)&&(n(r,a,i,o,s,c,M,E,O,w/=k,_/=k,x,v,m),m.point(M,E),n(M,E,O,w,_,x,l,u,h,f,d,p,v,m))}}return function(e){var r,a,i,o,s,c,l,u,h,f,d,p,v={point:m,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=w},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){u=NaN,v.point=g,e.lineStart()}function g(r,a){var i=Ma([r,a]),o=t(r,a);n(u,h,l,f,d,p,u=o[0],h=o[1],l=r,f=i[0],d=i[1],p=i[2],16,e),e.point(u,h)}function b(){v.point=m,e.lineEnd()}function w(){y(),v.point=_,v.lineEnd=x}function _(t,e){g(r=t,e),a=u,i=h,o=f,s=d,c=p,v.point=g}function x(){n(u,h,l,f,d,p,a,i,r,o,s,c,16,e),v.lineEnd=b,b()}return v}}(t,e):function(t){return $a({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var ai=$a({point:function(t,e){this.stream.point(t*hr,e*hr)}});function ii(t,e,n,r,a){function i(i,o){return[e+t*(i*=r),n-t*(o*=a)]}return i.invert=function(i,o){return[(i-e)/t*r,(n-o)/t*a]},i}function oi(t,e,n,r,a,i){var o=vr(i),s=mr(i),c=o*t,l=s*t,u=o/t,h=s/t,f=(s*n-o*e)/t,d=(s*e+o*n)/t;function p(t,i){return[c*(t*=r)-l*(i*=a)+e,n-l*t-c*i]}return p.invert=function(t,e){return[r*(u*t-h*e+f),a*(d-h*t-u*e)]},p}function si(t){var e,n,r,a,i,o,s,c,l,u,h=150,f=480,d=250,p=0,v=0,m=0,y=0,g=0,b=0,w=1,_=1,x=null,k=Ia,S=null,O=$n,j=.5;function M(t){return c(t[0]*hr,t[1]*hr)}function E(t){return(t=c.invert(t[0],t[1]))&&[t[0]*ur,t[1]*ur]}function A(){var t=oi(h,0,0,w,_,b).apply(null,e(p,v)),r=(b?oi:ii)(h,f-t[0],d-t[1],w,_,b);return n=Ha(m,y,g),s=Fa(e,r),c=Fa(n,s),o=ri(s,j),D()}function D(){return l=u=null,M}return M.stream=function(t){return l&&u===t?l:l=ai(function(t){return $a({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(o(O(u=t)))))},M.preclip=function(t){return arguments.length?(k=t,x=void 0,D()):k},M.postclip=function(t){return arguments.length?(O=t,S=r=a=i=null,D()):O},M.clipAngle=function(t){return arguments.length?(k=+t?qa(x=t*hr):(x=null,Ia),D()):x*ur},M.clipExtent=function(t){return arguments.length?(O=null==t?(S=r=a=i=null,$n):Xa(S=+t[0][0],r=+t[0][1],a=+t[1][0],i=+t[1][1]),D()):null==S?null:[[S,r],[a,i]]},M.scale=function(t){return arguments.length?(h=+t,A()):h},M.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],A()):[f,d]},M.center=function(t){return arguments.length?(p=t[0]%360*hr,v=t[1]%360*hr,A()):[p*ur,v*ur]},M.rotate=function(t){return arguments.length?(m=t[0]%360*hr,y=t[1]%360*hr,g=t.length>2?t[2]%360*hr:0,A()):[m*ur,y*ur,g*ur]},M.angle=function(t){return arguments.length?(b=t%360*hr,A()):b*ur},M.reflectX=function(t){return arguments.length?(w=t?-1:1,A()):w<0},M.reflectY=function(t){return arguments.length?(_=t?-1:1,A()):_<0},M.precision=function(t){return arguments.length?(o=ri(s,j=t*t),D()):gr(j)},M.fitExtent=function(t,e){return Za(M,t,e)},M.fitSize=function(t,e){return Qa(M,t,e)},M.fitWidth=function(t,e){return ti(M,t,e)},M.fitHeight=function(t,e){return ei(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&E,A()}}function ci(t,e){var n=mr(t),r=(n+mr(e))/2;if(fr(r)<1e-6)return function(t){var e=vr(t);function n(t,n){return[t*e,mr(n)/e]}return n.invert=function(t,n){return[t/e,br(n*e)]},n}(t);var a=1+n*(2*r-n),i=gr(a)/r;function o(t,e){var n=gr(a-2*r*mr(e))/r;return[n*mr(t*=r),i-n*vr(t)]}return o.invert=function(t,e){var n=i-e,o=pr(t,fr(n))*yr(n);return n*r<0&&(o-=or*yr(t)*yr(n)),[o/r,br((a-(t*t+n*n)*r*r)/(2*r))]},o}var li=function(){return function(t){var e=0,n=or/3,r=si(t),a=r(e,n);return a.parallels=function(t){return arguments.length?r(e=t[0]*hr,n=t[1]*hr):[e*ur,n*ur]},a}(ci).scale(155.424).center([0,33.6442])};var ui=function(t){return function(){return t}};function hi(t){return t[0]}function fi(t){return t[1]}function di(){this._=null}function pi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function vi(t,e){var n=e,r=e.R,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function mi(t,e){var n=e,r=e.L,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function yi(t){for(;t.L;)t=t.L;return t}di.prototype={constructor:di,insert:function(t,e){var n,r,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=yi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.R&&(vi(this,n),n=(t=n).U),n.C=!1,r.C=!0,mi(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.L&&(mi(this,n),n=(t=n).U),n.C=!1,r.C=!0,vi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,a=t.U,i=t.L,o=t.R;if(n=i?o?yi(o):i:o,a?a.L===t?a.L=n:a.R=n:this._=n,i&&o?(r=n.C,n.C=t.C,n.L=i,i.U=n,n!==o?(a=n.U,n.U=t.U,t=n.R,a.L=t,n.R=o,o.U=n):(n.U=a,a=n,t=n.R)):(r=t.C,t=n),t&&(t.U=a),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===a.L){if((e=a.R).C&&(e.C=!1,a.C=!0,vi(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,mi(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,vi(this,a),t=this._;break}}else if((e=a.L).C&&(e.C=!1,a.C=!0,mi(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,vi(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,mi(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}};var gi=di;function bi(t,e,n,r){var a=[null,null],i=Gi.push(a)-1;return a.left=t,a.right=e,n&&_i(a,t,e,n),r&&_i(a,e,t,r),Hi[t.index].halfedges.push(i),Hi[e.index].halfedges.push(i),a}function wi(t,e,n){var r=[e,n];return r.left=t,r}function _i(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function xi(t,e,n,r,a){var i,o=t[0],s=t[1],c=o[0],l=o[1],u=0,h=1,f=s[0]-c,d=s[1]-l;if(i=e-c,f||!(i>0)){if(i/=f,f<0){if(i<u)return;i<h&&(h=i)}else if(f>0){if(i>h)return;i>u&&(u=i)}if(i=r-c,f||!(i<0)){if(i/=f,f<0){if(i>h)return;i>u&&(u=i)}else if(f>0){if(i<u)return;i<h&&(h=i)}if(i=n-l,d||!(i>0)){if(i/=d,d<0){if(i<u)return;i<h&&(h=i)}else if(d>0){if(i>h)return;i>u&&(u=i)}if(i=a-l,d||!(i<0)){if(i/=d,d<0){if(i>h)return;i>u&&(u=i)}else if(d>0){if(i<u)return;i<h&&(h=i)}return!(u>0||h<1)||(u>0&&(t[0]=[c+u*f,l+u*d]),h<1&&(t[1]=[c+h*f,l+h*d]),!0)}}}}}function ki(t,e,n,r,a){var i=t[1];if(i)return!0;var o,s,c=t[0],l=t.left,u=t.right,h=l[0],f=l[1],d=u[0],p=u[1],v=(h+d)/2,m=(f+p)/2;if(p===f){if(v<e||v>=r)return;if(h>d){if(c){if(c[1]>=a)return}else c=[v,n];i=[v,a]}else{if(c){if(c[1]<n)return}else c=[v,a];i=[v,n]}}else if(s=m-(o=(h-d)/(p-f))*v,o<-1||o>1)if(h>d){if(c){if(c[1]>=a)return}else c=[(n-s)/o,n];i=[(a-s)/o,a]}else{if(c){if(c[1]<n)return}else c=[(a-s)/o,a];i=[(n-s)/o,n]}else if(f<p){if(c){if(c[0]>=r)return}else c=[e,o*e+s];i=[r,o*r+s]}else{if(c){if(c[0]<e)return}else c=[r,o*r+s];i=[e,o*e+s]}return t[0]=c,t[1]=i,!0}function Si(t,e){var n=t.site,r=e.left,a=e.right;return n===a&&(a=r,r=n),a?Math.atan2(a[1]-r[1],a[0]-r[0]):(n===r?(r=e[1],a=e[0]):(r=e[0],a=e[1]),Math.atan2(r[0]-a[0],a[1]-r[1]))}function Oi(t,e){return e[+(e.left!==t.site)]}function ji(t,e){return e[+(e.left===t.site)]}var Mi,Ei=[];function Ai(){pi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Di(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,a=t.site,i=n.site;if(r!==i){var o=a[0],s=a[1],c=r[0]-o,l=r[1]-s,u=i[0]-o,h=i[1]-s,f=2*(c*h-l*u);if(!(f>=-Wi)){var d=c*c+l*l,p=u*u+h*h,v=(h*d-l*p)/f,m=(c*p-u*d)/f,y=Ei.pop()||new Ai;y.arc=t,y.site=a,y.x=v+o,y.y=(y.cy=m+s)+Math.sqrt(v*v+m*m),t.circle=y;for(var g=null,b=Ui._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){g=b.P;break}b=b.L}else{if(!b.R){g=b;break}b=b.R}Ui.insert(g,y),g||(Mi=y)}}}}function Ci(t){var e=t.circle;e&&(e.P||(Mi=e.N),Ui.remove(e),Ei.push(e),pi(e),t.circle=null)}var Ti=[];function Pi(){pi(this),this.edge=this.site=this.circle=null}function Ri(t){var e=Ti.pop()||new Pi;return e.site=t,e}function Ni(t){Ci(t),Vi.remove(t),Ti.push(t),pi(t)}function Li(t){var e=t.circle,n=e.x,r=e.cy,a=[n,r],i=t.P,o=t.N,s=[t];Ni(t);for(var c=i;c.circle&&Math.abs(n-c.circle.x)<zi&&Math.abs(r-c.circle.cy)<zi;)i=c.P,s.unshift(c),Ni(c),c=i;s.unshift(c),Ci(c);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<zi&&Math.abs(r-l.circle.cy)<zi;)o=l.N,s.push(l),Ni(l),l=o;s.push(l),Ci(l);var u,h=s.length;for(u=1;u<h;++u)l=s[u],c=s[u-1],_i(l.edge,c.site,l.site,a);c=s[0],(l=s[h-1]).edge=bi(c.site,l.site,null,a),Di(c),Di(l)}function Bi(t){for(var e,n,r,a,i=t[0],o=t[1],s=Vi._;s;)if((r=Ii(s,o)-i)>zi)s=s.L;else{if(!((a=i-Fi(s,o))>zi)){r>-zi?(e=s.P,n=s):a>-zi?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Hi[t.index]={site:t,halfedges:[]}}(t);var c=Ri(t);if(Vi.insert(e,c),e||n){if(e===n)return Ci(e),n=Ri(e.site),Vi.insert(c,n),c.edge=n.edge=bi(e.site,c.site),Di(e),void Di(n);if(n){Ci(e),Ci(n);var l=e.site,u=l[0],h=l[1],f=t[0]-u,d=t[1]-h,p=n.site,v=p[0]-u,m=p[1]-h,y=2*(f*m-d*v),g=f*f+d*d,b=v*v+m*m,w=[(m*g-d*b)/y+u,(f*b-v*g)/y+h];_i(n.edge,l,p,w),c.edge=bi(l,t,null,w),n.edge=bi(t,p,null,w),Di(e),Di(n)}else c.edge=bi(e.site,c.site)}}function Ii(t,e){var n=t.site,r=n[0],a=n[1],i=a-e;if(!i)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],c=n[1],l=c-e;if(!l)return s;var u=s-r,h=1/i-1/l,f=u/l;return h?(-f+Math.sqrt(f*f-2*h*(u*u/(-2*l)-c+l/2+a-i/2)))/h+r:(r+s)/2}function Fi(t,e){var n=t.N;if(n)return Ii(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Vi,Hi,Ui,Gi,zi=1e-6,Wi=1e-12;function Yi(t,e){return e[1]-t[1]||e[0]-t[0]}function qi(t,e){var n,r,a,i=t.sort(Yi).pop();for(Gi=[],Hi=new Array(t.length),Vi=new gi,Ui=new gi;;)if(a=Mi,i&&(!a||i[1]<a.y||i[1]===a.y&&i[0]<a.x))i[0]===n&&i[1]===r||(Bi(i),n=i[0],r=i[1]),i=t.pop();else{if(!a)break;Li(a.arc)}if(function(){for(var t,e,n,r,a=0,i=Hi.length;a<i;++a)if((t=Hi[a])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=Si(t,Gi[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],c=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var a,i=Gi.length;i--;)ki(a=Gi[i],t,e,n,r)&&xi(a,t,e,n,r)&&(Math.abs(a[0][0]-a[1][0])>zi||Math.abs(a[0][1]-a[1][1])>zi)||delete Gi[i]}(o,s,c,l),function(t,e,n,r){var a,i,o,s,c,l,u,h,f,d,p,v,m=Hi.length,y=!0;for(a=0;a<m;++a)if(i=Hi[a]){for(o=i.site,s=(c=i.halfedges).length;s--;)Gi[c[s]]||c.splice(s,1);for(s=0,l=c.length;s<l;)p=(d=ji(i,Gi[c[s]]))[0],v=d[1],h=(u=Oi(i,Gi[c[++s%l]]))[0],f=u[1],(Math.abs(p-h)>zi||Math.abs(v-f)>zi)&&(c.splice(s,0,Gi.push(wi(o,d,Math.abs(p-t)<zi&&r-v>zi?[t,Math.abs(h-t)<zi?f:r]:Math.abs(v-r)<zi&&n-p>zi?[Math.abs(f-r)<zi?h:n,r]:Math.abs(p-n)<zi&&v-e>zi?[n,Math.abs(h-n)<zi?f:e]:Math.abs(v-e)<zi&&p-t>zi?[Math.abs(f-e)<zi?h:t,e]:null))-1),++l);l&&(y=!1)}if(y){var g,b,w,_=1/0;for(a=0,y=null;a<m;++a)(i=Hi[a])&&(w=(g=(o=i.site)[0]-t)*g+(b=o[1]-e)*b)<_&&(_=w,y=i);if(y){var x=[t,e],k=[t,r],S=[n,r],O=[n,e];y.halfedges.push(Gi.push(wi(o=y.site,x,k))-1,Gi.push(wi(o,k,S))-1,Gi.push(wi(o,S,O))-1,Gi.push(wi(o,O,x))-1)}}for(a=0;a<m;++a)(i=Hi[a])&&(i.halfedges.length||delete Hi[a])}(o,s,c,l)}this.edges=Gi,this.cells=Hi,Vi=Ui=Gi=Hi=null}qi.prototype={constructor:qi,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Oi(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(i=(a=n.halfedges).length)for(var a,i,o,s,c,l,u=n.site,h=-1,f=e[a[i-1]],d=f.left===u?f.right:f.left;++h<i;)o=d,d=(f=e[a[h]]).left===u?f.right:f.left,o&&d&&r<o.index&&r<d.index&&(c=o,l=d,((s=u)[0]-l[0])*(c[1]-s[1])-(s[0]-c[0])*(l[1]-s[1])<0)&&t.push([u.data,o.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,a,i=this,o=i._found||0,s=i.cells.length;!(a=i.cells[o]);)if(++o>=s)return null;var c=t-a.site[0],l=e-a.site[1],u=c*c+l*l;do{a=i.cells[r=o],o=null,a.halfedges.forEach((function(n){var r=i.edges[n],s=r.left;if(s!==a.site&&s||(s=r.right)){var c=t-s[0],l=e-s[1],h=c*c+l*l;h<u&&(u=h,o=s.index)}}))}while(null!==o);return i._found=r,null==n||u<=n*n?a.site:null}};var Xi={ascending:mn.ascending,easeBackOut:At,json:function(t,e){return fetch(t,e).then(y)},select:function(t){return"string"==typeof t?new jt([[document.querySelector(t)]],[document.documentElement]):new jt([[t]],Ot)},selectAll:function(t){return"string"==typeof t?new jt([document.querySelectorAll(t)],[document.documentElement]):new jt([null==t?[]:t],Ot)},mouse:function(t){var e=function(){for(var t,e=mt;t=e.sourceEvent;)e=t;return e}();return e.changedTouches&&(e=e.changedTouches[0]),function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}(t,e)},forceCollide:function(t){var e,n,r=1,a=1;function i(){for(var t,i,s,c,l,u,h,f=e.length,d=0;d<a;++d)for(i=sn(e,dn,pn).visitAfter(o),t=0;t<f;++t)s=e[t],u=n[s.index],h=u*u,c=s.x+s.vx,l=s.y+s.vy,i.visit(p);function p(t,e,n,a,i){var o=t.data,f=t.r,d=u+f;if(!o)return e>c+d||a<c-d||n>l+d||i<l-d;if(o.index>s.index){var p=c-o.x-o.vx,v=l-o.y-o.vy,m=p*p+v*v;m<d*d&&(0===p&&(m+=(p=fn())*p),0===v&&(m+=(v=fn())*v),m=(d-(m=Math.sqrt(m)))/m*r,s.vx+=(p*=m)*(d=(f*=f)/(h+f)),s.vy+=(v*=m)*d,o.vx-=p*(d=1-d),o.vy-=v*d)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,a,i=e.length;for(n=new Array(i),r=0;r<i;++r)a=e[r],n[a.index]=+t(a,r,e)}}return"function"!=typeof t&&(t=hn(null==t?1:+t)),i.initialize=function(t){e=t,s()},i.iterations=function(t){return arguments.length?(a=+t,i):a},i.strength=function(t){return arguments.length?(r=+t,i):r},i.radius=function(e){return arguments.length?(t="function"==typeof e?e:hn(+e),s(),i):t},i},forceSimulation:function(t){var e,n=1,r=.001,a=1-Math.pow(r,1/300),i=0,o=.6,s=new Map,c=Kt(u),l=Lt("tick","end");function u(){h(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function h(r){var c,l,u=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(i-n)*a,s.forEach((function(t){t(n)})),c=0;c<u;++c)null==(l=t[c]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var a=10*Math.sqrt(n),i=n*vn;e.x=a*Math.cos(i),e.y=a*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return c.restart(u),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(a=+t,e):+a},alphaTarget:function(t){return arguments.length?(i=+t,e):i},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var a,i,o,s,c,l=0,u=t.length;for(null==r?r=1/0:r*=r,l=0;l<u;++l)(o=(a=e-(s=t[l]).x)*a+(i=n-s.y)*i)<r&&(c=s,r=o);return c},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},forceX:function(t){var e,n,r,a=hn(.1);function i(t){for(var a,i=0,o=e.length;i<o;++i)(a=e[i]).vx+=(r[i]-a.x)*n[i]*t}function o(){if(e){var i,o=e.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+a(e[i],i,e)}}return"function"!=typeof t&&(t=hn(null==t?0:+t)),i.initialize=function(t){e=t,o()},i.strength=function(t){return arguments.length?(a="function"==typeof t?t:hn(+t),o(),i):a},i.x=function(e){return arguments.length?(t="function"==typeof e?e:hn(+e),o(),i):t},i},forceY:function(t){var e,n,r,a=hn(.1);function i(t){for(var a,i=0,o=e.length;i<o;++i)(a=e[i]).vy+=(r[i]-a.y)*n[i]*t}function o(){if(e){var i,o=e.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+a(e[i],i,e)}}return"function"!=typeof t&&(t=hn(null==t?0:+t)),i.initialize=function(t){e=t,o()},i.strength=function(t){return arguments.length?(a="function"==typeof t?t:hn(+t),o(),i):a},i.y=function(e){return arguments.length?(t="function"==typeof e?e:hn(+e),o(),i):t},i},format:en.b,extent:mn.extent,max:mn.max,min:mn.min,range:mn.range,scaleLinear:yn.scaleLinear,scalePoint:yn.scalePoint,scaleTime:yn.scaleTime,scaleThreshold:yn.scaleThreshold,transition:Je,line:An,area:function(){var t=Mn,e=null,n=Sn(0),r=En,a=Sn(!0),i=null,o=jn,s=null;function c(c){var l,u,h,f,d,p=c.length,v=!1,m=new Array(p),y=new Array(p);for(null==i&&(s=o(d=kn())),l=0;l<=p;++l){if(!(l<p&&a(f=c[l],l,c))===v)if(v=!v)u=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;h>=u;--h)s.point(m[h],y[h]);s.lineEnd(),s.areaEnd()}v&&(m[l]=+t(f,l,c),y[l]=+n(f,l,c),s.point(e?+e(f,l,c):m[l],r?+r(f,l,c):y[l]))}if(d)return s=null,d+""||null}function l(){return An().defined(a).curve(o).context(i)}return c.x=function(n){return arguments.length?(t="function"==typeof n?n:Sn(+n),e=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:Sn(+e),c):t},c.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:Sn(+t),c):e},c.y=function(t){return arguments.length?(n="function"==typeof t?t:Sn(+t),r=null,c):n},c.y0=function(t){return arguments.length?(n="function"==typeof t?t:Sn(+t),c):n},c.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Sn(+t),c):r},c.lineX0=c.lineY0=function(){return l().x(t).y(n)},c.lineY1=function(){return l().x(t).y(r)},c.lineX1=function(){return l().x(e).y(n)},c.defined=function(t){return arguments.length?(a="function"==typeof t?t:Sn(!!t),c):a},c.curve=function(t){return arguments.length?(o=t,null!=i&&(s=o(i)),c):o},c.context=function(t){return arguments.length?(null==t?i=s=null:s=o(i=t),c):i},c},curveBundle:Pn,axisTop:function(t){return qn(1,t)},axisBottom:function(t){return qn(3,t)},axisLeft:function(t){return qn(4,t)},timeFormat:Xn.b,timeParse:Xn.c,geoPath:function(t,e){var n,r,a=4.5;function i(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),er(t,n(r))),r.result()}return i.area=function(t){return er(t,n(Tr)),Tr.result()},i.measure=function(t){return er(t,n(ga)),ga.result()},i.bounds=function(t){return er(t,n(Hr)),Hr.result()},i.centroid=function(t){return er(t,n(sa)),sa.result()},i.projection=function(e){return arguments.length?(n=null==e?(t=null,$n):(t=e).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(e=null,new ba):new ca(e=t),"function"!=typeof a&&r.pointRadius(a),i):e},i.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),i):a},i.projection(t).context(e)},geoAlbersUsa:function(){var t,e,n,r,a,i,o=li().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),s=li().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=li().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){i=[t,e]}};function u(t){var e=t[0],o=t[1];return i=null,n.point(e,o),i||(r.point(e,o),i)||(a.point(e,o),i)}function h(){return t=e=null,u}return u.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?s:a>=.166&&a<.234&&r>=-.214&&r<-.115?c:o).invert(t)},u.stream=function(n){return t&&e===n?t:(r=[o.stream(e=n),s.stream(n),c.stream(n)],a=r.length,t={point:function(t,e){for(var n=-1;++n<a;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<a;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<a;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<a;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<a;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<a;)r[t].polygonEnd()}});var r,a},u.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),c.precision(t),h()):o.precision()},u.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),c.scale(t),u.translate(o.translate())):o.scale()},u.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),i=+t[0],u=+t[1];return n=o.translate(t).clipExtent([[i-.455*e,u-.238*e],[i+.455*e,u+.238*e]]).stream(l),r=s.translate([i-.307*e,u+.201*e]).clipExtent([[i-.425*e+1e-6,u+.12*e+1e-6],[i-.214*e-1e-6,u+.234*e-1e-6]]).stream(l),a=c.translate([i-.205*e,u+.212*e]).clipExtent([[i-.214*e+1e-6,u+.166*e+1e-6],[i-.115*e-1e-6,u+.234*e-1e-6]]).stream(l),h()},u.fitExtent=function(t,e){return Za(u,t,e)},u.fitSize=function(t,e){return Qa(u,t,e)},u.fitWidth=function(t,e){return ti(u,t,e)},u.fitHeight=function(t,e){return ei(u,t,e)},u.scale(1070)},voronoi:function(){var t=hi,e=fi,n=null;function r(r){return new qi(r.map((function(n,a){var i=[Math.round(t(n,a,r)/zi)*zi,Math.round(e(n,a,r)/zi)*zi];return i.index=a,i.data=n,i})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:ui(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:ui(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},symbol:function(){var t=Sn(Ln),e=Sn(64),n=null;function r(){var r;if(n||(n=r=kn()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:Sn(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:Sn(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},symbolTriangle:Fn}},function(t,e,n){"use strict";n.r(e),n.d(e,"bisect",(function(){return c})),n.d(e,"bisectRight",(function(){return o})),n.d(e,"bisectLeft",(function(){return s})),n.d(e,"ascending",(function(){return r})),n.d(e,"bisector",(function(){return a})),n.d(e,"cross",(function(){return h})),n.d(e,"descending",(function(){return f})),n.d(e,"deviation",(function(){return v})),n.d(e,"extent",(function(){return m})),n.d(e,"histogram",(function(){return D})),n.d(e,"thresholdFreedmanDiaconis",(function(){return T})),n.d(e,"thresholdScott",(function(){return P})),n.d(e,"thresholdSturges",(function(){return A})),n.d(e,"max",(function(){return R})),n.d(e,"mean",(function(){return N})),n.d(e,"median",(function(){return L})),n.d(e,"merge",(function(){return B})),n.d(e,"min",(function(){return I})),n.d(e,"pairs",(function(){return l})),n.d(e,"permute",(function(){return F})),n.d(e,"quantile",(function(){return C})),n.d(e,"range",(function(){return x})),n.d(e,"scan",(function(){return V})),n.d(e,"shuffle",(function(){return H})),n.d(e,"sum",(function(){return U})),n.d(e,"ticks",(function(){return j})),n.d(e,"tickIncrement",(function(){return M})),n.d(e,"tickStep",(function(){return E})),n.d(e,"transpose",(function(){return G})),n.d(e,"variance",(function(){return p})),n.d(e,"zip",(function(){return W}));var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},a=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return r(e(t),n)}),{left:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;t(e[i],n)<0?r=i+1:a=i}return r},right:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;t(e[i],n)>0?a=i:r=i+1}return r}}};var i=a(r),o=i.right,s=i.left,c=o,l=function(t,e){null==e&&(e=u);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return i};function u(t,e){return[t,e]}var h=function(t,e,n){var r,a,i,o,s=t.length,c=e.length,l=new Array(s*c);for(null==n&&(n=u),r=i=0;r<s;++r)for(o=t[r],a=0;a<c;++a,++i)l[i]=n(o,e[a]);return l},f=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},d=function(t){return null===t?NaN:+t},p=function(t,e){var n,r,a=t.length,i=0,o=-1,s=0,c=0;if(null==e)for(;++o<a;)isNaN(n=d(t[o]))||(c+=(r=n-s)*(n-(s+=r/++i)));else for(;++o<a;)isNaN(n=d(e(t[o],o,t)))||(c+=(r=n-s)*(n-(s+=r/++i)));if(i>1)return c/(i-1)},v=function(t,e){var n=p(t,e);return n?Math.sqrt(n):n},m=function(t,e){var n,r,a,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=a=n;++o<i;)null!=(n=t[o])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=a=n;++o<i;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]},y=Array.prototype,g=y.slice,b=y.map,w=function(t){return function(){return t}},_=function(t){return t},x=function(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(a);++r<a;)i[r]=t+r*n;return i},k=Math.sqrt(50),S=Math.sqrt(10),O=Math.sqrt(2),j=function(t,e,n){var r,a,i,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),0===(o=M(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),i=new Array(a=Math.ceil(e-t+1));++s<a;)i[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),i=new Array(a=Math.ceil(t-e+1));++s<a;)i[s]=(t-s)/o;return r&&i.reverse(),i};function M(t,e,n){var r=(e-t)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=k?10:i>=S?5:i>=O?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=k?10:i>=S?5:i>=O?2:1)}function E(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=k?a*=10:i>=S?a*=5:i>=O&&(a*=2),e<t?-a:a}var A=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},D=function(){var t=_,e=m,n=A;function r(r){var a,i,o=r.length,s=new Array(o);for(a=0;a<o;++a)s[a]=t(r[a],a,r);var l=e(s),u=l[0],h=l[1],f=n(s,u,h);Array.isArray(f)||(f=E(u,h,f),f=x(Math.ceil(u/f)*f,h,f));for(var d=f.length;f[0]<=u;)f.shift(),--d;for(;f[d-1]>h;)f.pop(),--d;var p,v=new Array(d+1);for(a=0;a<=d;++a)(p=v[a]=[]).x0=a>0?f[a-1]:u,p.x1=a<d?f[a]:h;for(a=0;a<o;++a)u<=(i=s[a])&&i<=h&&v[c(f,i,0,d)].push(r[a]);return v}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:w(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:w([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?w(g.call(t)):w(t),r):n},r},C=function(t,e,n){if(null==n&&(n=d),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,a=(r-1)*e,i=Math.floor(a),o=+n(t[i],i,t);return o+(+n(t[i+1],i+1,t)-o)*(a-i)}},T=function(t,e,n){return t=b.call(t,d).sort(r),Math.ceil((n-e)/(2*(C(t,.75)-C(t,.25))*Math.pow(t.length,-1/3)))},P=function(t,e,n){return Math.ceil((n-e)/(3.5*v(t)*Math.pow(t.length,-1/3)))},R=function(t,e){var n,r,a=t.length,i=-1;if(null==e){for(;++i<a;)if(null!=(n=t[i])&&n>=n)for(r=n;++i<a;)null!=(n=t[i])&&n>r&&(r=n)}else for(;++i<a;)if(null!=(n=e(t[i],i,t))&&n>=n)for(r=n;++i<a;)null!=(n=e(t[i],i,t))&&n>r&&(r=n);return r},N=function(t,e){var n,r=t.length,a=r,i=-1,o=0;if(null==e)for(;++i<r;)isNaN(n=d(t[i]))?--a:o+=n;else for(;++i<r;)isNaN(n=d(e(t[i],i,t)))?--a:o+=n;if(a)return o/a},L=function(t,e){var n,a=t.length,i=-1,o=[];if(null==e)for(;++i<a;)isNaN(n=d(t[i]))||o.push(n);else for(;++i<a;)isNaN(n=d(e(t[i],i,t)))||o.push(n);return C(o.sort(r),.5)},B=function(t){for(var e,n,r,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(n=new Array(o);--a>=0;)for(e=(r=t[a]).length;--e>=0;)n[--o]=r[e];return n},I=function(t,e){var n,r,a=t.length,i=-1;if(null==e){for(;++i<a;)if(null!=(n=t[i])&&n>=n)for(r=n;++i<a;)null!=(n=t[i])&&r>n&&(r=n)}else for(;++i<a;)if(null!=(n=e(t[i],i,t))&&n>=n)for(r=n;++i<a;)null!=(n=e(t[i],i,t))&&r>n&&(r=n);return r},F=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},V=function(t,e){if(n=t.length){var n,a,i=0,o=0,s=t[o];for(null==e&&(e=r);++i<n;)(e(a=t[i],s)<0||0!==e(s,s))&&(s=a,o=i);return 0===e(s,s)?o:void 0}},H=function(t,e,n){for(var r,a,i=(null==n?t.length:n)-(e=null==e?0:+e);i;)a=Math.random()*i--|0,r=t[i+e],t[i+e]=t[a+e],t[a+e]=r;return t},U=function(t,e){var n,r=t.length,a=-1,i=0;if(null==e)for(;++a<r;)(n=+t[a])&&(i+=n);else for(;++a<r;)(n=+e(t[a],a,t))&&(i+=n);return i},G=function(t){if(!(a=t.length))return[];for(var e=-1,n=I(t,z),r=new Array(n);++e<n;)for(var a,i=-1,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r};function z(t){return t.length}var W=function(){return G(arguments)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=new Date,a=new Date;function i(t,e,n,o){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,a){var i,o=[];if(n=s.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;do{o.push(i=new Date(+n)),e(n,a),t(n)}while(i<n&&n<r);return o},s.filter=function(n){return i((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(s.count=function(e,i){return r.setTime(+e),a.setTime(+i),t(r),t(a),Math.floor(n(r,a))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(o?function(e){return o(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}},function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return s}));var r=1e3,a=6e4,i=36e5,o=864e5,s=6048e5},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return l}));var r,a,i,o,s,c=n(32);function l(t){return r=Object(c.a)(t),a=r.format,i=r.parse,o=r.utcFormat,s=r.utcParse,r}l({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(t,e,n){"use strict";var r=n(13);e.a=function(t){return(t=Object(r.a)(Math.abs(t)))?t[1]:NaN}},,function(t,e,n){"use strict";function r(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}n.d(e,"b",(function(){return r})),e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));var r=n(19);function a(t,e){return function(n){return t+n*e}}function i(t,e){var n=e-t;return n?a(t,n>180||n<-180?n-360*Math.round(n/360):n):Object(r.a)(isNaN(t)?e:t)}function o(t){return 1==(t=+t)?s:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Object(r.a)(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?a(t,n):Object(r.a)(isNaN(t)?e:t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return w})),n.d(e,"g",(function(){return k})),n.d(e,"f",(function(){return S})),n.d(e,"b",(function(){return O}));var r=n(8);function a(){}var i=.7,o=1/i,s="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),f=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),d=new RegExp("^rgba\\("+[s,s,s,c]+"\\)$"),p=new RegExp("^rgba\\("+[l,l,l,c]+"\\)$"),v=new RegExp("^hsl\\("+[c,l,l]+"\\)$"),m=new RegExp("^hsla\\("+[c,l,l,c]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function w(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=u.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?_(e):3===n?new O(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?x(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?x(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h.exec(t))?new O(e[1],e[2],e[3],1):(e=f.exec(t))?new O(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=d.exec(t))?x(e[1],e[2],e[3],e[4]):(e=p.exec(t))?x(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=v.exec(t))?A(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?A(e[1],e[2]/100,e[3]/100,e[4]):y.hasOwnProperty(t)?_(y[t]):"transparent"===t?new O(NaN,NaN,NaN,0):null}function _(t){return new O(t>>16&255,t>>8&255,255&t,1)}function x(t,e,n,r){return r<=0&&(t=e=n=NaN),new O(t,e,n,r)}function k(t){return t instanceof a||(t=w(t)),t?new O((t=t.rgb()).r,t.g,t.b,t.opacity):new O}function S(t,e,n,r){return 1===arguments.length?k(t):new O(t,e,n,null==r?1:r)}function O(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function j(){return"#"+E(this.r)+E(this.g)+E(this.b)}function M(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function E(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function A(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new C(t,e,n,r)}function D(t){if(t instanceof C)return new C(t.h,t.s,t.l,t.opacity);if(t instanceof a||(t=w(t)),!t)return new C;if(t instanceof C)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,c=o-i,l=(o+i)/2;return c?(s=e===o?(n-r)/c+6*(n<r):n===o?(r-e)/c+2:(e-n)/c+4,c/=l<.5?o+i:2-o-i,s*=60):c=l>0&&l<1?0:s,new C(s,c,l,t.opacity)}function C(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function T(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Object(r.a)(a,w,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return D(this).formatHsl()},formatRgb:b,toString:b}),Object(r.a)(O,S,Object(r.b)(a,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?i:Math.pow(i,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatRgb:M,toString:M})),Object(r.a)(C,(function(t,e,n,r){return 1===arguments.length?D(t):new C(t,e,n,null==r?1:r)}),Object(r.b)(a,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new C(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?i:Math.pow(i,t),new C(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new O(T(t>=240?t-240:t+120,a,r),T(t,a,r),T(t<120?t+240:t-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t){return t.replace(/(\d{4}-\d{2}-\d{2})\s(\d{2}:)/,"$1T$2").replace(/GMT/,"").replace(/\s([+-]\d{4})/,"$1").replace(/([+-])(\d{2})(\d{2})/,"$1$2:$3")}var a=n(36);var i=n(36);var o=n(36);var s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(){function t(e){s(this,t),this.name=e,this.sendMap={},function(t,e,n,r,a,i,o){t.GoogleAnalyticsObject=a,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,i=e.createElement(n),o=e.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(i,o)}(window,document,"script",0,"ga"),ga("create","UA-60673836-2","auto"),this.pageview()}return c(t,[{key:"sendEvent",value:function(t,e,n){window.ga("send","event",this.name,t,e,n,{page:"/"+this.name,title:this.name})}},{key:"getIdentifier",value:function(t,e){return t+":"+e}},{key:"sendEventOnce",value:function(t,e,n){void 0===this.sendMap[this.getIdentifier(t,e,n)]&&(this.sendEvent(t,e,n),this.sendMap[this.getIdentifier(t,e,n)]=1),this.sendMap[this.getIdentifier(t,e,n)]++}},{key:"pageview",value:function(){window.ga("send","pageview",{page:"/"+this.name,title:this.name})}}]),t}(),u=function(){function t(e){var n=this;s(this,t),this.opts=e||{},["politics","sports","science","economics","life"].indexOf(this.opts.tag)>=0?this.url="https://fivethirtyeight.com/"+this.opts.tag+"/recirc/":this.url="https://fivethirtyeight.com/tag/"+(this.opts.tag||"2020-election")+"/recirc/",this.maxItems=this.opts.maxItems||5,document.readyState&&"loading"!=document.readyState?this.init():document.addEventListener("DOMContentLoaded",(function(){n.init()}))}return c(t,[{key:"init",value:function(){this.promisedXHR("GET",this.url).then(this.parseResponse.bind(this)).then(this.addItems.bind(this)).catch((function(t){console.log(t)}))}},{key:"addItems",value:function(t){for(var e=0,n=0;n<t.getElementsByTagName("item").length;n++)if((e+=this.addItem(t.getElementsByTagName("item")[n],e))>=this.maxItems){document.getElementById("related").style.display="block";break}}},{key:"parseResponse",value:function(t){var e=t.target.responseText,n=void 0;window.DOMParser?n=(new DOMParser).parseFromString(e,"text/xml"):((n=new ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(e));return n}},{key:"promisedXHR",value:function(t,e){return new Promise((function(n,r){var a=new XMLHttpRequest;a.open(t,e),a.onload=n,a.onerror=r,a.send()}))}},{key:"addItem",value:function(t,e){if(0===t.getElementsByTagNameNS("*","thumbnail").length)return 0;var n=t.getElementsByTagName("link")[0].textContent.replace("https:","http:"),r=t.getElementsByTagName("title")[0].textContent,a=t.getElementsByTagNameNS("*","thumbnail")[0].getAttribute("url")+"?quality=90&strip=info",i=a+"&w=400",o=a+"&w=200",s=a+"&w=100";if(n.indexOf("projects.fivethirtyeight.com")>=0&&n.indexOf(this.opts.url.split("/").slice(-2)[0])>=0)return 0;var c=document.getElementById("related-"+(e+1).toString()),l=document.createElement("a"),u=new Image,h=document.createElement("h2"),f=document.createElement("a");return l.href=n,u.src=i,u.srcset=i+" 400w, "+o+" 200w, "+s+" 100w",u.sizes="(max-width: 767px) 100px, 200px",u.alt=r,l.appendChild(u),f.href=n,f.innerHTML=r,h.appendChild(f),c.innerHTML="",c.appendChild(l),c.appendChild(h),1}}]),t}(),h=function(){function t(e){var n=this;s(this,t),this.opts=e||{},document.readyState&&"loading"!=document.readyState?this.init():document.addEventListener("DOMContentLoaded",(function(){n.init()}))}return c(t,[{key:"init",value:function(){var t=this;document.getElementById("twitter-sharer")&&(document.getElementById("twitter-sharer").onclick=function(){return window.open("https://twitter.com/intent/tweet?text="+t.opts.twittertext+"&url="+t.opts.url+"?ex_cid=story-twitter","","resizable,height=251,width=550"),!1}),document.getElementById("facebook-sharer")&&(document.getElementById("facebook-sharer").onclick=function(){return window.open("https://www.facebook.com/sharer/sharer.php?u="+t.opts.url+"%3Fex_cid=story-facebook","","resizable,height=354,width=626"),!1})}}]),t}(),f=n(58),d=function(){function t(e){var n=this;s(this,t);var r=e||{};this.template=r.template,this.modelURL=r.modelURL||"https://projects.fivethirtyeight.com/interactive-recirc/interactive-recirc.json",this.insertBeforeSelector=r.insertBeforeSelector||"#related",this.projectName=r.projectName||"",this.analytics=r.analyticsInstance||{},this.recircGroupForTesting=r.recircGroupForTesting||"",document.readyState&&"loading"!=document.readyState?this.init():document.addEventListener("DOMContentLoaded",(function(){n.init()}))}return c(t,[{key:"init",value:function(){this.promisedXHR("GET",this.modelURL).then(this.filterProjects.bind(this)).then(this.sortProjects).then(this.formatAllTimestamps.bind(this)).then(this.compileTemplate.bind(this)).then(this.addAnalytics.bind(this)).catch((function(t){console.log(t)}))}},{key:"promisedXHR",value:function(t,e){return new Promise((function(n,r){var a=new XMLHttpRequest;a.open(t,e),a.onload=n,a.onerror=r,a.send()}))}},{key:"filterProjects",value:function(t){var e=this,n=JSON.parse(t.target.response),r=void 0;if(this.recircGroupForTesting){if(!n.map((function(t){return t.recircgroup})).includes(this.recircGroupForTesting))throw new Error(this.recircGroupForTesting+" is not a valid recirc group name.");r=this.recircGroupForTesting}else{var a=n.filter((function(t){return t.shortname===e.projectName}))[0];if(!a)throw new Error("This project has not been added to a recirc group.");r=a.recircgroup}return n.filter((function(t){return t.recircgroup===r&&t.shortname!==e.projectName}))}},{key:"sortProjects",value:function(t){return t.sort((function(t,e){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()}))}},{key:"formatAllTimestamps",value:function(t){var e=!0,n=!1,r=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;o.timestamp=this.formatTimestamp(o)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t}},{key:"formatTimestamp",value:function(t){var e=t.timestamp,n=new Date(e).getTime();return n>(new Date).getTime()-2592e5?f.ago(n):t.FTETimestamp}},{key:"compileTemplate",value:function(t){var e=this.template({projects:t});document.querySelector(this.insertBeforeSelector).insertAdjacentHTML("beforebegin",e)}},{key:"sendAnalytics",value:function(t,e){var n=e.currentTarget.dataset.project;this.sendEvent("interactiveRecirc",n)}},{key:"addAnalytics",value:function(){var t=document.querySelectorAll(".js-project"),e=!0,n=!1,r=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){a.value.addEventListener("click",this.sendAnalytics.bind(this.analytics,event))}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}}]),t}();e.weekdayAbbrevs={Sunday:"Sun.",Monday:"Mon.",Tuesday:"Tues.",Wednesday:"Wed.",Thursday:"Thurs.",Friday:"Fri.",Saturday:"Sat."},e.monthAbbrevsAP={January:"Jan.",February:"Feb.",March:"March",April:"April",May:"May",June:"June",July:"July",August:"Aug.",September:"Sept.",October:"Oct.",November:"Nov.",December:"Dec."},e.punctuateMonthAbbrev=function(t){return"may"===t.toLowerCase()?t:t+"."},e.getAPDate=function(t,e){return a(new Date(r(t))).getAPDate(e)},e.getAPDateFTEStyle=function(t,e){return i(new Date(r(t))).getAPDate(e).split(".").join("")},e.getAPTime=function(t,e){return o(new Date(r(t))).getAPTime(e)},e.slugify=function(t){return t.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").trim()},e.fixedRound=function(t,e){if(void 0===t)throw new Error;var n=Math.pow(10,e+1),r=Math.floor(t*n);return(10*Math.round(r/10)/n).toFixed(e)},e.getAPStateAbbrev=function(t){return{Alabama:"Ala.",Alaska:"Alaska",Arizona:"Ariz.",Arkansas:"Ark.",California:"Calif.",Colorado:"Colo.",Connecticut:"Conn.",Delaware:"Del.","District of Columbia":"D.C.",Florida:"Fla.",Georgia:"Ga.",Hawaii:"Hawaii",Idaho:"Idaho",Illinois:"Ill.",Indiana:"Ind.",Iowa:"Iowa",Kansas:"Kan.",Kentucky:"Ky.",Louisiana:"La.",Maine:"Maine",Maryland:"Md.",Massachusetts:"Mass.",Michigan:"Mich.",Minnesota:"Minn.",Mississippi:"Miss.",Missouri:"Mo.",Montana:"Mont.",Nebraska:"Neb.",Nevada:"Nev.","New Hampshire":"N.H.","New Jersey":"N.J.","New Mexico":"N.M.","New York":"N.Y.","North Carolina":"N.C.","North Dakota":"N.D.",Ohio:"Ohio",Oklahoma:"Okla.",Oregon:"Ore.",Pennsylvania:"Pa.","Rhode Island":"R.I.","South Carolina":"S.C.","South Dakota":"S.D.",Tennessee:"Tenn.",Texas:"Texas",Utah:"Utah",Vermont:"Vt.",Virginia:"Va.",Washington:"Wash.","West Virginia":"W.Va.",Wisconsin:"Wis.",Wyoming:"Wyo."}[t]},e.colors={BLACK:"#222222",WHITE:"#FFFFFF",GRAY_BACKGROUND:"#F0F0F0",GRAY_GRID:"#CDCDCD",GRAY_LIGHTEST:"#FAFAFA",GRAY_LIGHT:"#999999",GRAY:"#808285",GRAY_DARK:"#5B5E5F",GRAY_DARKEST:"#262626",PURPLE:"#810F7C",GREEN:"#44AB43",BLUE:"#008FD5",YELLOW:"#F6B900",RED:"#FF2700",LIGHTGREEN:"#BFD7A6",ORANGE:"#ED713A",GRAY_BYLINE:"#939598",LINKBLUE:"#008FD5",BLACK_PURE:"#000000",TEAL:"#3FC1C9",PINK:"#FC5185"},e.Analytics=l,e.Recirc=u,e.SocialButtons=h,e.ampIframeSupport=function t(e){s(this,t),window.parent.postMessage({sentinel:"amp",type:"embed-size",height:document.body.scrollHeight},"*")},e.InteractiveRecirc=d,e.standardizeTime=r,e.imgSrc=function(t){var e="undefined"!=typeof staticUrl?staticUrl:this.staticUrl||"",n="undefined"!=typeof imageCache?imageCache:this.imageCache,r=n&&n[t]?n[t]:null;return e+"/images/"+t+(r?"?v="+r:"")}},,function(t,e,n){"use strict";e.a=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n(2),a=n(3);function i(t){return Object(r.a)((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*a.c)/a.e}))}var o=i(0),s=i(1),c=i(2),l=i(3),u=i(4),h=i(5),f=i(6);o.range,s.range,c.range,l.range,u.range,h.range,f.range},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n(2),a=n(3);function i(t){return Object(r.a)((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/a.e}))}var o=i(0),s=i(1),c=i(2),l=i(3),u=i(4),h=i(5),f=i(6);o.range,s.range,c.range,l.range,u.range,h.range,f.range},function(t,e,n){"use strict";var r=n(22);t.exports=r({colorFunctions:n(55),dates:n(56),dom:n(57),formatting:n(35),parties:n(59),states:n(37),senate:n(61),house:n(62)},n(11))},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i}));var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(t){if(!(e=r.exec(t)))throw new Error("invalid format: "+t);var e;return new i({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function i(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}a.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(t,e,n){"use strict";n.r(e),function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"default",(function(){return g})),n.d(e,"VERSION",(function(){return b})),n.d(e,"iteratee",(function(){return x})),n.d(e,"restArguments",(function(){return S})),n.d(e,"each",(function(){return T})),n.d(e,"forEach",(function(){return T})),n.d(e,"map",(function(){return P})),n.d(e,"collect",(function(){return P})),n.d(e,"reduce",(function(){return N})),n.d(e,"foldl",(function(){return N})),n.d(e,"inject",(function(){return N})),n.d(e,"reduceRight",(function(){return L})),n.d(e,"foldr",(function(){return L})),n.d(e,"find",(function(){return B})),n.d(e,"detect",(function(){return B})),n.d(e,"filter",(function(){return I})),n.d(e,"select",(function(){return I})),n.d(e,"reject",(function(){return F})),n.d(e,"every",(function(){return V})),n.d(e,"all",(function(){return V})),n.d(e,"some",(function(){return H})),n.d(e,"any",(function(){return H})),n.d(e,"contains",(function(){return U})),n.d(e,"includes",(function(){return U})),n.d(e,"include",(function(){return U})),n.d(e,"invoke",(function(){return G})),n.d(e,"pluck",(function(){return z})),n.d(e,"where",(function(){return W})),n.d(e,"findWhere",(function(){return Y})),n.d(e,"max",(function(){return q})),n.d(e,"min",(function(){return X})),n.d(e,"shuffle",(function(){return $})),n.d(e,"sample",(function(){return J})),n.d(e,"sortBy",(function(){return K})),n.d(e,"groupBy",(function(){return Q})),n.d(e,"indexBy",(function(){return tt})),n.d(e,"countBy",(function(){return et})),n.d(e,"toArray",(function(){return rt})),n.d(e,"size",(function(){return at})),n.d(e,"partition",(function(){return it})),n.d(e,"first",(function(){return ot})),n.d(e,"head",(function(){return ot})),n.d(e,"take",(function(){return ot})),n.d(e,"initial",(function(){return st})),n.d(e,"last",(function(){return ct})),n.d(e,"rest",(function(){return lt})),n.d(e,"tail",(function(){return lt})),n.d(e,"drop",(function(){return lt})),n.d(e,"compact",(function(){return ut})),n.d(e,"flatten",(function(){return ft})),n.d(e,"without",(function(){return dt})),n.d(e,"uniq",(function(){return pt})),n.d(e,"unique",(function(){return pt})),n.d(e,"union",(function(){return vt})),n.d(e,"intersection",(function(){return mt})),n.d(e,"difference",(function(){return yt})),n.d(e,"unzip",(function(){return gt})),n.d(e,"zip",(function(){return bt})),n.d(e,"object",(function(){return wt})),n.d(e,"findIndex",(function(){return xt})),n.d(e,"findLastIndex",(function(){return kt})),n.d(e,"sortedIndex",(function(){return St})),n.d(e,"indexOf",(function(){return jt})),n.d(e,"lastIndexOf",(function(){return Mt})),n.d(e,"range",(function(){return Et})),n.d(e,"chunk",(function(){return At})),n.d(e,"bind",(function(){return Ct})),n.d(e,"partial",(function(){return Tt})),n.d(e,"bindAll",(function(){return Pt})),n.d(e,"memoize",(function(){return Rt})),n.d(e,"delay",(function(){return Nt})),n.d(e,"defer",(function(){return Lt})),n.d(e,"throttle",(function(){return Bt})),n.d(e,"debounce",(function(){return It})),n.d(e,"wrap",(function(){return Ft})),n.d(e,"negate",(function(){return Vt})),n.d(e,"compose",(function(){return Ht})),n.d(e,"after",(function(){return Ut})),n.d(e,"before",(function(){return Gt})),n.d(e,"once",(function(){return zt})),n.d(e,"keys",(function(){return Xt})),n.d(e,"allKeys",(function(){return $t})),n.d(e,"values",(function(){return Jt})),n.d(e,"mapObject",(function(){return Kt})),n.d(e,"pairs",(function(){return Zt})),n.d(e,"invert",(function(){return Qt})),n.d(e,"functions",(function(){return te})),n.d(e,"methods",(function(){return te})),n.d(e,"extend",(function(){return ne})),n.d(e,"extendOwn",(function(){return re})),n.d(e,"assign",(function(){return re})),n.d(e,"findKey",(function(){return ae})),n.d(e,"pick",(function(){return oe})),n.d(e,"omit",(function(){return se})),n.d(e,"defaults",(function(){return ce})),n.d(e,"create",(function(){return le})),n.d(e,"clone",(function(){return ue})),n.d(e,"tap",(function(){return he})),n.d(e,"isMatch",(function(){return fe})),n.d(e,"isEqual",(function(){return pe})),n.d(e,"isEmpty",(function(){return ve})),n.d(e,"isElement",(function(){return me})),n.d(e,"isArray",(function(){return ge})),n.d(e,"isObject",(function(){return be})),n.d(e,"isArguments",(function(){return we})),n.d(e,"isFunction",(function(){return _e})),n.d(e,"isString",(function(){return xe})),n.d(e,"isNumber",(function(){return ke})),n.d(e,"isDate",(function(){return Se})),n.d(e,"isRegExp",(function(){return Oe})),n.d(e,"isError",(function(){return je})),n.d(e,"isSymbol",(function(){return Me})),n.d(e,"isMap",(function(){return Ee})),n.d(e,"isWeakMap",(function(){return Ae})),n.d(e,"isSet",(function(){return De})),n.d(e,"isWeakSet",(function(){return Ce})),n.d(e,"isFinite",(function(){return Pe})),n.d(e,"isNaN",(function(){return Re})),n.d(e,"isBoolean",(function(){return Ne})),n.d(e,"isNull",(function(){return Le})),n.d(e,"isUndefined",(function(){return Be})),n.d(e,"has",(function(){return Ie})),n.d(e,"identity",(function(){return Fe})),n.d(e,"constant",(function(){return Ve})),n.d(e,"noop",(function(){return He})),n.d(e,"property",(function(){return Ue})),n.d(e,"propertyOf",(function(){return Ge})),n.d(e,"matcher",(function(){return ze})),n.d(e,"matches",(function(){return ze})),n.d(e,"times",(function(){return We})),n.d(e,"random",(function(){return Ye})),n.d(e,"now",(function(){return qe})),n.d(e,"escape",(function(){return Ke})),n.d(e,"unescape",(function(){return Ze})),n.d(e,"result",(function(){return Qe})),n.d(e,"uniqueId",(function(){return en})),n.d(e,"templateSettings",(function(){return nn})),n.d(e,"template",(function(){return cn})),n.d(e,"chain",(function(){return ln})),n.d(e,"mixin",(function(){return hn}));var a="object"==("undefined"==typeof self?"undefined":r(self))&&self.self===self&&self||"object"==(void 0===t?"undefined":r(t))&&t.global===t&&t||Function("return this")()||{},i=Array.prototype,o=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,c=i.push,l=i.slice,u=o.toString,h=o.hasOwnProperty,f=Array.isArray,d=Object.keys,p=Object.create,v=a.isNaN,m=a.isFinite,y=function(){};function g(t){return t instanceof g?t:this instanceof g?void(this._wrapped=t):new g(t)}var b=g.VERSION="1.10.2";function w(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,a){return t.call(e,n,r,a)};case 4:return function(n,r,a,i){return t.call(e,n,r,a,i)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return null==t?Fe:_e(t)?w(t,e,n):be(t)&&!ge(t)?ze(t):Ue(t)}function x(t,e){return _(t,e,1/0)}function k(t,e,n){return g.iteratee!==x?g.iteratee(t,e):_(t,e,n)}function S(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),a=0;a<n;a++)r[a]=arguments[a+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(a=0;a<e;a++)i[a]=arguments[a];return i[e]=r,t.apply(this,i)}}function O(t){if(!be(t))return{};if(p)return p(t);y.prototype=t;var e=new y;return y.prototype=null,e}function j(t){return function(e){return null==e?void 0:e[t]}}function M(t,e){return null!=t&&h.call(t,e)}function E(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}g.iteratee=x;var A=Math.pow(2,53)-1,D=j("length");function C(t){var e=D(t);return"number"==typeof e&&e>=0&&e<=A}function T(t,e,n){var r,a;if(e=w(e,n),C(t))for(r=0,a=t.length;r<a;r++)e(t[r],r,t);else{var i=Xt(t);for(r=0,a=i.length;r<a;r++)e(t[i[r]],i[r],t)}return t}function P(t,e,n){e=k(e,n);for(var r=!C(t)&&Xt(t),a=(r||t).length,i=Array(a),o=0;o<a;o++){var s=r?r[o]:o;i[o]=e(t[s],s,t)}return i}function R(t){var e=function(e,n,r,a){var i=!C(e)&&Xt(e),o=(i||e).length,s=t>0?0:o-1;for(a||(r=e[i?i[s]:s],s+=t);s>=0&&s<o;s+=t){var c=i?i[s]:s;r=n(r,e[c],c,e)}return r};return function(t,n,r,a){var i=arguments.length>=3;return e(t,w(n,a,4),r,i)}}var N=R(1),L=R(-1);function B(t,e,n){var r=(C(t)?xt:ae)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function I(t,e,n){var r=[];return e=k(e,n),T(t,(function(t,n,a){e(t,n,a)&&r.push(t)})),r}function F(t,e,n){return I(t,Vt(k(e)),n)}function V(t,e,n){e=k(e,n);for(var r=!C(t)&&Xt(t),a=(r||t).length,i=0;i<a;i++){var o=r?r[i]:i;if(!e(t[o],o,t))return!1}return!0}function H(t,e,n){e=k(e,n);for(var r=!C(t)&&Xt(t),a=(r||t).length,i=0;i<a;i++){var o=r?r[i]:i;if(e(t[o],o,t))return!0}return!1}function U(t,e,n,r){return C(t)||(t=Jt(t)),("number"!=typeof n||r)&&(n=0),jt(t,e,n)>=0}var G=S((function(t,e,n){var r,a;return _e(e)?a=e:ge(e)&&(r=e.slice(0,-1),e=e[e.length-1]),P(t,(function(t){var i=a;if(!i){if(r&&r.length&&(t=E(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)}))}));function z(t,e){return P(t,Ue(e))}function W(t,e){return I(t,ze(e))}function Y(t,e){return B(t,ze(e))}function q(t,e,n){var a,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=r(t[0])&&null!=t)for(var c=0,l=(t=C(t)?t:Jt(t)).length;c<l;c++)null!=(a=t[c])&&a>o&&(o=a);else e=k(e,n),T(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o}function X(t,e,n){var a,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=r(t[0])&&null!=t)for(var c=0,l=(t=C(t)?t:Jt(t)).length;c<l;c++)null!=(a=t[c])&&a<o&&(o=a);else e=k(e,n),T(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o}function $(t){return J(t,1/0)}function J(t,e,n){if(null==e||n)return C(t)||(t=Jt(t)),t[Ye(t.length-1)];var r=C(t)?ue(t):Jt(t),a=D(r);e=Math.max(Math.min(e,a),0);for(var i=a-1,o=0;o<e;o++){var s=Ye(o,i),c=r[o];r[o]=r[s],r[s]=c}return r.slice(0,e)}function K(t,e,n){var r=0;return e=k(e,n),z(P(t,(function(t,n,a){return{value:t,index:r++,criteria:e(t,n,a)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function Z(t,e){return function(n,r,a){var i=e?[[],[]]:{};return r=k(r,a),T(n,(function(e,a){var o=r(e,a,n);t(i,e,o)})),i}}var Q=Z((function(t,e,n){M(t,n)?t[n].push(e):t[n]=[e]})),tt=Z((function(t,e,n){t[n]=e})),et=Z((function(t,e,n){M(t,n)?t[n]++:t[n]=1})),nt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function rt(t){return t?ge(t)?l.call(t):xe(t)?t.match(nt):C(t)?P(t,Fe):Jt(t):[]}function at(t){return null==t?0:C(t)?t.length:Xt(t).length}var it=Z((function(t,e,n){t[n?0:1].push(e)}),!0);function ot(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:st(t,t.length-e)}function st(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function ct(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:lt(t,Math.max(0,t.length-e))}function lt(t,e,n){return l.call(t,null==e||n?1:e)}function ut(t){return I(t,Boolean)}function ht(t,e,n,r){for(var a=(r=r||[]).length,i=0,o=D(t);i<o;i++){var s=t[i];if(C(s)&&(ge(s)||we(s)))if(e)for(var c=0,l=s.length;c<l;)r[a++]=s[c++];else ht(s,e,n,r),a=r.length;else n||(r[a++]=s)}return r}function ft(t,e){return ht(t,e,!1)}var dt=S((function(t,e){return yt(t,e)}));function pt(t,e,n,r){Ne(e)||(r=n,n=e,e=!1),null!=n&&(n=k(n,r));for(var a=[],i=[],o=0,s=D(t);o<s;o++){var c=t[o],l=n?n(c,o,t):c;e&&!n?(o&&i===l||a.push(c),i=l):n?U(i,l)||(i.push(l),a.push(c)):U(a,c)||a.push(c)}return a}var vt=S((function(t){return pt(ht(t,!0,!0))}));function mt(t){for(var e=[],n=arguments.length,r=0,a=D(t);r<a;r++){var i=t[r];if(!U(e,i)){var o;for(o=1;o<n&&U(arguments[o],i);o++);o===n&&e.push(i)}}return e}var yt=S((function(t,e){return e=ht(e,!0,!0),I(t,(function(t){return!U(e,t)}))}));function gt(t){for(var e=t&&q(t,D).length||0,n=Array(e),r=0;r<e;r++)n[r]=z(t,r);return n}var bt=S(gt);function wt(t,e){for(var n={},r=0,a=D(t);r<a;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function _t(t){return function(e,n,r){n=k(n,r);for(var a=D(e),i=t>0?0:a-1;i>=0&&i<a;i+=t)if(n(e[i],i,e))return i;return-1}}var xt=_t(1),kt=_t(-1);function St(t,e,n,r){for(var a=(n=k(n,r,1))(e),i=0,o=D(t);i<o;){var s=Math.floor((i+o)/2);n(t[s])<a?i=s+1:o=s}return i}function Ot(t,e,n){return function(r,a,i){var o=0,s=D(r);if("number"==typeof i)t>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return r[i=n(r,a)]===a?i:-1;if(a!=a)return(i=e(l.call(r,o,s),Re))>=0?i+o:-1;for(i=t>0?o:s-1;i>=0&&i<s;i+=t)if(r[i]===a)return i;return-1}}var jt=Ot(1,xt,St),Mt=Ot(-1,kt);function Et(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),a=Array(r),i=0;i<r;i++,t+=n)a[i]=t;return a}function At(t,e){if(null==e||e<1)return[];for(var n=[],r=0,a=t.length;r<a;)n.push(l.call(t,r,r+=e));return n}function Dt(t,e,n,r,a){if(!(r instanceof e))return t.apply(n,a);var i=O(t.prototype),o=t.apply(i,a);return be(o)?o:i}var Ct=S((function(t,e,n){if(!_e(t))throw new TypeError("Bind must be called on a function");var r=S((function(a){return Dt(t,r,e,this,n.concat(a))}));return r})),Tt=S((function(t,e){var n=Tt.placeholder;return function r(){for(var a=0,i=e.length,o=Array(i),s=0;s<i;s++)o[s]=e[s]===n?arguments[a++]:e[s];for(;a<arguments.length;)o.push(arguments[a++]);return Dt(t,r,this,this,o)}}));Tt.placeholder=g;var Pt=S((function(t,e){var n=(e=ht(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=Ct(t[r],t)}}));function Rt(t,e){var n=function n(r){var a=n.cache,i=""+(e?e.apply(this,arguments):r);return M(a,i)||(a[i]=t.apply(this,arguments)),a[i]};return n.cache={},n}var Nt=S((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Lt=Tt(Nt,g,1);function Bt(t,e,n){var r,a,i,o,s=0;n||(n={});var c=function(){s=!1===n.leading?0:qe(),r=null,o=t.apply(a,i),r||(a=i=null)},l=function(){var l=qe();s||!1!==n.leading||(s=l);var u=e-(l-s);return a=this,i=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),s=l,o=t.apply(a,i),r||(a=i=null)):r||!1===n.trailing||(r=setTimeout(c,u)),o};return l.cancel=function(){clearTimeout(r),s=0,r=a=i=null},l}function It(t,e,n){var r,a,i=function(e,n){r=null,n&&(a=t.apply(e,n))},o=S((function(o){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(i,e),s&&(a=t.apply(this,o))}else r=Nt(i,e,this,o);return a}));return o.cancel=function(){clearTimeout(r),r=null},o}function Ft(t,e){return Tt(e,t)}function Vt(t){return function(){return!t.apply(this,arguments)}}function Ht(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function Ut(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Gt(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var zt=Tt(Gt,2),Wt=!{toString:null}.propertyIsEnumerable("toString"),Yt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function qt(t,e){var n=Yt.length,r=t.constructor,a=_e(r)&&r.prototype||o,i="constructor";for(M(t,i)&&!U(e,i)&&e.push(i);n--;)(i=Yt[n])in t&&t[i]!==a[i]&&!U(e,i)&&e.push(i)}function Xt(t){if(!be(t))return[];if(d)return d(t);var e=[];for(var n in t)M(t,n)&&e.push(n);return Wt&&qt(t,e),e}function $t(t){if(!be(t))return[];var e=[];for(var n in t)e.push(n);return Wt&&qt(t,e),e}function Jt(t){for(var e=Xt(t),n=e.length,r=Array(n),a=0;a<n;a++)r[a]=t[e[a]];return r}function Kt(t,e,n){e=k(e,n);for(var r=Xt(t),a=r.length,i={},o=0;o<a;o++){var s=r[o];i[s]=e(t[s],s,t)}return i}function Zt(t){for(var e=Xt(t),n=e.length,r=Array(n),a=0;a<n;a++)r[a]=[e[a],t[e[a]]];return r}function Qt(t){for(var e={},n=Xt(t),r=0,a=n.length;r<a;r++)e[t[n[r]]]=n[r];return e}function te(t){var e=[];for(var n in t)_e(t[n])&&e.push(n);return e.sort()}function ee(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var a=1;a<r;a++)for(var i=arguments[a],o=t(i),s=o.length,c=0;c<s;c++){var l=o[c];e&&void 0!==n[l]||(n[l]=i[l])}return n}}var ne=ee($t),re=ee(Xt);function ae(t,e,n){e=k(e,n);for(var r,a=Xt(t),i=0,o=a.length;i<o;i++)if(e(t[r=a[i]],r,t))return r}function ie(t,e,n){return e in n}var oe=S((function(t,e){var n={},r=e[0];if(null==t)return n;_e(r)?(e.length>1&&(r=w(r,e[1])),e=$t(t)):(r=ie,e=ht(e,!1,!1),t=Object(t));for(var a=0,i=e.length;a<i;a++){var o=e[a],s=t[o];r(s,o,t)&&(n[o]=s)}return n})),se=S((function(t,e){var n,r=e[0];return _e(r)?(r=Vt(r),e.length>1&&(n=e[1])):(e=P(ht(e,!1,!1),String),r=function(t,n){return!U(e,n)}),oe(t,r,n)})),ce=ee($t,!0);function le(t,e){var n=O(t);return e&&re(n,e),n}function ue(t){return be(t)?ge(t)?t.slice():ne({},t):t}function he(t,e){return e(t),t}function fe(t,e){var n=Xt(e),r=n.length;if(null==t)return!r;for(var a=Object(t),i=0;i<r;i++){var o=n[i];if(e[o]!==a[o]||!(o in a))return!1}return!0}function de(t,e,n,a){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=r(t);return("function"===i||"object"===i||"object"==r(e))&&function(t,e,n,a){t instanceof g&&(t=t._wrapped);e instanceof g&&(e=e._wrapped);var i=u.call(t);if(i!==u.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=r(t)||"object"!=r(e))return!1;var c=t.constructor,l=e.constructor;if(c!==l&&!(_e(c)&&c instanceof c&&_e(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}a=a||[];var h=(n=n||[]).length;for(;h--;)if(n[h]===t)return a[h]===e;if(n.push(t),a.push(e),o){if((h=t.length)!==e.length)return!1;for(;h--;)if(!de(t[h],e[h],n,a))return!1}else{var f,d=Xt(t);if(h=d.length,Xt(e).length!==h)return!1;for(;h--;)if(f=d[h],!M(e,f)||!de(t[f],e[f],n,a))return!1}return n.pop(),a.pop(),!0}(t,e,n,a)}function pe(t,e){return de(t,e)}function ve(t){return null==t||(C(t)&&(ge(t)||xe(t)||we(t))?0===t.length:0===Xt(t).length)}function me(t){return!(!t||1!==t.nodeType)}function ye(t){return function(e){return u.call(e)==="[object "+t+"]"}}var ge=f||ye("Array");function be(t){var e=r(t);return"function"===e||"object"===e&&!!t}var we=ye("Arguments"),_e=ye("Function"),xe=ye("String"),ke=ye("Number"),Se=ye("Date"),Oe=ye("RegExp"),je=ye("Error"),Me=ye("Symbol"),Ee=ye("Map"),Ae=ye("WeakMap"),De=ye("Set"),Ce=ye("WeakSet");!function(){we(arguments)||(we=function(t){return M(t,"callee")})}();var Te=a.document&&a.document.childNodes;function Pe(t){return!Me(t)&&m(t)&&!v(parseFloat(t))}function Re(t){return ke(t)&&v(t)}function Ne(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)}function Le(t){return null===t}function Be(t){return void 0===t}function Ie(t,e){if(!ge(e))return M(t,e);for(var n=e.length,r=0;r<n;r++){var a=e[r];if(null==t||!h.call(t,a))return!1;t=t[a]}return!!n}function Fe(t){return t}function Ve(t){return function(){return t}}function He(){}function Ue(t){return ge(t)?function(e){return E(e,t)}:j(t)}function Ge(t){return null==t?function(){}:function(e){return ge(e)?E(t,e):t[e]}}function ze(t){return t=re({},t),function(e){return fe(e,t)}}function We(t,e,n){var r=Array(Math.max(0,t));e=w(e,n,1);for(var a=0;a<t;a++)r[a]=e(a);return r}function Ye(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}"object"!=("undefined"==typeof Int8Array?"undefined":r(Int8Array))&&"function"!=typeof Te&&(_e=function(t){return"function"==typeof t||!1});var qe=Date.now||function(){return(new Date).getTime()},Xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$e=Qt(Xe);function Je(t){var e=function(e){return t[e]},n="(?:"+Xt(t).join("|")+")",r=RegExp(n),a=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(a,e):t}}var Ke=Je(Xe),Ze=Je($e);function Qe(t,e,n){ge(e)||(e=[e]);var r=e.length;if(!r)return _e(n)?n.call(t):n;for(var a=0;a<r;a++){var i=null==t?void 0:t[e[a]];void 0===i&&(i=n,a=r),t=_e(i)?i.call(t):i}return t}var tn=0;function en(t){var e=++tn+"";return t?t+e:e}var nn=g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},rn=/(.)^/,an={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},on=/\\|'|\r|\n|\u2028|\u2029/g,sn=function(t){return"\\"+an[t]};function cn(t,e,n){!e&&n&&(e=n),e=ce({},e,g.templateSettings);var r,a=RegExp([(e.escape||rn).source,(e.interpolate||rn).source,(e.evaluate||rn).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(a,(function(e,n,r,a,s){return o+=t.slice(i,s).replace(on,sn),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e})),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return r.call(this,t,g)},c=e.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s}function ln(t){var e=g(t);return e._chain=!0,e}function un(t,e){return t._chain?g(e).chain():e}function hn(t){return T(te(t),(function(e){var n=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),un(this,n.apply(g,t))}})),g}T(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=i[t];g.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],un(this,n)}})),T(["concat","join","slice"],(function(t){var e=i[t];g.prototype[t]=function(){return un(this,e.apply(this._wrapped,arguments))}})),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)}}.call(this,n(60))},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n.r(e),n.d(e,"scaleBand",(function(){return v})),n.d(e,"scalePoint",(function(){return m})),n.d(e,"scaleIdentity",(function(){return Y})),n.d(e,"scaleLinear",(function(){return W})),n.d(e,"scaleLog",(function(){return tt})),n.d(e,"scaleOrdinal",(function(){return p})),n.d(e,"scaleImplicit",(function(){return d})),n.d(e,"scalePow",(function(){return nt})),n.d(e,"scaleSqrt",(function(){return rt})),n.d(e,"scaleQuantile",(function(){return at})),n.d(e,"scaleQuantize",(function(){return it})),n.d(e,"scaleThreshold",(function(){return ot})),n.d(e,"scaleTime",(function(){return jt})),n.d(e,"scaleUtc",(function(){return Lt})),n.d(e,"schemeCategory10",(function(){return It})),n.d(e,"schemeCategory20b",(function(){return Ft})),n.d(e,"schemeCategory20c",(function(){return Vt})),n.d(e,"schemeCategory20",(function(){return Ht})),n.d(e,"interpolateCubehelixDefault",(function(){return ie})),n.d(e,"interpolateRainbow",(function(){return le})),n.d(e,"interpolateWarm",(function(){return oe})),n.d(e,"interpolateCool",(function(){return se})),n.d(e,"interpolateViridis",(function(){return he})),n.d(e,"interpolateMagma",(function(){return fe})),n.d(e,"interpolateInferno",(function(){return de})),n.d(e,"interpolatePlasma",(function(){return pe})),n.d(e,"scaleSequential",(function(){return ve}));var r=n(1);function a(){}function i(t,e){var n=new a;if(t instanceof a)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}a.prototype=i.prototype={constructor:a,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var o=i;function s(){}var c=o.prototype;function l(t,e){var n=new s;if(t instanceof s)t.each((function(t){n.add(t)}));else if(t){var r=-1,a=t.length;if(null==e)for(;++r<a;)n.add(t[r]);else for(;++r<a;)n.add(e(t[r],r,t))}return n}s.prototype=l.prototype={constructor:s,has:c.has,add:function(t){return this["$"+(t+="")]=t,this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};var u=Array.prototype,h=u.map,f=u.slice,d={name:"implicit"};function p(t){var e=o(),n=[],r=d;function a(a){var i=a+"",o=e.get(i);if(!o){if(r!==d)return r;e.set(i,o=n.push(a))}return t[(o-1)%t.length]}return t=null==t?[]:f.call(t),a.domain=function(t){if(!arguments.length)return n.slice();n=[],e=o();for(var r,i,s=-1,c=t.length;++s<c;)e.has(i=(r=t[s])+"")||e.set(i,n.push(r));return a},a.range=function(e){return arguments.length?(t=f.call(e),a):t.slice()},a.unknown=function(t){return arguments.length?(r=t,a):r},a.copy=function(){return p().domain(n).range(t).unknown(r)},a}function v(){var t,e,n=p().unknown(void 0),a=n.domain,i=n.range,o=[0,1],s=!1,c=0,l=0,u=.5;function h(){var n=a().length,h=o[1]<o[0],f=o[h-0],d=o[1-h];t=(d-f)/Math.max(1,n-c+2*l),s&&(t=Math.floor(t)),f+=(d-f-t*(n-c))*u,e=t*(1-c),s&&(f=Math.round(f),e=Math.round(e));var p=Object(r.range)(n).map((function(e){return f+t*e}));return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(a(t),h()):a()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],h()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(c=l=Math.max(0,Math.min(1,t)),h()):c},n.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},n.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),h()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return v().domain(a()).range(o).round(s).paddingInner(c).paddingOuter(l).align(u)},h()}function m(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(v().paddingInner(1))}var y=n(4),g=n(10),b=n(38),w=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,a=e.slice();return function(i){for(n=0;n<r;++n)a[n]=t[n]*(1-i)+e[n]*i;return a}};function _(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function x(t,e){var n,r=e?e.length:0,a=t?Math.min(r,t.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=A(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<a;++n)o[n]=i[n](t);return o}}var k=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var O=function(t,e){var n,r={},a={};for(n in null!==t&&"object"===S(t)||(t={}),null!==e&&"object"===S(e)||(e={}),e)n in t?r[n]=A(t[n],e[n]):a[n]=e[n];return function(t){for(n in r)a[n]=r[n](t);return a}},j=n(45),M=n(19);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var A=function(t,e){var n,r=E(e);return null==e||"boolean"===r?Object(M.a)(e):("number"===r?y.a:"string"===r?(n=Object(g.e)(e))?(e=n,b.a):j.a:e instanceof g.e?b.a:e instanceof Date?k:_(e)?w:Array.isArray(e)?x:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?O:y.a)(t,e)},D=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},C=function(t){return function(){return t}},T=function(t){return+t},P=[0,1];function R(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:C(e)}function N(t,e,n,r){var a=t[0],i=t[1],o=e[0],s=e[1];return i<a?(a=n(i,a),o=r(s,o)):(a=n(a,i),o=r(o,s)),function(t){return o(a(t))}}function L(t,e,n,a){var i=Math.min(t.length,e.length)-1,o=new Array(i),s=new Array(i),c=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<i;)o[c]=n(t[c],t[c+1]),s[c]=a(e[c],e[c+1]);return function(e){var n=Object(r.bisect)(t,e,1,i)-1;return s[n](o[n](e))}}function B(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function I(t,e){var n,r,a,i=P,o=P,s=A,c=!1;function l(){return n=Math.min(i.length,o.length)>2?L:N,r=a=null,u}function u(e){return(r||(r=n(i,o,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return u.invert=function(t){return(a||(a=n(o,i,R,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},u.domain=function(t){return arguments.length?(i=h.call(t,T),l()):i.slice()},u.range=function(t){return arguments.length?(o=f.call(t),l()):o.slice()},u.rangeRound=function(t){return o=f.call(t),s=D,l()},u.clamp=function(t){return arguments.length?(c=!!t,l()):c},u.interpolate=function(t){return arguments.length?(s=t,l()):s},l()}var F=n(17),V=n(42),H=n(29),U=n(43),G=n(44);function z(t){var e=t.domain;return t.ticks=function(t){var n=e();return Object(r.ticks)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return function(t,e,n){var a,i=t[0],o=t[t.length-1],s=Object(r.tickStep)(i,o,null==e?10:e);switch((n=Object(F.b)(null==n?",f":n)).type){case"s":var c=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(a=Object(V.a)(s,c))||(n.precision=a),Object(H.c)(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=Object(U.a)(s,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=Object(G.a)(s))||(n.precision=a-2*("%"===n.type))}return Object(H.b)(n)}(e(),t,n)},t.nice=function(n){null==n&&(n=10);var a,i=e(),o=0,s=i.length-1,c=i[o],l=i[s];return l<c&&(a=c,c=l,l=a,a=o,o=s,s=a),(a=Object(r.tickIncrement)(c,l,n))>0?(c=Math.floor(c/a)*a,l=Math.ceil(l/a)*a,a=Object(r.tickIncrement)(c,l,n)):a<0&&(c=Math.ceil(c*a)/a,l=Math.floor(l*a)/a,a=Object(r.tickIncrement)(c,l,n)),a>0?(i[o]=Math.floor(c/a)*a,i[s]=Math.ceil(l/a)*a,e(i)):a<0&&(i[o]=Math.ceil(c*a)/a,i[s]=Math.floor(l*a)/a,e(i)),t},t}function W(){var t=I(R,y.a);return t.copy=function(){return B(t,W())},z(t)}function Y(){var t=[0,1];function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=h.call(n,T),e):t.slice()},e.copy=function(){return Y().domain(t)},z(e)}var q=function(t,e){var n,r=0,a=(t=t.slice()).length-1,i=t[r],o=t[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),t[r]=e.floor(i),t[a]=e.ceil(o),t};function X(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:C(e)}function $(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function J(t){return isFinite(t)?+("1e"+t):t<0?0:t}function K(t){return 10===t?J:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Z(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Q(t){return function(e){return-t(-e)}}function tt(){var t=I(X,$).domain([1,10]),e=t.domain,n=10,a=Z(10),i=K(10);function o(){return a=Z(n),i=K(n),e()[0]<0&&(a=Q(a),i=Q(i)),t}return t.base=function(t){return arguments.length?(n=+t,o()):n},t.domain=function(t){return arguments.length?(e(t),o()):e()},t.ticks=function(t){var o,s=e(),c=s[0],l=s[s.length-1];(o=l<c)&&(d=c,c=l,l=d);var u,h,f,d=a(c),p=a(l),v=null==t?10:+t,m=[];if(!(n%1)&&p-d<v){if(d=Math.round(d)-1,p=Math.round(p)+1,c>0){for(;d<p;++d)for(h=1,u=i(d);h<n;++h)if(!((f=u*h)<c)){if(f>l)break;m.push(f)}}else for(;d<p;++d)for(h=n-1,u=i(d);h>=1;--h)if(!((f=u*h)<c)){if(f>l)break;m.push(f)}}else m=Object(r.ticks)(d,p,Math.min(p-d,v)).map(i);return o?m.reverse():m},t.tickFormat=function(e,r){if(null==r&&(r=10===n?".0e":","),"function"!=typeof r&&(r=Object(H.b)(r)),e===1/0)return r;null==e&&(e=10);var o=Math.max(1,n*e/t.ticks().length);return function(t){var e=t/i(Math.round(a(t)));return e*n<n-.5&&(e*=n),e<=o?r(t):""}},t.nice=function(){return e(q(e(),{floor:function(t){return i(Math.floor(a(t)))},ceil:function(t){return i(Math.ceil(a(t)))}}))},t.copy=function(){return B(t,tt().base(n))},t}function et(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function nt(){var t=1,e=I((function(e,n){return(n=et(n,t)-(e=et(e,t)))?function(r){return(et(r,t)-e)/n}:C(n)}),(function(e,n){return n=et(n,t)-(e=et(e,t)),function(r){return et(e+n*r,1/t)}})),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return B(e,nt().exponent(t))},z(e)}function rt(){return nt().exponent(.5)}function at(){var t=[],e=[],n=[];function a(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Object(r.quantile)(t,a/o);return i}function i(t){if(!isNaN(t=+t))return e[Object(r.bisect)(n,t)]}return i.invertExtent=function(r){var a=e.indexOf(r);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,i=0,o=e.length;i<o;++i)null==(n=e[i])||isNaN(n=+n)||t.push(n);return t.sort(r.ascending),a()},i.range=function(t){return arguments.length?(e=f.call(t),a()):e.slice()},i.quantiles=function(){return n.slice()},i.copy=function(){return at().domain(t).range(e)},i}function it(){var t=0,e=1,n=1,a=[.5],i=[0,1];function o(t){if(t<=t)return i[Object(r.bisect)(a,t,0,n)]}function s(){var r=-1;for(a=new Array(n);++r<n;)a[r]=((r+1)*e-(r-n)*t)/(n+1);return o}return o.domain=function(n){return arguments.length?(t=+n[0],e=+n[1],s()):[t,e]},o.range=function(t){return arguments.length?(n=(i=f.call(t)).length-1,s()):i.slice()},o.invertExtent=function(r){var o=i.indexOf(r);return o<0?[NaN,NaN]:o<1?[t,a[0]]:o>=n?[a[n-1],e]:[a[o-1],a[o]]},o.copy=function(){return it().domain([t,e]).range(i)},z(o)}function ot(){var t=[.5],e=[0,1],n=1;function a(a){if(a<=a)return e[Object(r.bisect)(t,a,0,n)]}return a.domain=function(r){return arguments.length?(t=f.call(r),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(r){return arguments.length?(e=f.call(r),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},a.copy=function(){return ot().domain(t).range(e)},a}var st=n(24),ct=n(2),lt=Object(ct.a)((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),ut=lt,ht=(lt.range,n(14)),ft=n(46),dt=n(3),pt=Object(ct.a)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*dt.d-t.getMinutes()*dt.c)}),(function(t,e){t.setTime(+t+e*dt.b)}),(function(t,e){return(e-t)/dt.b}),(function(t){return t.getHours()})),vt=pt,mt=(pt.range,Object(ct.a)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*dt.d)}),(function(t,e){t.setTime(+t+e*dt.c)}),(function(t,e){return(e-t)/dt.c}),(function(t){return t.getMinutes()}))),yt=mt,gt=(mt.range,Object(ct.a)((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*dt.d)}),(function(t,e){return(e-t)/dt.d}),(function(t){return t.getUTCSeconds()}))),bt=gt,wt=(gt.range,Object(ct.a)((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));wt.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Object(ct.a)((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):wt:null};var _t=wt,xt=(wt.range,n(5));function kt(t){return new Date(t)}function St(t){return t instanceof Date?+t:+new Date(+t)}function Ot(t,e,n,a,i,o,s,c,l){var u=I(R,y.a),f=u.invert,d=u.domain,p=l(".%L"),v=l(":%S"),m=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),w=l("%b %d"),_=l("%B"),x=l("%Y"),k=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[a,1,864e5],[a,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function S(r){return(s(r)<r?p:o(r)<r?v:i(r)<r?m:a(r)<r?g:e(r)<r?n(r)<r?b:w:t(r)<r?_:x)(r)}function O(e,n,a,i){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(a-n)/e,s=Object(r.bisector)((function(t){return t[2]})).right(k,o);s===k.length?(i=Object(r.tickStep)(n/31536e6,a/31536e6,e),e=t):s?(i=(s=k[o/k[s-1][2]<k[s][2]/o?s-1:s])[1],e=s[0]):(i=Object(r.tickStep)(n,a,e),e=c)}return null==i?e:e.every(i)}return u.invert=function(t){return new Date(f(t))},u.domain=function(t){return arguments.length?d(h.call(t,St)):d().map(kt)},u.ticks=function(t,e){var n,r=d(),a=r[0],i=r[r.length-1],o=i<a;return o&&(n=a,a=i,i=n),n=(n=O(t,a,i,e))?n.range(a,i+1):[],o?n.reverse():n},u.tickFormat=function(t,e){return null==e?S:l(e)},u.nice=function(t,e){var n=d();return(t=O(t,n[0],n[n.length-1],e))?d(q(n,t)):u},u.copy=function(){return B(u,Ot(t,e,n,a,i,o,s,c,l))},u}var jt=function(){return Ot(st.a,ut,ht.b,ft.a,vt,yt,bt,_t,xt.b).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},Mt=n(25),Et=Object(ct.a)((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),At=Et,Dt=(Et.range,n(15)),Ct=n(47),Tt=Object(ct.a)((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*dt.b)}),(function(t,e){return(e-t)/dt.b}),(function(t){return t.getUTCHours()})),Pt=Tt,Rt=(Tt.range,Object(ct.a)((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*dt.c)}),(function(t,e){return(e-t)/dt.c}),(function(t){return t.getUTCMinutes()}))),Nt=Rt,Lt=(Rt.range,function(){return Ot(Mt.a,At,Dt.b,Ct.a,Pt,Nt,bt,_t,xt.d).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}),Bt=function(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))},It=Bt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ft=Bt("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Vt=Bt("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Ht=Bt("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Ut=n(8),Gt=Math.PI/180,zt=180/Math.PI,Wt=-.14861,Yt=1.78277,qt=-.29227,Xt=-.90649,$t=1.97294,Jt=$t*Xt,Kt=$t*Yt,Zt=Yt*qt-Xt*Wt;function Qt(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);t instanceof g.b||(t=Object(g.g)(t));var e=t.r/255,n=t.g/255,r=t.b/255,a=(Zt*r+Jt*e-Kt*n)/(Zt+Jt-Kt),i=r-a,o=($t*(n-a)-qt*i)/Xt,s=Math.sqrt(o*o+i*i)/($t*a*(1-a)),c=s?Math.atan2(o,i)*zt-120:NaN;return new ee(c<0?c+360:c,s,a,t.opacity)}function te(t,e,n,r){return 1===arguments.length?Qt(t):new ee(t,e,n,null==r?1:r)}function ee(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Object(Ut.a)(ee,te,Object(Ut.b)(g.a,{brighter:function(t){return t=null==t?g.c:Math.pow(g.c,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?g.d:Math.pow(g.d,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Gt,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),a=Math.sin(t);return new g.b(255*(e+n*(Wt*r+Yt*a)),255*(e+n*(qt*r+Xt*a)),255*(e+n*($t*r)),this.opacity)}}));var ne=n(9);function re(t){return function e(n){function r(e,r){var a=t((e=te(e)).h,(r=te(r)).h),i=Object(ne.a)(e.s,r.s),o=Object(ne.a)(e.l,r.l),s=Object(ne.a)(e.opacity,r.opacity);return function(t){return e.h=a(t),e.s=i(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}re(ne.c);var ae=re(ne.a),ie=ae(te(300,.5,0),te(-240,.5,1)),oe=ae(te(-100,.75,.35),te(80,1.5,.8)),se=ae(te(260,.75,.35),te(80,1.5,.8)),ce=te(),le=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ce.h=360*t-100,ce.s=1.5-1.5*e,ce.l=.8-.9*e,ce+""};function ue(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var he=ue(Bt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),fe=ue(Bt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),de=ue(Bt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),pe=ue(Bt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ve(t){var e=0,n=1,r=!1;function a(a){var i=(a-e)/(n-e);return t(r?Math.max(0,Math.min(1,i)):i)}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],a):[e,n]},a.clamp=function(t){return arguments.length?(r=!!t,a):r},a.interpolator=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return ve(t).domain([e,n]).clamp(r)},z(a)}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i})),n.d(e,"VERSION",(function(){return r.VERSION})),n.d(e,"iteratee",(function(){return r.iteratee})),n.d(e,"restArguments",(function(){return r.restArguments})),n.d(e,"each",(function(){return r.each})),n.d(e,"forEach",(function(){return r.forEach})),n.d(e,"map",(function(){return r.map})),n.d(e,"collect",(function(){return r.collect})),n.d(e,"reduce",(function(){return r.reduce})),n.d(e,"foldl",(function(){return r.foldl})),n.d(e,"inject",(function(){return r.inject})),n.d(e,"reduceRight",(function(){return r.reduceRight})),n.d(e,"foldr",(function(){return r.foldr})),n.d(e,"find",(function(){return r.find})),n.d(e,"detect",(function(){return r.detect})),n.d(e,"filter",(function(){return r.filter})),n.d(e,"select",(function(){return r.select})),n.d(e,"reject",(function(){return r.reject})),n.d(e,"every",(function(){return r.every})),n.d(e,"all",(function(){return r.all})),n.d(e,"some",(function(){return r.some})),n.d(e,"any",(function(){return r.any})),n.d(e,"contains",(function(){return r.contains})),n.d(e,"includes",(function(){return r.includes})),n.d(e,"include",(function(){return r.include})),n.d(e,"invoke",(function(){return r.invoke})),n.d(e,"pluck",(function(){return r.pluck})),n.d(e,"where",(function(){return r.where})),n.d(e,"findWhere",(function(){return r.findWhere})),n.d(e,"max",(function(){return r.max})),n.d(e,"min",(function(){return r.min})),n.d(e,"shuffle",(function(){return r.shuffle})),n.d(e,"sample",(function(){return r.sample})),n.d(e,"sortBy",(function(){return r.sortBy})),n.d(e,"groupBy",(function(){return r.groupBy})),n.d(e,"indexBy",(function(){return r.indexBy})),n.d(e,"countBy",(function(){return r.countBy})),n.d(e,"toArray",(function(){return r.toArray})),n.d(e,"size",(function(){return r.size})),n.d(e,"partition",(function(){return r.partition})),n.d(e,"first",(function(){return r.first})),n.d(e,"head",(function(){return r.head})),n.d(e,"take",(function(){return r.take})),n.d(e,"initial",(function(){return r.initial})),n.d(e,"last",(function(){return r.last})),n.d(e,"rest",(function(){return r.rest})),n.d(e,"tail",(function(){return r.tail})),n.d(e,"drop",(function(){return r.drop})),n.d(e,"compact",(function(){return r.compact})),n.d(e,"flatten",(function(){return r.flatten})),n.d(e,"without",(function(){return r.without})),n.d(e,"uniq",(function(){return r.uniq})),n.d(e,"unique",(function(){return r.unique})),n.d(e,"union",(function(){return r.union})),n.d(e,"intersection",(function(){return r.intersection})),n.d(e,"difference",(function(){return r.difference})),n.d(e,"unzip",(function(){return r.unzip})),n.d(e,"zip",(function(){return r.zip})),n.d(e,"object",(function(){return r.object})),n.d(e,"findIndex",(function(){return r.findIndex})),n.d(e,"findLastIndex",(function(){return r.findLastIndex})),n.d(e,"sortedIndex",(function(){return r.sortedIndex})),n.d(e,"indexOf",(function(){return r.indexOf})),n.d(e,"lastIndexOf",(function(){return r.lastIndexOf})),n.d(e,"range",(function(){return r.range})),n.d(e,"chunk",(function(){return r.chunk})),n.d(e,"bind",(function(){return r.bind})),n.d(e,"partial",(function(){return r.partial})),n.d(e,"bindAll",(function(){return r.bindAll})),n.d(e,"memoize",(function(){return r.memoize})),n.d(e,"delay",(function(){return r.delay})),n.d(e,"defer",(function(){return r.defer})),n.d(e,"throttle",(function(){return r.throttle})),n.d(e,"debounce",(function(){return r.debounce})),n.d(e,"wrap",(function(){return r.wrap})),n.d(e,"negate",(function(){return r.negate})),n.d(e,"compose",(function(){return r.compose})),n.d(e,"after",(function(){return r.after})),n.d(e,"before",(function(){return r.before})),n.d(e,"once",(function(){return r.once})),n.d(e,"keys",(function(){return r.keys})),n.d(e,"allKeys",(function(){return r.allKeys})),n.d(e,"values",(function(){return r.values})),n.d(e,"mapObject",(function(){return r.mapObject})),n.d(e,"pairs",(function(){return r.pairs})),n.d(e,"invert",(function(){return r.invert})),n.d(e,"functions",(function(){return r.functions})),n.d(e,"methods",(function(){return r.methods})),n.d(e,"extend",(function(){return r.extend})),n.d(e,"extendOwn",(function(){return r.extendOwn})),n.d(e,"assign",(function(){return r.assign})),n.d(e,"findKey",(function(){return r.findKey})),n.d(e,"pick",(function(){return r.pick})),n.d(e,"omit",(function(){return r.omit})),n.d(e,"defaults",(function(){return r.defaults})),n.d(e,"create",(function(){return r.create})),n.d(e,"clone",(function(){return r.clone})),n.d(e,"tap",(function(){return r.tap})),n.d(e,"isMatch",(function(){return r.isMatch})),n.d(e,"isEqual",(function(){return r.isEqual})),n.d(e,"isEmpty",(function(){return r.isEmpty})),n.d(e,"isElement",(function(){return r.isElement})),n.d(e,"isArray",(function(){return r.isArray})),n.d(e,"isObject",(function(){return r.isObject})),n.d(e,"isArguments",(function(){return r.isArguments})),n.d(e,"isFunction",(function(){return r.isFunction})),n.d(e,"isString",(function(){return r.isString})),n.d(e,"isNumber",(function(){return r.isNumber})),n.d(e,"isDate",(function(){return r.isDate})),n.d(e,"isRegExp",(function(){return r.isRegExp})),n.d(e,"isError",(function(){return r.isError})),n.d(e,"isSymbol",(function(){return r.isSymbol})),n.d(e,"isMap",(function(){return r.isMap})),n.d(e,"isWeakMap",(function(){return r.isWeakMap})),n.d(e,"isSet",(function(){return r.isSet})),n.d(e,"isWeakSet",(function(){return r.isWeakSet})),n.d(e,"isFinite",(function(){return r.isFinite})),n.d(e,"isNaN",(function(){return r.isNaN})),n.d(e,"isBoolean",(function(){return r.isBoolean})),n.d(e,"isNull",(function(){return r.isNull})),n.d(e,"isUndefined",(function(){return r.isUndefined})),n.d(e,"has",(function(){return r.has})),n.d(e,"identity",(function(){return r.identity})),n.d(e,"constant",(function(){return r.constant})),n.d(e,"noop",(function(){return r.noop})),n.d(e,"property",(function(){return r.property})),n.d(e,"propertyOf",(function(){return r.propertyOf})),n.d(e,"matcher",(function(){return r.matcher})),n.d(e,"matches",(function(){return r.matches})),n.d(e,"times",(function(){return r.times})),n.d(e,"random",(function(){return r.random})),n.d(e,"now",(function(){return r.now})),n.d(e,"escape",(function(){return r.escape})),n.d(e,"unescape",(function(){return r.unescape})),n.d(e,"result",(function(){return r.result})),n.d(e,"uniqueId",(function(){return r.uniqueId})),n.d(e,"templateSettings",(function(){return r.templateSettings})),n.d(e,"template",(function(){return r.template})),n.d(e,"chain",(function(){return r.chain})),n.d(e,"mixin",(function(){return r.mixin}));var r=n(18),a=Object(r.mixin)(r);a._=a;var i=a},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},l=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=a.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&a.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;for(e in t);return void 0===e||a.call(t,e)},u=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},h=function(t,e){if("__proto__"===e){if(!a.call(t,e))return;if(s)return s(t,e).value}return t[e]};t.exports=function t(){var e,n,a,i,o,s,f=arguments[0],d=1,p=arguments.length,v=!1;for("boolean"==typeof f&&(v=f,f=arguments[1]||{},d=2),(null==f||"object"!==r(f)&&"function"!=typeof f)&&(f={});d<p;++d)if(null!=(e=arguments[d]))for(n in e)a=h(f,n),f!==(i=h(e,n))&&(v&&i&&(l(i)||(o=c(i)))?(o?(o=!1,s=a&&c(a)?a:[]):s=a&&l(a)?a:{},u(f,{name:n,newValue:t(v,s,i)})):void 0!==i&&u(f,{name:n,newValue:i}));return f}},,function(t,e,n){"use strict";var r=n(2),a=Object(r.a)((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));a.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(r.a)((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null},e.a=a;a.range},function(t,e,n){"use strict";var r=n(2),a=Object(r.a)((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));a.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(r.a)((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null},e.a=a;a.range},function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return v}));var r=n(0);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=n(27),h=n(22)(n(16),n(11)),f=n(63),d="polls-plus",p=u.model_picker.default,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(v,t);var e,n,a,u,f=(e=v,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function v(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(t=f.call(this)).selected=p,document.querySelector("body").addEventListener("click",(function(t){var e=document.querySelector(".picker-input-cont"),n=document.querySelector(".model-picker-art");e&&(t.target===e||e.contains(t.target)||(t.target===n||n.contains(t.target)?(e.classList.remove("hide"),n.classList.add("hide"),r.a.select(".picker-tooltip").classed("show",!1)):(e.classList.add("hide"),n.classList.remove("hide"))))})),t}return n=v,(a=[{key:"init",value:function(){if("president"===interactivePage.chamber)return this.selected=d,this;if(this.selected===d&&(this.selected=p),this.el=r.a.select("#model-picker"),"house"===interactivePage.chamber&&h.house.unopposed.indexOf(interactivePage.stateSlug)>-1)return this.el.classed("hidden",!0),this;this.el.classed("hidden",!1);var t=this;this.el.select("#"+this.selected).attr("checked","checked"),this.el.selectAll("input").on("change",(function(){t.emit("change",this.value),t.selected=this.value})),r.a.select(".model-picker-art").on("mouseover",(function(){r.a.select(".picker-input-cont").classed("hide")&&r.a.select(".picker-tooltip").classed("show",!0)})).on("mouseout",(function(){r.a.select(".picker-tooltip").classed("show",!1)})),r.a.select(".picker-input-cont").select("p.close-button").on("click",(function(){r.a.select(".picker-input-cont").classed("hide",!0),r.a.select(".model-picker-art").classed("hide",!1)}))}}])&&i(n.prototype,a),u&&i(n,u),v}(f)},function(t){t.exports=JSON.parse('{"hed":"FiveThirtyEight’s 2020 General Election Forecast","dek":"","author1":"Nate Silver","author2":"Ryan Best, Jay Boice, Aaron Bycoffe, Christopher Groskopf, Dhrumil Mehta, Jasmine Mithani, Mary Radcliffe, Emily Scherer, Derek Shan, Anna Wiederkehr, Julia Wolfe","see_also":{"readin":"","links":[""]},"election_day":"2020-11-03","freeze_banner":"Our 2020 {{ chamber }} forecast is final and no longer updating.","nav":{"national":"National overview","nationalmob":"Overview","watch":"States to watch","all_states":"All states","tooltip":{"president":"Click here to see the presidential forecast","senate":"Click here to see the Senate forecast","house":"Click here to see the House forecast"},"states_to_watch":["AZ","CO","FL","IA","ME","MI","NV","WI","PA","OH","NH","VA","NC","GA","MN","NM","TX"]},"backtext":"Want to go back to the national forecast? Click me!","backtext_upd":"Looking for the national forecast? Click me!","lede":{"sentence":"to win the election"},"topline":{"hed":"{candidate} is <em>{leaderLabel}</em> to win{state}","hed_upd":"{candidate} {is} <em>{leaderLabel}</em> to win{state}","hed_tossup":"<em>{leaderLabel}</em> {in_for} {state}","hed_unopposed":"{candidate} is running unopposed in {race}","dek":"We simulate the election 40,000 times to see who wins most often. The sample of 100 outcomes below gives you a good idea of the range of scenarios our model thinks is possible.","dek_senate":"The {{ modelVersion }} version of our model simulates the election 40,000 times to see who wins most often. The sample of 100 outcomes below gives you a good idea of the range of scenarios the model thinks is possible.","legend_trumpwin":"Trump win","legend_bidenwin":"Biden win","legend_nomajority":"No Electoral College majority, House decides election","legend_statetrump":"Trump win","legend_statebiden":"Biden win","legend_statetie":"Tie","legend_runoff":"<span>*</span> Seat won in a runoff","trumpChances":"Trump wins","bidenChances":"Biden wins","tie_tick":"tie","axis_label":{"national":["Electoral Vote","Margin"],"national_mobile":["Electoral","Vote","Margin"],"state":["Popular","Vote","Margin"]},"tooltip_header":{"national":"electoral votes","state":"vote share","runoff":"runoff vote share","primary":"vote share"},"runoff_note":"In {{ state }}, multiple candidates from each party will be on the ballot on Election Day. If one candidate gets at least 50 percent of the vote, they win the seat, but if no candidate clears that bar, the top two vote-getters advance to a runoff election. In simulations where a runoff is necessary, popular vote margin is calculated using runoff vote shares.","runoff_note_no_jungle":"If no candidate wins at least 50 percent of the vote, the top two vote-getters will advance to a runoff. In simulations where a runoff is necessary, popular vote margin is calculated using runoff vote shares.","runoff_leader":"{{ party }} {{ candName }} has the best chance in our simulations, winning {{ chance }} times.","toptwo_note":"California and Washington use a <a href=\\"https://ballotpedia.org/Top-two_primary\\">top-two primary system</a>, in which the first- and second-place finishers in the primary face each other in the general election, regardless of party. In {{ state }}’s {{ district }} District, both candidates are {{ party }}s.","mnfootenote":"The date of this election is the subject of a legal dispute following the death of third-party candidate Adam Weeks in September."},"ec_distributions":{"hed":"Every outcome in our simulations","dek":"All possible Electoral College outcomes for each candidate, with higher bars showing outcomes that appeared more often in our 40,000 simulations","annotation270":"270 electoral votes","cand_wins":"wins","annotationUp":"More likely","title":"Electoral college vote distribution for {{ cand }}, who wins in {{ winningPerc }} of simulated outcomes."},"ec_margins":{"hed":"The winding path to victory","dek":"States that are forecasted to vote for one candidate by a big margin are at the ends of the path, while tighter races are in the middle. Bigger segments mean more Electoral College votes. Trace the path from either end to see which state could put one candidate over the top.","dek_tipping":"States ordered by how likely they are to deliver the decisive vote in the Electoral College","tipping_line":"Less than {perc}% chance of being the tipping point","tipping_line_short":"Less than {perc}% chance","tipping_cutoff":"1","two_seventy_line":"270 electoral votes","margin_button":"Vote Margins","tipping_button":"Tipping Points","footnote":"Maine and Nebraska’s congressional districts are shown separately because those states split their Electoral College votes, allotting some to the statewide winner and some to the winner of each district.","title":"Snake chart. Margins in {{ bidenLength }} state races favor Biden, and {{ trumpLength }} favor Trump. {{ highestTippingState }} is the most likely tipping point state. It has a current average vote margin of {{ margin }} favoring {{ marginCand }}.","tooltip":{"metric":"forecasted vote share","footnote":"{{ state }}’s other electoral votes go to the winner of each congressional district."}},"change":{"hed":"How the forecast has changed","dek":"The forecast updates at least once a day and whenever we get a new poll. Click the buttons to see the ways each candidate’s outlook has changed over time.","screenshotHed":"How the {{ state }}{{ chamber }} forecast has changed","screenshotDek":"The forecast updates at least once a day and whenever we get a new poll","btn":{"win":"Chance of winning","ev":"Electoral votes","vote":"Popular vote"},"btn_mobile":{"win":"Win chance","ev":"Elec. coll.","vote":"Pop. vote"},"apple_widget":{"dek":"Candidates’ chances of winning"},"runoff_note":"In {{ state }}, multiple candidates from each party will be on the ballot on Election Day. If one candidate gets at least 50 percent of the vote, they win the seat, but if no candidate clears that bar, the top two vote-getters advance to a runoff election."},"scenarios":{"hed":"Weird and not-so-weird possibilities","dek":"The chances that these situations will crop up","order":[{"id":"3","display":"Trump wins the popular vote","footnote":"Regardless of whether he wins the Electoral College"},{"id":"4","display":"Biden wins the popular vote","footnote":"Regardless of whether he wins the Electoral College"},{"id":"8","display":"Trump wins more than 50% of the popular vote","footnote":"Regardless of whether he wins the Electoral College"},{"id":"9","display":"Biden wins more than 50% of the popular vote","footnote":"Regardless of whether he wins the Electoral College"},{"id":"10","display":"Trump wins in a landslide","footnote":"Defined as winning the popular vote by a double-digit margin"},{"id":"11","display":"Biden wins in a landslide","footnote":"Defined as winning the popular vote by a double-digit margin"},{"id":"5","display":"Trump wins the popular vote but loses the Electoral College"},{"id":"6","display":"Biden wins the popular vote but loses the Electoral College"},{"id":"1","display":"No one wins the Electoral College","footnote":"No candidate gets 270 electoral votes and Congress decides the election"},{"id":"13","display":"Trump wins at least one state that Clinton won in 2016"},{"id":"14","display":"Biden wins at least one state that Trump won in 2016"},{"id":"12","display":"The map stays exactly the same as it was in 2016","footnote":"Each candidate wins exactly the same states that his party won in 2016"},{"id":"2","display":"The election hinges on a recount","footnote":"Candidates are within half a percentage point in one or more decisive states"}]},"state_recirc":{"title":"See states","dropdown":[{"display":"with the closest races","metric":"margin"},{"display":"close to the tipping point","metric":"tipping"}],"state_dropdown_display":"Or choose another state"},"latest_polls":{"title_dynamic":"Which polls are influencing the forecast for {STATE}?","p":"Right now, {{ polls }}% of the forecast for {{ state }} is based on polls and {{ nonpolls }}% relies on factors like demographics and past voting patterns. These are the most influential polls, as determined by how recently they were conducted, how many people they surveyed and  <a href=\\"https://projects.fivethirtyeight.com/pollster-ratings/\\">how FiveThirtyEight grades the pollster</a>.","p_house_senate":"These polls have the biggest impact on the forecast for this race. Polls are weighted by recency, sample size and pollster rating.","link":"See all {{ state }} polls","link_updated":"See all {{ state }} polls and polling averages","table":{"pollster":"Pollster","rating":"Rating","dates":"","leader":"Leader","margin":"","trump":"Trump","biden":"Biden"},"national_title":"Who’s ahead in national polls?","national_p":"Our model relies mainly on state polls, which it combines with demographic, economic and other data to forecast what will happen on Election Day. If you want to see a snapshot of what voters are thinking right now — with no fancy modeling — check out the national polls.","national_link":"See our national polling averages"},"polls_to_forecast":{"hed":"How do we get from polls to forecasted vote share?","dek":"To calculate what percentage of the vote each candidate is forecasted to get in {{ state }}, our model starts with the <a href=\\"https://fivethirtyeight.com/features/our-new-polling-averages-show-biden-leads-trump-by-9-points-nationally/\\">weighted polling average</a> and then factors in economic conditions, demographics, uncertainty and how states with similar characteristics are forecasted to vote. The steps below show a simplified version of how that data shapes the forecast.","descriptions":{"1":"Polling average","2":"Adjust for polling bounces from recent events","3":"Adjusted polling average","4":"Allocate undecided voters","5":"Polls-based vote share","6":"Average with demographics-based vote share projection","7":"Today’s vote share (if the election were held today)","8":"Average with economics- and incumbency-based projection","9":"Projected vote share for Nov. 3"},"dem_weight_sent":"For {{ state }}, this average is {{ polls }}% polls, {{ perc }}% demographics","econ_weight_sent":"For {{ state }}, this average is {{ polls }}% today’s vote share, {{ perc }}% economics and incumbency"},"model_picker":{"title":"Pick a model!","tooltip":"Click here to change which version of the model you see!","models":[{"id":"lite","checked":"false","name":"Lite","desc":"What Election Day looks like based on polls alone"},{"id":"classic","checked":"false","name":"Classic","desc":"What Election Day looks like based on polls, fundraising, past voting patterns and more"},{"id":"deluxe","checked":"true","name":"Deluxe","desc":"What Election Day looks like when we add experts’ ratings to the Classic forecast"}],"default":"deluxe"},"seat_distribution":{"hed":"{{ candidate }} are <em>{{ leaderLabel }}</em> to win the {{ state }}","hed_mobile":"{{ candidate }} are <em>{{ leaderLabel }}</em> to win the {{ state }}","hed_tossup":"<em>{{ leaderLabel }}</em> in the {{ state }}","dek":"Each party’s seat count in scenarios where it wins the Senate in our {{ modelVersion }} model’s 40,000 simulations. Higher bars represent more common outcomes. Our presidential forecast determines which party gets control when the Senate is evenly split.","takeaway_party":"In {{ odds }} scenarios, {{ party }} win control","takeaway":"{{ party }} are forecasted to control an average of {{ seats }} seats. In 80 in 100 scenarios, they control between {{ lo }} and {{ hi }} seats.","probsSentence":"{{ candidate }} have an 80% chance of holding between {{ leaderSeatsLo }} and {{ leaderSeatsHi }} seats.","footnote":"When both parties hold 50 seats, control of the Senate is decided by which party holds the vice presidency in our presidential forecast. Counts of Democratic seats include two independent senators who caucus with the Democrats."},"senate_map":{"hed":"Forecasting each Senate seat","dek":"Each party’s chances of winning the Senate seats that are up for election","footnote":"Counts of Democratic seats include two independent senators who caucus with the Democrats. Forecasts do not add to 100 in some races due to rounding.","legend_solid_r":"Solid R","legend_solid_r_bucket":"≥95% R","legend_likely_r":"Likely R","legend_likely_r_bucket":"≥75%","legend_lean_r":"Lean R","legend_lean_r_bucket":"≥60%","legend_tossup":"Toss-up","legend_tossup_bucket":"&lt;60% both","legend_lean_d":"Lean D","legend_lean_d_bucket":"≥60%","legend_likely_d":"Likely D","legend_likely_d_bucket":"≥75%","legend_solid_d":"Solid D","legend_solid_d_bucket":"≥95% D","summary":{"current_title":"Current Senate","forecast_title":"Forecasted Senate","majority_label":"Majority","sent":"{R} Republican seats, {D} Democratic seats up for election"},"tooltip":{"table":{"cand_header":"candidate","winprob_header":"chance of winning"},"voteshare_header":"forecasted vote share"}},"house_seat_distribution":{"dek":"Each party’s seat count in scenarios where it wins the House in our {{ modelVersion }} model’s 40,000 simulations. Higher bars represent more common outcomes.","footnote":" "},"house_map":{"hed":"Forecasting each House seat","dek":"Each party’s chances of winning every House seat","summary":{"current_title":"Current House","forecast_title":"Forecasted House","majority_label":"Majority","sent1":"201 Republican, 1 Libertarian,","sent2":"233 Democratic seats up for election"},"footenote":"The current House seat count assigns vacant seats to the party that held them last. Forecasts do not add to 100 in some races due to rounding."},"house_change":{"hed":"How the House forecast has changed","dek":"See how each party’s forecasted seat total and chances of controlling the House have changed over time. The forecast updates at least once a day and whenever we get a new poll."},"house_senate_change":{"hed":"How the Senate forecast has changed","dek":"See how each party’s forecasted seat total and chances of controlling the Senate have changed over time. The forecast updates at least once a day and whenever we get a new poll.","race_dek":"See how each candidate’s forecasted vote share and chances of winning the seat have changed over time. The forecast updates at least once a day and whenever we get a new poll.","runoff_dek":"See how each party’s forecasted chances of winning the seat have changed over time. The forecast updates at least once a day and whenever we get a new poll.","screenshot_dek":"See how each party’s forecasted chances of winning the {{ chamberOrSeat }} have changed over time. The forecast updates at least once a day and whenever we get a new poll.","senate_footnote":"Each party\'s majority chances include scenarios where the Senate is evenly split and that party holds the vice presidency in our presidential forecast.","chart_heds":{"winprob_us":"Chances of controlling the {CHAMBER}","winprob_state":"Chances of winning the seat","voteshare":"Popular vote margin","seats":"Average seats controlled by party"}},"house_senate_search":{"placeholder":"Find a race","placeholder_active":"Search by state or candidate name"},"race_list":{"hed":{"senate":"Who’s ahead in each state","house":"Who’s ahead in competitive districts","house_template":"Who’s ahead in {{ state }}","house_competitive":"competitive districts"},"dek":{"senate":"Leading candidate’s forecasted chance of winning and margin of victory in each state. Dots closer to the line represent tighter races, and wider bars mean more uncertainty about the outcome.","house":"Leading candidate’s forecasted chance of winning and margin of victory in the top 50 competitive districts. Dots closer to the line represent tighter races, and wider bars mean more uncertainty about the outcome.","house_template":"Leading candidate’s forecasted chance of winning and margin of victory in {{ where }}. Dots closer to the line represent tighter races, and wider bars mean more uncertainty about the outcome.","house_competitive":"the top 50 competitive districts"},"legend":"80% of outcomes fall in this range","sort":{"watch":"Sort by margin","alpha":"Sort by state"},"label":"Margin of victory","incumbent":"Incumbent","special":"Special election","dropdown":{"competitive_races":"50 most competitive races"}},"state_chamber_nav":{"title":"See other races in {{ state }}","text":"{{ cand }} {{ isAre }} <i>{{ prob }}</i> to win","button":"See the forecast","heds":{"president":"{{ state }} general","senate":"{{ state }} senate","senate-special":"{{ state }} senate (special)","house":"{{ state }} house"}},"clippy":{"lede":"Hey there! I’m Fivey Fox, and I’m here to show you around. Each of these maps is an example of how things might shake out on Election Day.","editorial-recirc":"To put all these numbers in context, check out our coverage and subscribe to the <a href=\\"https://fivethirtyeight.com/podcasts/\\">FiveThirtyEight Politics podcast</a>!","topline":"Don’t count the underdog out! Upset wins are surprising but not impossible.","ec-distributions":"More bars to the right of the 270 line means more simulations where that candidate wins. Some of the bars represent really weird outcomes, but you never know!","ec-margins":"We call this the 🐍 snake 🐍 chart! This makes it easy to see why some states are hotly contested and others mostly get ignored.","ec-margins-alt":"🎊 Whoa, baby snakes! 🎊","change":"As the election gets closer — and as we get swamped with new polls 😬 — the forecast will get less uncertain.","state-recirc":"Want more stuff like this? See how the race is shaping up in individual states, or watch <a href=\\"https://www.youtube.com/c/fivethirtyeight/\\">our Election Updates on YouTube</a>.","byline":"Congrats, you made it to the bottom! If you’re looking for the nitty-gritty of how our forecast works, check out the <a href=\\"https://fivethirtyeight.com/features/how-fivethirtyeights-2020-presidential-forecast-works-and-whats-different-because-of-covid-19\\">methodology</a>.","apple_news":{"topline":"Don’t count the underdog out! Upset wins are surprising but not impossible.","editorial-recirc":"To put all these numbers in context, check out our coverage and subscribe to <a href=\\"https://fivethirtyeight.com/podcasts/\\">the FiveThirtyEight Politics Podcast</a>!"},"senate-topline":"Want to see other versions of the forecast? Click the magnifying glass in the lower left!","senate-map":"In the Louisiana race and Georgia’s special election, multiple candidates from each party are facing off on Election Day. If no one gets a majority, two candidates go to a runoff.","senate-change":"As the election gets closer — and as we get swamped with new polls 😬 — the forecast will get less uncertain.","race-list":"Fun fact: Incumbents who were appointed to their seat lose more often than elected incumbents, so they don’t get an incumbency boost in our model.","senate-byline":"Congrats, you made it to the bottom! If you’re looking for the nitty-gritty of how our forecast works, check out the <a href=\\"https://fivethirtyeight.com/methodology/how-fivethirtyeights-house-and-senate-models-work/\\">methodology</a>.","house-topline":"This is our overview of the race to control the House, but if you want to see a specific race, check out the search bar in the top left.","house-recirc":"There are three versions of our congressional forecasts, and this year we’re defaulting to the Deluxe 🎉 version. Click on the magnifying glass to see the others.","house-map":"Will it be a close race or a landslide? Hover to see the percentage of the vote we\'re forecasting each candidate to win.","house-change":"Our model produces <em>probabilistic</em> forecasts, so it estimates how likely each party is to win, not just <em>whether</em> it’ll win.","house-race-list":"Click any district to see a more detailed forecast, including what polls are influencing our model.","house-byline":"How does this 🦊 know so much?! Find out how all this works in our <a href=\\"https://fivethirtyeight.com/methodology/how-fivethirtyeights-house-and-senate-models-work/\\">methodology</a>."},"probability-descriptions":[{"type":"98","value":"very likely"},{"type":"90","value":"clearly favored"},{"type":"70","value":"favored"},{"type":"55","value":"slightly favored"},{"type":"50","value":"It\'s a toss-up"}],"statewide_footnote":"{STATE} awards two electoral votes to the statewide winner and one to the winner of each congressional district. We’ve forecasted each contest:","promo":{"hed":"The presidential forecast","caption":"","btn":"See our forecast","btnabc":"See more on FiveThirtyEight »","updated":"Last updated","branding_hed":"FiveThirtyEight","hed_1":"","hed_abc_span":"From FiveThirtyEight","hed_2":""},"apple_states":{"hed":"Who’s ahead in the popular vote?","dek":"How the forecast for the popular vote breakdown has changed over time","legend":"80% of outcomes fall in this range","select":{"to-watch":"States to watch","all-states":"All states"}},"broadcast":{"change_chances":"Candidates\' Chances Of Winning The Presidential Election","change_chances_senate":"Each Party\'s Chances Of Winning Control Of The Senate","change_electoral":"How The Electoral College Forecast Has Changed","change_popular":"How The Popular Vote Forecast Has Changed","topline_state":"Who is favored to win","topline_dek":"100 possible outcomes from our forecast","change_abc":"Candidates\' chances of winning, June-Nov.","house_hed":"Who is favored to control","house_dek":"Each party\'s chances of controlling"},"byline":{"title":"We made this","bugs":"Notice a 🐛?","email":"Send us an email.","download_text":"Download the data:","download_links":[{"text":"Polls","github_url":"https://github.com/fivethirtyeight/data/tree/master/polls"},{"text":"Model outputs","github_url":"https://github.com/fivethirtyeight/data/tree/master/election-forecasts-2020"}],"credit_categories":[{"category":"Forecast model","credits":[{"name":"Nate Silver","link":"https://fivethirtyeight.com/contributors/nate-silver/"}]},{"category":"Project Management","credits":[{"name":"Christopher Groskopf","link":"https://fivethirtyeight.com/contributors/Christopher-groskopf/"}]},{"category":"Design","credits":[{"name":"Ryan Best","link":"https://fivethirtyeight.com/contributors/ryan-best/"},{"name":"Jasmine Mithani","link":"https://fivethirtyeight.com/contributors/jasmine-mithani/"},{"name":"Anna Wiederkehr","link":"https://fivethirtyeight.com/contributors/anna-wiederkehr/"}]},{"category":"Content Editing","credits":[{"name":"Micah Cohen","link":"https://fivethirtyeight.com/contributors/micah-cohen/"},{"name":"Sarah Frostenson","link":"https://fivethirtyeight.com/contributors/sarah-frostenson/"},{"name":"Christopher Groskopf","link":"https://fivethirtyeight.com/contributors/christopher-groskopf/"},{"name":"Nate Silver","link":"https://fivethirtyeight.com/contributors/nate-silver/"}]},{"category":"Art Direction","credits":[{"name":"Emily Scherer","link":"https://fivethirtyeight.com/contributors/emily-scherer/"}]},{"category":"Illustration","credits":[{"name":"Fabio Buonocore","link":"https://fabuloworld.tumblr.com/"},{"name":"Joey Ellis","link":"http://www.joeyellis.com/"}]},{"category":"Development","credits":[{"name":"Ryan Best","link":"https://fivethirtyeight.com/contributors/ryan-best/"},{"name":"Jay Boice","link":"https://fivethirtyeight.com/contributors/jay-boice/"},{"name":"Aaron Bycoffe","link":"https://fivethirtyeight.com/contributors/aaron-bycoffe/"},{"name":"Christopher Groskopf","link":"https://fivethirtyeight.com/contributors/christopher-groskopf/"},{"name":"Elena Mejía","link":"https://fivethirtyeight.com/contributors/elena-mejia-lutz/"},{"name":"Jasmine Mithani","link":"https://fivethirtyeight.com/contributors/jasmine-mithani/"},{"name":"Anna Wiederkehr","link":"https://fivethirtyeight.com/contributors/anna-wiederkehr/"},{"name":"Julia Wolfe","link":"https://fivethirtyeight.com/contributors/julia-wolfe/"},{"name":"Yutong Yuan","link":"https://fivethirtyeight.com/contributors/yutong-yuan/"}]},{"category":"Copy Editing","credits":[{"name":"Colleen Barry","link":"https://fivethirtyeight.com/contributors/colleen-barry/"},{"name":"Jennifer Mason","link":"https://fivethirtyeight.com/contributors/jennifer-mason/"}]},{"category":"Data &amp; Research","credits":[{"name":"Aaron Bycoffe","link":"https://fivethirtyeight.com/contributors/aaron-bycoffe/"},{"name":"Dhrumil Mehta","link":"https://fivethirtyeight.com/contributors/dhrumil-mehta/"},{"name":"Mary Radcliffe","link":"https://fivethirtyeight.com/contributors/mary-radcliffe/"},{"name":"Derek Shan","link":"https://fivethirtyeight.com/contributors/derek-shan/"}]}]},"notes":{"readin":"","description":"","link":""},"addtl_credits":"","sources":"","meta":{"senate_title":"2020 Senate Election Forecast","senate_description":"Latest forecasts and polls for the 2020 Senate elections by Nate Silver’s FiveThirtyEight","senate_share_image":"https://fivethirtyeight.com/wp-content/uploads/2020/09/FTE-SenatePromo-16x9-1.png","house_title":"2020 House Forecast","house_description":"Latest forecasts and polls for the 2020 House elections by Nate Silver’s FiveThirtyEight","house_share_image":"https://fivethirtyeight.com/wp-content/uploads/2020/10/FTE-HousePromo-16x9-1.png"}}')},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.parentEl=r.a.select(n),this.isMobile=window.innerWidth<767,this.isTablet=window.innerWidth<=1024,this.margin=Object.assign({top:5,right:5,bottom:5,left:5},a.margin),this.width=a.width||document.querySelector(n).offsetWidth-this.margin.left-this.margin.right,this.height=a.height||document.querySelector(n).offsetHeight-this.margin.top-this.margin.bottom,this.title=a.title}var e,n,i;return e=t,(n=[{key:"_drawChartFrame",value:function(){return this.svgEl=this.parentEl.append("svg").attr("class","svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).attr("role","img").attr("aria-labelledby","title-".concat(this.parentEl.attr("id")," desc-").concat(this.parentEl.attr("id"))),this.svgEl.append("title").attr("id","title-".concat(this.parentEl.attr("id"))).html(),this.svgEl.append("desc").attr("id","desc-".concat(this.parentEl.attr("id"))).html(this.title),this.chartEl=this.svgEl.append("g").attr("class","chart").attr("width",this.width).attr("height",this.height).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this}}])&&a(e.prototype,n),i&&a(e,i),t}()},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s}));var r,a,i,o=n(33);function s(t){return r=Object(o.a)(t),a=r.format,i=r.formatPrefix,r}s({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},function(t,e,n){"use strict";n.r(e);var r=n(29);n.d(e,"formatDefaultLocale",(function(){return r.a})),n.d(e,"format",(function(){return r.b})),n.d(e,"formatPrefix",(function(){return r.c}));var a=n(33);n.d(e,"formatLocale",(function(){return a.a}));var i=n(17);n.d(e,"formatSpecifier",(function(){return i.b})),n.d(e,"FormatSpecifier",(function(){return i.a}));var o=n(44);n.d(e,"precisionFixed",(function(){return o.a}));var s=n(42);n.d(e,"precisionPrefix",(function(){return s.a}));var c=n(43);n.d(e,"precisionRound",(function(){return c.a}))},function(t,e,n){"use strict";n.r(e),n.d(e,"timeFormatDefaultLocale",(function(){return r.a})),n.d(e,"timeFormat",(function(){return r.b})),n.d(e,"timeParse",(function(){return r.c})),n.d(e,"utcFormat",(function(){return r.d})),n.d(e,"utcParse",(function(){return r.e})),n.d(e,"timeFormatLocale",(function(){return a.a})),n.d(e,"isoFormat",(function(){return i})),n.d(e,"isoParse",(function(){return o}));var r=n(5),a=n(32);var i=Date.prototype.toISOString?function(t){return t.toISOString()}:Object(r.d)("%Y-%m-%dT%H:%M:%S.%LZ");var o=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Object(r.e)("%Y-%m-%dT%H:%M:%S.%LZ")},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(15),a=n(47),i=n(14),o=n(46),s=n(24),c=n(25);function l(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function u(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function h(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function f(t){var e=t.dateTime,n=t.date,s=t.time,c=t.periods,f=t.days,p=t.shortDays,v=t.months,m=t.shortMonths,y=b(c),g=w(c),St=b(f),Ot=w(f),jt=b(p),Mt=w(p),Et=b(v),At=w(v),Dt=b(m),Ct=w(m),Tt={a:function(t){return p[t.getDay()]},A:function(t){return f[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:null,d:H,e:H,f:Y,H:U,I:G,j:z,L:W,m:q,M:X,p:function(t){return c[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:xt,s:kt,S:$,u:J,U:K,V:Z,w:Q,W:tt,x:null,X:null,y:et,Y:nt,Z:rt,"%":_t},Pt={a:function(t){return p[t.getUTCDay()]},A:function(t){return f[t.getUTCDay()]},b:function(t){return m[t.getUTCMonth()]},B:function(t){return v[t.getUTCMonth()]},c:null,d:at,e:at,f:lt,H:it,I:ot,j:st,L:ct,m:ut,M:ht,p:function(t){return c[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:xt,s:kt,S:ft,u:dt,U:pt,V:vt,w:mt,W:yt,x:null,X:null,y:gt,Y:bt,Z:wt,"%":_t},Rt={a:function(t,e,n){var r=jt.exec(e.slice(n));return r?(t.w=Mt[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=St.exec(e.slice(n));return r?(t.w=Ot[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=Dt.exec(e.slice(n));return r?(t.m=Ct[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=Et.exec(e.slice(n));return r?(t.m=At[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return Bt(t,e,n,r)},d:C,e:C,f:B,H:P,I:P,j:T,L:L,m:D,M:R,p:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.p=g[r[0].toLowerCase()],n+r[0].length):-1},q:A,Q:F,s:V,S:N,u:x,U:k,V:S,w:_,W:O,x:function(t,e,r){return Bt(t,n,e,r)},X:function(t,e,n){return Bt(t,s,e,n)},y:M,Y:j,Z:E,"%":I};function Nt(t,e){return function(n){var r,a,i,o=[],s=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(c,s)),null!=(a=d[r=t.charAt(++s)])?r=t.charAt(++s):a="e"===r?" ":"0",(i=e[r])&&(r=i(n,a)),o.push(r),c=s+1);return o.push(t.slice(c,s)),o.join("")}}function Lt(t,e){return function(n){var s,c,f=h(1900,void 0,1);if(Bt(f,t,n+="",0)!=n.length)return null;if("Q"in f)return new Date(f.Q);if("s"in f)return new Date(1e3*f.s+("L"in f?f.L:0));if(e&&!("Z"in f)&&(f.Z=0),"p"in f&&(f.H=f.H%12+12*f.p),void 0===f.m&&(f.m="q"in f?f.q:0),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(c=(s=u(h(f.y,0,1))).getUTCDay(),s=c>4||0===c?r.a.ceil(s):Object(r.a)(s),s=a.a.offset(s,7*(f.V-1)),f.y=s.getUTCFullYear(),f.m=s.getUTCMonth(),f.d=s.getUTCDate()+(f.w+6)%7):(c=(s=l(h(f.y,0,1))).getDay(),s=c>4||0===c?i.a.ceil(s):Object(i.a)(s),s=o.a.offset(s,7*(f.V-1)),f.y=s.getFullYear(),f.m=s.getMonth(),f.d=s.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:"W"in f?1:0),c="Z"in f?u(h(f.y,0,1)).getUTCDay():l(h(f.y,0,1)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(c+5)%7:f.w+7*f.U-(c+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,u(f)):l(f)}}function Bt(t,e,n,r){for(var a,i,o=0,s=e.length,c=n.length;o<s;){if(r>=c)return-1;if(37===(a=e.charCodeAt(o++))){if(a=e.charAt(o++),!(i=Rt[a in d?e.charAt(o++):a])||(r=i(t,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return Tt.x=Nt(n,Tt),Tt.X=Nt(s,Tt),Tt.c=Nt(e,Tt),Pt.x=Nt(n,Pt),Pt.X=Nt(s,Pt),Pt.c=Nt(e,Pt),{format:function(t){var e=Nt(t+="",Tt);return e.toString=function(){return t},e},parse:function(t){var e=Lt(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=Nt(t+="",Pt);return e.toString=function(){return t},e},utcParse:function(t){var e=Lt(t+="",!0);return e.toString=function(){return t},e}}}var d={"-":"",_:" ",0:"0"},p=/^\s*\d+/,v=/^%/,m=/[\\^$*+?|[\]().{}]/g;function y(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(e)+a:a)}function g(t){return t.replace(m,"\\$&")}function b(t){return new RegExp("^(?:"+t.map(g).join("|")+")","i")}function w(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function _(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function x(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function k(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function S(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function O(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function j(t,e,n){var r=p.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function M(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function E(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function A(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function D(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function C(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function T(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function P(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function R(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function N(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function L(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function B(t,e,n){var r=p.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function I(t,e,n){var r=v.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function F(t,e,n){var r=p.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function V(t,e,n){var r=p.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function H(t,e){return y(t.getDate(),e,2)}function U(t,e){return y(t.getHours(),e,2)}function G(t,e){return y(t.getHours()%12||12,e,2)}function z(t,e){return y(1+o.a.count(Object(s.a)(t),t),e,3)}function W(t,e){return y(t.getMilliseconds(),e,3)}function Y(t,e){return W(t,e)+"000"}function q(t,e){return y(t.getMonth()+1,e,2)}function X(t,e){return y(t.getMinutes(),e,2)}function $(t,e){return y(t.getSeconds(),e,2)}function J(t){var e=t.getDay();return 0===e?7:e}function K(t,e){return y(i.b.count(Object(s.a)(t)-1,t),e,2)}function Z(t,e){var n=t.getDay();return t=n>=4||0===n?Object(i.c)(t):i.c.ceil(t),y(i.c.count(Object(s.a)(t),t)+(4===Object(s.a)(t).getDay()),e,2)}function Q(t){return t.getDay()}function tt(t,e){return y(i.a.count(Object(s.a)(t)-1,t),e,2)}function et(t,e){return y(t.getFullYear()%100,e,2)}function nt(t,e){return y(t.getFullYear()%1e4,e,4)}function rt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+y(e/60|0,"0",2)+y(e%60,"0",2)}function at(t,e){return y(t.getUTCDate(),e,2)}function it(t,e){return y(t.getUTCHours(),e,2)}function ot(t,e){return y(t.getUTCHours()%12||12,e,2)}function st(t,e){return y(1+a.a.count(Object(c.a)(t),t),e,3)}function ct(t,e){return y(t.getUTCMilliseconds(),e,3)}function lt(t,e){return ct(t,e)+"000"}function ut(t,e){return y(t.getUTCMonth()+1,e,2)}function ht(t,e){return y(t.getUTCMinutes(),e,2)}function ft(t,e){return y(t.getUTCSeconds(),e,2)}function dt(t){var e=t.getUTCDay();return 0===e?7:e}function pt(t,e){return y(r.b.count(Object(c.a)(t)-1,t),e,2)}function vt(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(r.c)(t):r.c.ceil(t),y(r.c.count(Object(c.a)(t),t)+(4===Object(c.a)(t).getUTCDay()),e,2)}function mt(t){return t.getUTCDay()}function yt(t,e){return y(r.a.count(Object(c.a)(t)-1,t),e,2)}function gt(t,e){return y(t.getUTCFullYear()%100,e,2)}function bt(t,e){return y(t.getUTCFullYear()%1e4,e,4)}function wt(){return"+0000"}function _t(){return"%"}function xt(t){return+t}function kt(t){return Math.floor(+t/1e3)}},function(t,e,n){"use strict";var r,a=n(6),i=n(17),o=n(13),s=function(t,e){var n=Object(o.a)(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")},c={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return s(100*t,e)},r:s,s:function(t,e){var n=Object(o.a)(t,e);if(!n)return t+"";var a=n[0],i=n[1],s=i-(r=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,c=a.length;return s===c?a:s>c?a+new Array(s-c+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Object(o.a)(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},l=function(t){return t},u=Array.prototype.map,h=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];e.a=function(t){var e,n,o=void 0===t.grouping||void 0===t.thousands?l:(e=u.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var a=t.length,i=[],o=0,s=e[0],c=0;a>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),i.push(t.substring(a-=s,a+s)),!((c+=s+1)>r));)s=e[o=(o+1)%e.length];return i.reverse().join(n)}),s=void 0===t.currency?"":t.currency[0]+"",f=void 0===t.currency?"":t.currency[1]+"",d=void 0===t.decimal?".":t.decimal+"",p=void 0===t.numerals?l:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(u.call(t.numerals,String)),v=void 0===t.percent?"%":t.percent+"",m=void 0===t.minus?"-":t.minus+"",y=void 0===t.nan?"NaN":t.nan+"";function g(t){var e=(t=Object(i.b)(t)).fill,n=t.align,a=t.sign,l=t.symbol,u=t.zero,g=t.width,b=t.comma,w=t.precision,_=t.trim,x=t.type;"n"===x?(b=!0,x="g"):c[x]||(void 0===w&&(w=12),_=!0,x="g"),(u||"0"===e&&"="===n)&&(u=!0,e="0",n="=");var k="$"===l?s:"#"===l&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S="$"===l?f:/[%p]/.test(x)?v:"",O=c[x],j=/[defgprs%]/.test(x);function M(t){var i,s,c,l=k,f=S;if("c"===x)f=O(t)+f,t="";else{var v=(t=+t)<0||1/t<0;if(t=isNaN(t)?y:O(Math.abs(t),w),_&&(t=function(t){t:for(var e,n=t.length,r=1,a=-1;r<n;++r)switch(t[r]){case".":a=e=r;break;case"0":0===a&&(a=r),e=r;break;default:if(!+t[r])break t;a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(e+1):t}(t)),v&&0==+t&&"+"!==a&&(v=!1),l=(v?"("===a?a:m:"-"===a||"("===a?"":a)+l,f=("s"===x?h[8+r/3]:"")+f+(v&&"("===a?")":""),j)for(i=-1,s=t.length;++i<s;)if(48>(c=t.charCodeAt(i))||c>57){f=(46===c?d+t.slice(i+1):t.slice(i))+f,t=t.slice(0,i);break}}b&&!u&&(t=o(t,1/0));var M=l.length+t.length+f.length,E=M<g?new Array(g-M+1).join(e):"";switch(b&&u&&(t=o(E+t,E.length?g-f.length:1/0),E=""),n){case"<":t=l+t+f+E;break;case"=":t=l+E+t+f;break;case"^":t=E.slice(0,M=E.length>>1)+l+t+f+E.slice(M);break;default:t=E+l+t+f}return p(t)}return w=void 0===w?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),M.toString=function(){return t+""},M}return{format:g,formatPrefix:function(t,e){var n=g(((t=Object(i.b)(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Object(a.a)(e)/3))),o=Math.pow(10,-r),s=h[8+r/3];return function(t){return n(o*t)+s}}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(26),a=n(0);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=n(22)(n(16),n(11)),c=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"us",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.b,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(i(this,t),this.constructor===t)throw new Error("Abstract classes can't be instantiated.");this.appData=e,this.accessibility=n,this.state=a,this.model=o,this.screenshot=s,this.broadcast=l,this.isMobile=window.innerWidth<767,this.chamber=c,this.initialized=!1}var e,n,c;return e=t,(n=[{key:"init",value:function(){this.initialized=!0}},{key:"initEnd",value:function(){this.accessibility.update()}},{key:"onModelChange",value:function(t){this.model=t}},{key:"onModelChangeEnd",value:function(){this.accessibility.update()}},{key:"updateVideoTimestamp",value:function(t){var e=t||"",n=a.a.select("h4.label").select("time.timestamp").attr("timestamp"),r=parseInt(n,10);a.a.select("h4.label").select("time.timestamp").html("".concat(e).concat(s.dates.getVideoTimestamp(r)))}}])&&o(e.prototype,n),c&&o(e,c),t}()},function(t,e,n){var r=n(30),a=n(11);t.exports={percentTickFormat:function(t,e,n){return e===n.length-1?t+"%":t+" "},noDecimal:function(t){return"".concat(r.format(".0f")(t))},formatLeaderLabel:function(t){for(var e=n(27)["probability-descriptions"],r=e.length,a=e[e.length-1],i=0;i<r;i++)if(t>=+e[i].type){a=e[i];break}return a},probToFrac:function(t){var e=Math.round(t);return t>99?e=">99":t<1&&(e="<1"),"".concat(e," in 100")},probToFracNoHundred:function(t){var e=Math.round(t);return t>99?e=">99":t<1&&(e="<1"),e},formatPercentage:function(t,e){return void 0===e&&(e=1),t<(0===e?1:.1)?0===e?"<1%":"<0.1%":t>(0===e?99:99.9)?0===e?">99%":">99.9%":a.fixedRound(t,e)+"%"},ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return t+(e[(n-20)%10]||e[n]||e[0])},houseMargin:function(t){return"".concat(t>0?"D":"R","+").concat(a.fixedRound(t,1))},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}},function(t,e,n){(function(t){(function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],r=function(t){return null==t&&(t=new Date),t.getAPTime=function(e){null==e&&(e={});var n=t.getHours(),r=t.getMinutes();if(0===n&&0===r)return"midnight";if(12===n&&0===r)return"noon";var a=n<12?"a.m.":"p.m.",i=function(t){return 0===t?12:t>12?t-12:t}(n);return function(t,e){return function(t){return 0===t}(t)&&null==e.includeMinutes}(r,e)?i+" "+a:i+":"+function(t){return t<10?"0"+t:t.toString()}(r)+" "+a},t.getAPDate=function(r){null==r&&(r={});var a=t.getMonth(),i=t.getDate(),o=t.getFullYear(),s=n[a];return function(t,e){return null!=e.useDayNameForLastWeek&&function(t){var e=(t-new Date)/864e5;return-7<e&&e<0}(t)}(t,r)?function(t){return e[t.getDay()]}(t):function(t,e){return t===(new Date).getFullYear()&&null==e.includeYear}(o,r)?s+" "+i:s+" "+i+", "+o},t};(null!==t?t.exports:void 0)?t.exports=r:this.Dateline=r}).call(this)}).call(this,n(51)(t))},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i=n(21),o=n(11),s=n(35),c={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},l=i.mapObject(c,(function(t){return o.slugify(t)})),u=i.invert(l),h=i.pairs(u).sort((function(t,e){return t[1]>e[1]?1:-1})).map((function(t){return t[1]})),f={};Object.keys(c).forEach((function(t){f[t]=c[t],({ME:[1,2],NE:[1,2,3]}[t]||[]).forEach((function(e){f["".concat(t).concat(e)]="".concat(c[t]," ").concat(s.ordinal(e)," District")}))}));t.exports={abbrs:c,slugs:l,toAbbrs:u,order:h,dropdownContests:f,abbrToSlug:function(t){if(t.match(/\d/)){var e=t.match(/([A-Z]{2})(\d)/),n=l[e[1]];return"".concat(n,"-").concat(e[2])}return l[t]},slugToAbbr:function(t){if(t.match(/-S\d/)){var e=r(t.split("-S"),1)[0];return u[e]}if(t.match(/\d/)){var n=t.match(/(.+)-(\d+)/),a=[n[1],n[2]],i=a[1],o=u[a[0]];return"".concat(o).concat(i)}return u[t]},atLarge:{AK:!0,DE:!0,MT:!0,ND:!0,SD:!0,VT:!0,WY:!0}}},function(t,e,n){"use strict";var r=n(10);function a(t,e,n,r,a){var i=t*t,o=i*t;return((1-3*t+3*i-o)*e+(4-6*i+3*o)*n+(1+3*t+3*i-3*o)*r+o*a)/6}var i=n(9);e.a=function t(e){var n=Object(i.b)(e);function a(t,e){var a=n((t=Object(r.f)(t)).r,(e=Object(r.f)(e)).r),o=n(t.g,e.g),s=n(t.b,e.b),c=Object(i.a)(t.opacity,e.opacity);return function(e){return t.r=a(e),t.g=o(e),t.b=s(e),t.opacity=c(e),t+""}}return a.gamma=t,a}(1);function o(t){return function(e){var n,a,i=e.length,o=new Array(i),s=new Array(i),c=new Array(i);for(n=0;n<i;++n)a=Object(r.f)(e[n]),o[n]=a.r||0,s[n]=a.g||0,c[n]=a.b||0;return o=t(o),s=t(s),c=t(c),a.opacity=1,function(t){return a.r=o(t),a.g=s(t),a.b=c(t),a+""}}}o((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,c=r<e-1?t[r+2]:2*o-i;return a((n-r/e)*e,s,i,o,c)}})),o((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],c=t[(r+2)%e];return a((n-r/e)*e,i,o,s,c)}}))},,,,function(t,e,n){"use strict";var r=n(6);e.a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(r.a)(e)/3)))-Object(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Object(r.a)(e)-Object(r.a)(t))+1}},function(t,e,n){"use strict";var r=n(6);e.a=function(t){return Math.max(0,-Object(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(4),a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,i=new RegExp(a.source,"g");e.a=function(t,e){var n,o,s,c=a.lastIndex=i.lastIndex=0,l=-1,u=[],h=[];for(t+="",e+="";(n=a.exec(t))&&(o=i.exec(e));)(s=o.index)>c&&(s=e.slice(c,s),u[l]?u[l]+=s:u[++l]=s),(n=n[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,h.push({i:l,x:Object(r.a)(n,o)})),c=i.lastIndex;return c<e.length&&(s=e.slice(c),u[l]?u[l]+=s:u[++l]=s),u.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)u[(n=h[r]).i]=n.x(t);return u.join("")})}},function(t,e,n){"use strict";var r=n(2),a=n(3),i=Object(r.a)((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*a.c)/a.a}),(function(t){return t.getDate()-1}));e.a=i;i.range},function(t,e,n){"use strict";var r=n(2),a=n(3),i=Object(r.a)((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/a.a}),(function(t){return t.getUTCDate()-1}));e.a=i;i.range},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(0),a=n(28);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=n(22),p=n(21),v=n(27),m=d(n(16),n(11)),y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(d,t);var e,n,a,i,s=(e=d,function(){var t,n=f(e);if(h()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function d(t,e,n,r){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(a=s.call(this,t,e,r)).applenews=r.applenews,a.applewidget=r.applewidget,a.model=n,a.chartVariable=r.chartVariable,a.screenshot=r.screenshot,a.broadcast=r.broadcast,r.x=r.x||{},r.y=r.y||{},a.transitionTime=200,a.x={domain:r.x.domain||null,tickCount:r.x.tickCount||5,tickValues:r.x.tickValues||null,tickPadding:r.y.tickPadding||5,tickSize:8,tickFormat:a.applewidget?m.dates.timeTickFormatMonthOnly:a.isMobile?m.dates.timeTickFormatMobile:m.dates.timeTickFormat},a.y={domain:r.y.domain||null,tickCount:r.y.tickCount||6,tickValues:r.y.tickValues||null,tickPadding:r.y.tickPadding||7},a.others=[],a.state=r.state||null,a.url=r.url,a.chamber=r.chamber||"president",a.templateRunoffNote=p.template(v.topline.runoff_note,{interpolate:/\{\{(.+?)\}\}/g}),a.topTwoSameParty=m.house.topTwoSameParty(a.data[0].candidates),a}return n=d,i=[{key:"getYVal",value:function(t,e){return"winprob"===e?t[e]:t[e].mean}},{key:"getYValHi",value:function(t,e){return"winprob"===e?0:t[e].hi}},{key:"getYValLo",value:function(t,e){return"winprob"===e?0:t[e].lo}}],(a=[{key:"init",value:function(){var t=this;1!==p.find(this.data,(function(e){return e.type===t.model})).candidates.length?this._defineFormats()._processData()._drawChartFrame()._calculateXDomain()._calculateYDomain()._calculateXScale()._calculateYScale()._calculatePathGenerators()._drawXAxis()._drawYAxis()._drawLines()._drawHoverShapes()._addHover()._annotateConf()._drawAppleNewsHeader()._addAppleWidgetCands()._addTitle()._updateRunoffNote():this._handleUnopposed()}},{key:"_defineFormats",value:function(){return this.chartVariableFormat=m.formatting.formatPercentage,"evs"===this.chartVariable||"seats"===this.chartVariable||this.applewidget?this.chartVariableFormat=m.formatting.noDecimal:"winprob"===this.chartVariable?this.chartVariableFormat=m.formatting.probToFracNoHundred:"house"===this.chamber&&"voteshare"===this.chartVariable&&"us"===this.state&&(this.chartVariableFormat=m.formatting.houseMargin),this.y.tickFormat="evs"===this.chartVariable||"seats"===this.chartVariable?m.formatting.noDecimal:m.formatting.percentTickFormat,this}},{key:"_processData",value:function(){var t=this;if(this._processSpecialElecData(),this.chart_data=p.find(this.data,(function(e){return e.type===t.model})).change_runoff_candidates||p.find(this.data,(function(e){return e.type===t.model})).candidates,this.chart_data=p.sortBy(this.chart_data,(function(e){return-1*d.getYVal(e.dates[0],t.chartVariable)})),"house"===this.chamber&&"voteshare"===this.chartVariable&&"us"===this.state){var e=d.getYVal(this.chart_data[0].dates[0],this.chartVariable);this.latestLeadingParty=e>=0?"Democrats":"Republicans",this.chart_data=p.filter(this.chart_data,(function(e){return e.candidate===t.latestLeadingParty}))}return this}},{key:"_calculateXDomain",value:function(){var t=p.flatten(p.pluck(this.chart_data,"dates")),e=p.map(p.pluck(t,"date"),(function(t){return m.dates.getDateTime(t)})),n=r.a.min(e);return this.x.domain=this.x.domain?this.x.domain:[n,m.dates.getDateTime(v.election_day)],this}},{key:"_calculateYDomain",value:function(){var t=p.flatten(this.data.map((function(t){return t.candidates.map((function(t){return t.dates}))}))),e=p.pluck(t,this.chartVariable);return"winprob"===this.chartVariable?this.y.domain=[-5,105]:this.y.domain=[p.min(e,(function(t){return+t.lo})).lo,p.max(e,(function(t){return+t.hi})).hi],this}},{key:"_calculateXScale",value:function(){return this.x.scale=r.a.scaleTime().domain(this.x.domain).range([0,this.width]),this}},{key:"_calculateYScale",value:function(){return this.y.scale=r.a.scaleLinear().domain(this.y.domain).range([this.height,0]),this}},{key:"_calculatePathGenerators",value:function(){var t=this;return this.lineGenerator=r.a.line().x((function(e){return t.x.scale(m.dates.getDateTime(e.date))})).y((function(e){return t.y.scale(d.getYVal(e,t.chartVariable))})),this.areaGenerator=r.a.area().x((function(e){return t.x.scale(m.dates.getDateTime(e.date))})).y0((function(e){return t.y.scale(d.getYValHi(e,t.chartVariable))})).y1((function(e){return t.y.scale(d.getYValLo(e,t.chartVariable))})),this}},{key:"_drawXAxis",value:function(){return this.x.axis=r.a.axisBottom(this.x.scale).ticks(this.x.tickCount).tickValues(this.x.tickValues).tickSize(this.x.tickSize).tickSizeOuter(0).tickPadding(this.x.tickPadding).tickFormat(this.x.tickFormat),this.chartEl.append("g").attr("transform","translate(0,"+this.height+")").attr("class","axis axis-x").call(this.x.axis),this}},{key:"_drawYAxis",value:function(){return this.applenews&&!this.applewidget||(this.y.axis=r.a.axisLeft(this.y.scale).ticks(this.y.tickCount).tickValues(this.y.tickValues).tickSize(-this.width).tickSizeOuter(0).tickPadding(this.y.tickPadding).tickFormat(this.y.tickFormat),this.y_axis=this.chartEl.append("g").attr("class","axis axis-y").call(this.y.axis)),this}},{key:"_drawLines",value:function(){var t=this;return this.confG=this.chartEl.append("g").attr("class","conf-g data-g"),this.confG.selectAll("path.conf-bg").data(this.chart_data).enter().append("path").attr("class",(function(e){return"conf-bg ".concat(t._lineClass(e))})).attr("d",(function(e){return t.areaGenerator(e.dates)})),this.confG.selectAll("path.conf").data(this.chart_data).enter().append("path").attr("class",(function(e){return"conf ".concat(t._lineClass(e))})).attr("d",(function(e){return t.areaGenerator(e.dates)})),this.lineG=this.chartEl.append("g").attr("class","line-g data-g"),this.lineG.selectAll("path.line-stroke").data(this.chart_data).enter().append("path").attr("class",this.applewidget?"line-stroke white":"line-stroke").attr("d",(function(e){return t.lineGenerator(e.dates)})),this.lineG.selectAll("path.line-bg").data(this.chart_data).enter().append("path").attr("class",(function(e){return"line-bg ".concat(t._lineClass(e))})).attr("d",(function(e){return t.lineGenerator(e.dates)})),this.lineG.selectAll("path.line").data(this.chart_data).enter().append("path").attr("class",(function(e){return"line ".concat(t._lineClass(e))})).attr("d",(function(e){return t.lineGenerator(e.dates)})),this}},{key:"_getConfPos",value:function(){if(this.annoIndexConf=Math.floor(.95*this.chart_data[0].dates.length),this.candIndexConf=1===this.chart_data.length||this.chart_data[0].dates[this.annoIndexConf][this.chartVariable].lo>this.chart_data[1].dates[this.annoIndexConf][this.chartVariable].lo?0:1,this.ptConf=this.chart_data[this.candIndexConf].dates[this.annoIndexConf],this.xPosConf=this.x.scale(m.dates.getDateTime(this.ptConf.date)),this.yPosConf=-60,p.indexOf(["voteshare","evs","seats"],this.chartVariable)>-1){var t=this.y.scale(this.ptConf[this.chartVariable].hi)-4;this.yPosConf=t<0?0:t}}},{key:"_positionConfAnno",value:function(){this._getConfPos(),this.annotationConf.transition().duration(this.transitionTime).attr("transform","translate(".concat(this.xPosConf,",").concat(this.yPosConf,")"))}},{key:"_annotateConf",value:function(){if(this.applenews)return this;this._getConfPos(),this.annotationConf=this.chartEl.append("g").attr("class","annotation annotation-conf").attr("transform","translate(".concat(this.xPosConf,",").concat(this.yPosConf,")"));var t=r.a.line().curve(r.a.curveBundle.beta(.5));this.annotationConf.append("path").attr("class","curve").attr("d",t([[0,0],[0,-30],[30,-15]])),this.annotationConf.append("path").attr("class","arrow").attr("d","M".concat([[-2,-7],[0,0],[7,-4]].map((function(t){return t.join(",")})).join("L")));var e=this.broadcast?30:12;return this.annotationConf.append("text").attr("class","bg").attr("transform","translate(35,-10)rotate(0)").selectAll("tspan").data(["80% of outcomes","fall in this range"]).enter().append("tspan").attr("x",0).attr("y",(function(t,n){return n*e})).text((function(t){return t})),this.annotationConf.append("text").attr("transform","translate(35,-10)rotate(0)").selectAll("tspan").data(["80% of outcomes","fall in this range"]).enter().append("tspan").attr("x",0).attr("y",(function(t,n){return n*e})).text((function(t){return t})),this}},{key:"_drawHoverShapes",value:function(){var t=this;return this.hoverG=this.chartEl.append("g").attr("class","hover-g"),this.hoverG.append("line").attr("class","date-hover hidden").attr("x1",this.width).attr("x2",this.width).attr("y1",this.height+this.y.tickPadding).attr("y2",0),this.hoverG.selectAll("circle.callout").data(this.chart_data).enter().append("circle").attr("class",(function(e){return t.applewidget?"callout white ".concat(t._lineClass(e)):"callout ".concat(m.slugify(e.candidate)," ").concat(e.party?t._lineClass(e):"")})).attr("cx",(function(e){return t.x.scale(m.dates.getDateTime(e.dates[0].date))})).attr("cy",(function(e){return t.y.scale(d.getYVal(e.dates[0],t.chartVariable))})).attr("r",5),this.hoverG.selectAll("text.callout-bg").data(this.chart_data).enter().append("text").attr("class",(function(e){return t.applewidget?"callout-bg bg white ".concat(t._lineClass(e)):"callout-bg bg ".concat(t._lineClass(e))})).attr("x",(function(e){return t.x.scale(m.dates.getDateTime(e.dates[0].date))})).attr("y",(function(e){return t.y.scale(d.getYVal(e.dates[0],t.chartVariable))})).attr("dx",this.broadcast?28:10).attr("dy","0.25em").text((function(e){return t.chartVariableFormat(d.getYVal(e.dates[0],t.chartVariable))})),this.hoverG.selectAll("text.callout.label").data(this.chart_data).enter().append("text").attr("class",(function(e){return"callout label ".concat(t._lineClass(e))})).attr("x",(function(e){return t.x.scale(m.dates.getDateTime(e.dates[0].date))})).attr("y",(function(e){return t.y.scale(d.getYVal(e.dates[0],t.chartVariable))})).attr("dx",this.broadcast?28:10).attr("dy","0.25em").text((function(e){return t.chartVariableFormat(d.getYVal(e.dates[0],t.chartVariable))})),this._addIn100(),this.handleLabelOverlap(this.chart_data),this.hoverG.append("text").attr("class","date-axis-hover hidden").attr("x",this.width).attr("y",this.height+this.x.tickPadding).attr("dy","1.46em"),this}},{key:"_addIn100",value:function(){var t=this;if("winprob"!==this.chartVariable)return this;var e=p.sortBy(this.chart_data,(function(e){return-1*d.getYVal(e.dates[0],t.chartVariable)}));if(e.length>2)e=e.slice(0,1);else{var n=m.slugify(this._lineClass(e[1]));this.hoverG.select("text.callout.".concat(n)).attr("dy","".concat(-1.75,"em")),this.hoverG.select("text.callout-bg.".concat(n)).attr("dy","".concat(-1.75,"em"))}p.each(e,(function(e,n){var r=t.hoverG.select("text.callout.".concat(t._lineClass(e))).attr("x"),a=d.getYVal(e.dates[0],t.chartVariable),i=t.y.scale(a),o=["in","100"];t.hoverG.selectAll("text.in-one-hundred-bg.bg.".concat(t._lineClass(e))).data(o).enter().append("text").attr("x",r).attr("y",i).attr("dx",t.broadcast?28:10).attr("dy",(function(t,e){return"".concat(1===n?.25-(1-e):1.25+e,"em")})).style("transform","translateX(".concat(p.indexOf([">99","<1"],t.chartVariableFormat(a))>-1?"0.5em":"",")")).attr("class",(function(n,r){return"in-one-hundred-bg bg ".concat(t._lineClass(e)," in-one-hundred-").concat(r," ").concat(t.applewidget?"white":"")})).text((function(t){return t})),t.hoverG.selectAll("text.in-one-hundred.".concat(t._lineClass(e))).data(o).enter().append("text").attr("x",r).attr("y",i).attr("dx",t.broadcast?28:10).attr("dy",(function(t,e){return"".concat(1===n?.25-(1-e):1.25+e,"em")})).style("transform","translateX(".concat(p.indexOf([">99","<1"],t.chartVariableFormat(a))>-1?"0.5em":"",")")).attr("class",(function(n,r){return"in-one-hundred ".concat(t._lineClass(e)," in-one-hundred-").concat(r)})).text((function(t){return t}))}))}},{key:"_removeIn100",value:function(){this.hoverG.selectAll("text.callout").attr("dy","0.25em"),this.hoverG.selectAll("text.callout-bg").attr("dy","0.25em"),this.hoverG.selectAll("text.in-one-hundred").remove(),this.hoverG.selectAll("text.in-one-hundred-bg").remove()}},{key:"highlightDate",value:function(t){var e=this,n=p.map(this.chart_data,(function(e){return{candidate:e.candidate,party:e.party,party_order:e.party_order,dates:p.filter(e.dates,(function(e){return m.dates.getDateTime(e.date)<=t}))}}));n[0].dates.length>0&&(p.each(n,(function(t){var n=e._lineClass(t),a=t.dates;a&&(e.hoverG.select("circle.".concat(n)).attr("cx",e.x.scale(m.dates.getDateTime(a[0].date))).attr("cy",e.y.scale(d.getYVal(a[0],e.chartVariable))),e.hoverG.selectAll("text.".concat(n)).attr("x",e.x.scale(m.dates.getDateTime(a[0].date))).attr("y",e.y.scale(d.getYVal(a[0],e.chartVariable))),e.hoverG.selectAll("text.callout.".concat(e._lineClass(t))).text(e.chartVariableFormat(d.getYVal(a[0],e.chartVariable))),e.hoverG.select("line.date-hover").classed("hidden",!1).attr("x1",e.x.scale(m.dates.getDateTime(a[0].date))).attr("x2",e.x.scale(m.dates.getDateTime(a[0].date))),e.hoverG.selectAll("text.date-axis-hover").classed("hidden",!1).attr("x",e.x.scale(m.dates.getDateTime(a[0].date))).text(e.x.tickFormat(r.a.timeParse("%Y-%m-%d")(a[0].date))),e.chartEl.select("g.axis-x").selectAll("g.tick").classed("hidden",!0),e.chartEl.selectAll("path.line.".concat(n)).attr("d",e.lineGenerator(a)),e.chartEl.selectAll("path.conf.".concat(n)).attr("d",e.areaGenerator(a)))})),this.chartEl.select("g.annotation-conf").classed("hidden",!0),this.handleLabelOverlap(n))}},{key:"_addHover",value:function(){var t=this;if(this.applenews||this.broadcast)return this;var e=function(){var e=o(r.a.mouse(t.chartEl.node()),2),n=e[0],a=(e[1],t.x.scale.invert(n));t.highlightDate(a),t.others.forEach((function(t){t.highlightDate(a)}))};return this.svgEl.on("mouseover",e).on("mousemove",e).on("mouseout",(function(){t.handleMouseOut(),t.others.forEach((function(t){t.handleMouseOut()}))})),this}},{key:"handleMouseOut",value:function(){var t=this;p.each(this.chart_data,(function(e){var n=t._lineClass(e),r=e.dates[0];r&&(t.hoverG.select("circle.".concat(n)).attr("cx",t.x.scale(m.dates.getDateTime(r.date))).attr("cy",t.y.scale(d.getYVal(r,t.chartVariable))),t.hoverG.selectAll("text.".concat(n)).attr("x",t.x.scale(m.dates.getDateTime(r.date))).attr("y",t.y.scale(d.getYVal(r,t.chartVariable))),t.hoverG.selectAll("text.callout.".concat(t._lineClass(e))).text(t.chartVariableFormat(d.getYVal(r,t.chartVariable))),t.hoverG.select("line.date-hover").classed("hidden",!0),t.hoverG.select("text.date-axis-hover").classed("hidden",!0),t.chartEl.select("g.axis-x").selectAll("g.tick").classed("hidden",!1),t.chartEl.selectAll("path.line.".concat(n)).attr("d",(function(e){return t.lineGenerator(e.dates)})),t.chartEl.selectAll("path.conf.".concat(n)).attr("d",(function(e){return t.areaGenerator(e.dates)})))})),this.handleLabelOverlap(this.chart_data),this.chartEl.select("g.annotation-conf").classed("hidden",!1)}},{key:"_drawAppleNewsHeader",value:function(){if(!this.applenews||this.applewidget)return this;this.appleNewsG=this.svgEl.append("g").attr("class","apple-news-labels");var t=[];p.each(this.chart_data,(function(e){t.push({candidate:e.candidate,latest:e.dates[0].voteshare.mean})})),t=p.sortBy(t,(function(t){return-1*t.latest}));var e=this.isMobile?15:25;this.appleNewsG.append("circle").attr("class","leader ".concat(t[0].candidate)).attr("cx",e).attr("cy",e).attr("r",e);var n="".concat(m.slugify(t[0].candidate),"-head.png");this.applenews||(n=m.imgSrc(n));var r="Trump"===t[0].candidate?20:-20;this.appleNewsG.append("svg:image").attr("class","cand-head ".concat(m.slugify(t[0].candidate))).attr("xlink:href",n).attr("x",(function(){return"Trump"===t[0].candidate?e/4-2:-e/4+2})).attr("y",0).attr("width",2*e).attr("height",2*e).attr("transform","rotate(".concat(-1*r,", ").concat(e,", ").concat(e+e/2,")"));var a="US"===this.state?"National":m.states.abbrs[this.state];"DC"===this.state&&(a="D.C.");var i=Math.abs(+m.formatting.noDecimal(t[0].latest)-+m.formatting.noDecimal(t[1].latest)),o=0===i?"+<1":"+".concat(i),s=this.appleNewsG.append("a").attr("href",this.url);return s.append("text").attr("class","state bg").attr("x",2*e+5).attr("y",e).text(a).append("tspan").attr("class",m.slugify(t[0].candidate)).text(" +".concat(i)),s.append("text").attr("class","state").attr("x",2*e+5).attr("y",e).text(a).append("tspan").attr("class",m.slugify(t[0].candidate)).text(" ".concat(o)),this}},{key:"_addAppleWidgetCands",value:function(){var t=this;if(!this.applewidget)return this;this.widgetCandG=this.chartEl.append("g").attr("class","aw-cand-names");var e=p.map(this.chart_data,(function(e){return{candidate:e.candidate,yVal:d.getYVal(e.dates[Math.floor(.8*e.dates.length)],t.chartVariable),xVal:m.dates.getDateTime(e.dates[Math.floor(.8*e.dates.length)].date)}})),n=p.sortBy(e,(function(t){return t.yVal}));return this.widgetCandG.selectAll("text.cand-name-bg").data(n).enter().append("text").attr("class",(function(t){return"cand-name cand-name-bg bg ".concat(m.slugify(t.candidate))})).attr("y",(function(e,n){return t.y.scale(e.yVal)+15*(0===n?1:-1)})).attr("x",(function(e){return t.x.scale(e.xVal)})).text((function(t){return t.candidate})),this.widgetCandG.selectAll("text.cand-name-fg").data(n).enter().append("text").attr("class",(function(t){return"cand-name cand-name-fg ".concat(m.slugify(t.candidate))})).attr("y",(function(e,n){return t.y.scale(e.yVal)+15*(0===n?1:-1)})).attr("x",(function(e){return t.x.scale(e.xVal)})).text((function(t){return t.candidate})),["bg","fg"].forEach((function(e){var n=p.map(t.widgetCandG.selectAll("text.cand-name-".concat(e)).nodes(),(function(t){return[t,+t.getAttribute("y")]})).sort((function(t,e){return t[1]<e[1]?-1:1})),r=n[1][1]-n[0][1];r<10&&(r=Math.min(r,2),n[0][0].setAttribute("y",n[0][1]-12*r),n[1][0].setAttribute("y",n[1][1]+12*r))})),this}},{key:"handleLabelOverlap",value:function(t,e){var n=this;if(t.length<2)return this;e||(e=0);for(var r,a,i=p.sortBy(t,(function(t){return-1*d.getYVal(t.dates[0],n.chartVariable)})),o=p.map(i,(function(t,e){return{key:n._lineClass(t),bbox:n.ithBBox(n._lineClass(t))}})),s=0;s<o.length;s++)for(var c=o[s],l=s+1;l<o.length;l++){var u=o[l];if(r=c.bbox,!((a=u.bbox).top>r.bottom||a.bottom<r.top)){var h=c.bbox.y+c.bbox.height-u.bbox.y;this.adjustCands(c.key,-h/2,e),this.adjustCands(u.key,h/2,e)}}}},{key:"adjustCands",value:function(t,e,n){this.chartEl.selectAll("text.".concat(m.slugify(t))).transition().duration(n).attr("y",(function(t,n,a){return+r.a.select(a[n]).attr("y")+e}))}},{key:"ithBBox",value:function(t){var e={bottom:null,height:0,left:null,right:null,top:null,width:0,x:null,y:null};return this.chartEl.selectAll("text.".concat(m.slugify(t),":not(.bg)")).each((function(t,n,r){var a=r[n].getBoundingClientRect();(!e.bottom||a.bottom>e.bottom)&&(e.bottom=a.bottom),e.height+=a.height,(!e.left||a.left<e.left)&&(e.left=a.left),(!e.right||a.right>e.right)&&(e.right=a.right),(!e.top||a.top<e.top)&&(e.top=a.top),e.width+=a.width,(!e.x||a.x<e.x)&&(e.x=a.x),(!e.y||a.y<e.y)&&(e.y=a.y)})),e}},{key:"handleVariableChange",value:function(){var t=this;this._defineFormats()._calculateYDomain()._calculateYScale()._calculatePathGenerators(),"winprob"!==this.chartVariable&&this._removeIn100(),this.y.axis=r.a.axisLeft(this.y.scale).ticks(this.y.tickCount).tickValues(this.y.tickValues).tickSize(-this.width).tickSizeOuter(0).tickPadding(this.y.tickPadding).tickFormat(this.y.tickFormat),this.y_axis.transition().duration(this.transitionTime).call(this.y.axis),this.chartEl.selectAll("path.line").transition().duration(this.transitionTime).attr("d",(function(e){return t.lineGenerator(e.dates)})),this.chartEl.selectAll("path.line-stroke").transition().duration(this.transitionTime).attr("d",(function(e){return t.lineGenerator(e.dates)})),this.chartEl.selectAll("path.line-bg").transition().duration(this.transitionTime).attr("d",(function(e){return t.lineGenerator(e.dates)})),this.chartEl.selectAll("path.conf").transition().duration(this.transitionTime).attr("d",(function(e){return t.areaGenerator(e.dates)})),this.chartEl.selectAll("path.conf-bg").transition().duration(this.transitionTime).attr("d",(function(e){return t.areaGenerator(e.dates)})),this.hoverG.selectAll("text.callout").transition().duration(this.transitionTime).attr("y",(function(e){return t.y.scale(d.getYVal(e.dates[0],t.chartVariable))})).text((function(e){return t.chartVariableFormat(d.getYVal(e.dates[0],t.chartVariable))})),this.hoverG.selectAll("text.callout-bg").transition().duration(this.transitionTime).attr("y",(function(e){return t.y.scale(d.getYVal(e.dates[0],t.chartVariable))})).text((function(e){return t.chartVariableFormat(d.getYVal(e.dates[0],t.chartVariable))})),this.hoverG.selectAll("circle.callout").transition().duration(this.transitionTime).attr("cy",(function(e){return t.y.scale(d.getYVal(e.dates[0],t.chartVariable))})).on("end",(function(){t._addIn100(),t.handleLabelOverlap(t.chart_data,t.transitionTime)})),this._positionConfAnno(),this._addTitle()}},{key:"_addTitle",value:function(){var t=this,e=r.a.select("button.btn-change.active");if(e.empty())return this;var n=e.text(),a="Current forecast for ".concat(n,":");return p.forEach(this.chart_data,(function(e){var n=t.chartVariableFormat(d.getYVal(e.dates[0],t.chartVariable));a+=" ".concat(e.candidate," ").concat(n,".")})),this.svgEl.select("desc").html(a),this}},{key:"_updateRunoffNote",value:function(){if(!m.senate.isBlanket(this.state))return this;var t=this.state.split("-"),e=t.slice(0,t.length-1).join("-"),n=m.states.toAbbrs[e],a=" ".concat(m.states.abbrs[n]),i=this.state.match(/-\S3/)?" special":"";return"house"===this.chamber?a="the".concat(a," ").concat(m.formatting.ordinal(+t[t.length-1])," District election"):"senate"===this.chamber&&(a+="'s ".concat(m.formatting.capitalize(this.chamber)).concat(i).concat(this.isMobile?" ":"&nbsp;","election")),r.a.select("#change").select("#runoff-footnote").classed("hidden",!1).html("<p>".concat(this.templateRunoffNote({state:a}),"</p>")),r.a.select("#change").select("p.dek").html(v.house_senate_change.runoff_dek),this}},{key:"_processSpecialElecData",value:function(){var t=this;return m.senate.isBlanket(this.state)?p.find(this.data,(function(e){return e.type===t.model})).runoff_computed?this:void p.each(this.data,(function(e){if(e.type===t.model){e.runoff_computed||(e.runoff_computed=!0);var n=[],r=function(t){if(0===t.length)return[];for(var e=[],n=0;n<t[0].dates.length;n++){for(var r=t[0].dates[n].date,a=0,i={mean:0,hi:0,lo:0},o=0;o<t.length;o++)a+=t[o].dates[n].winprob,i.mean+=t[o].dates[n].voteshare.mean,i.hi+=t[o].dates[n].voteshare.hi,i.lo+=t[o].dates[n].voteshare.lo;e.push({date:r,winprob:a,voteshare:i})}return e},a=p.filter(e.candidates,(function(t){return"D"===t.party}));a.length>0&&n.push({candidate:"A Democrat",party:"D",dates:r(a)});var i=p.filter(e.candidates,(function(t){return"R"===t.party}));i.length>0&&n.push({candidate:"A Republican",party:"R",dates:r(i)});var o=p.filter(e.candidates,(function(t){return"R"!==t.party&&"D"!==t.party}));o.length>0&&n.push({candidate:"all others",party:null,dates:r(o)}),e.change_runoff_candidates=n}})):this}},{key:"_handleUnopposed",value:function(){r.a.select("#change").classed("hidden",!0)}},{key:"_lineClass",value:function(t){var e=m.slugify(t.party||t.candidate);return this.topTwoSameParty&&(e+=t.party_order),e}}])&&c(n.prototype,a),i&&c(n,i),d}(a.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.update()}var e,n,i;return e=t,(n=[{key:"update",value:function(){["svg:not([aria-labelledby])","text:not(#hed)",".legend-wrap, .legend-container",".header-logo, a.logo","#model-picker, #model-picker input","#latest-polls thead, #latest-polls .rating, #latest-polls .dates, #latest-polls .candidate","div.map-div svg","div.map-div div.map-text",".related h2",".ad"].forEach((function(t){r.a.selectAll("".concat(t,":not([aria-hidden=true])")).attr("aria-hidden","true").attr("tabindex",-1)}))}}])&&a(e.prototype,n),i&&a(e,i),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.promises={}}var e,n,i;return e=t,(n=[{key:"fetch",value:function(t){var e=this;return this.data[t]?new Promise((function(n,r){setTimeout((function(){n(e.data[t])}),20)})):(void 0===this.promises[t]&&(this.promises[t]=r.a.json(t).then((function(n){return e.data[t]=n,e.data[t]}))),this.promises[t])}}])&&a(e.prototype,n),i&&a(e,i),t}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},,,,function(t,e,n){var r=n(20),a=n(1),i=["#fff0ea","#ffe3db","#ffd6cb","#ffc8bc","#ffbaac","#ffac9d","#ff9d8d","#ff8d7e","#ff7d6e","#fd6c5e","#fa5a50"],o=["#eef4fa","#dfe5f2","#d0d6ea","#c1c8e3","#b3b9db","#a4abd3","#959dcb","#8690c3","#7782bc","#6775b4","#5768ac"],s=["#f6f1fb","#eee3f6","#e4d4f2","#dbc6ed","#d3b8e8","#c9aae4","#c09cdf","#b68fda","#ad81d6","#a373d1","#e48ae8"];t.exports={smoothScale:{dem:r.scaleThreshold().domain(a.range(0,100,5)).range(o),rep:r.scaleThreshold().domain(a.range(0,100,5)).range(i),ind:r.scaleThreshold().domain(a.range(0,100,5)).range(s)},winProbScale:{dem:r.scaleThreshold().domain(a.range(50,100,5)).range(o),rep:r.scaleThreshold().domain(a.range(50,100,5)).range(i),ind:r.scaleThreshold().domain(a.range(50,100,5)).range(s)},tossup:"#eae3eb"}},function(t,e,n){var r=n(31),a=["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."];function i(t){var e=(t instanceof Date?t:new Date(t+"T12:00:00.000Z")).getMonth();return a[e]}t.exports={months:a,getAPMonth:i,getFullDate:function(t){var e=t instanceof Date?t:new Date(t+"T12:00:00.000Z"),n=e.getMonth();return"".concat(a[n]," ").concat(e.getDate(),", ").concat(e.getFullYear())},getVideoTimestamp:function(t){var e=t instanceof Date?t:new Date(t),n=a[e.getMonth()],r=e.getDate(),i=e.getHours(),o=e.getMinutes(),s=i>=12?"p.m.":"a.m.";return"Forecast as of ".concat((i=(i%=12)||12)+":"+(o=o<10?"0"+o:o)+" "+s," ET, ").concat(n," ").concat(r)},timeTickFormat:function(t,e,n){return"".concat(i(t)," ").concat(r.timeFormat("%-d")(t))},timeTickFormatMobile:function(t,e,n){return"".concat(r.timeFormat("%-m/%-d")(t))},timeTickFormatMonthOnly:function(t){return"".concat(i(t))},getDateTime:function(t){return new Date(t).getTime()}}},function(t,e){var n=function(t){return t.replace(","," ").split(/\s+/)};t.exports={a:function(t){return Array.prototype.slice.call(t||[])},inView:function(t,e){var n=t.getBoundingClientRect();return e=e||400,n.right>0&&n.left<(window.innerWidth||window.document.documentElement.clientWidth)&&n.top<(window.innerHeight||window.document.documentElement.clientHeight)+e},resizeSelect:function(t,e){e=void 0===e?25:e;var n=document.createElement(t.parentNode.tagName);n.id="dummy-el",n.style.visibility="hidden",n.classList=t.parentNode.classList,n.innerHTML='<select class="'.concat(t.classList,'"><option>').concat(t.options[t.selectedIndex].text,"</option></select>"),t.parentNode.parentNode.appendChild(n);var r=n.querySelector("select").getBoundingClientRect().width;t.style.width=(0===r?153:r)+e+"px",t.style.visibility="visible",n.remove()},translateX:function(t){var e=n(t);return e.length<2?0:+e[0].split("(")[1]},translateY:function(t){var e=n(t);return e.length<2?0:+e[1].split(")")[0]}}},function(module,exports,__webpack_require__){"use strict";var timeago=function timeago(){var o={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},obj={ago:function(t,e){var n,r=Math.round,a=" ago",i=function(t,n){return void 0===e?n+" "+t+(n>1?"s":"")+a:n+t.substring(0,1)},s=Date.now()-new Date(t).getTime();for(var c in s<0&&(s*=-1,a=" from now"),o){if(r(s)<o[c])return i(n||"m",r(s/(o[n]||1)));n=c}return i(c,r(s/o[c]))},today:function(){var t=new Date,e=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),n=new Array("January","February","March","April","May","June","July","August","September","October","November","December");return e[t.getDay()]+", "+n[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()},timefriendly:function(s){var t=s.match(/(\d).([a-z]*?)s?$/);return t[1]*eval(o[t[2]])},mintoread:function(t,e,n){return(Math.round(t.split(" ").length/(n||200))||"< 1")+(e||" min to read")}};return obj};module.exports&&(module.exports=timeago())},function(t,e){t.exports={abbreviatePartyFromCode:function(t){return{D:"Dem.",R:"Rep."}[t]||"Other"}}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i=n(37),o=n(21);t.exports={lean:function(t){var e="";return e=t<60?"toss-up":t<75?"lean":t<95?"likely":"solid",e},clickRace:function(t){var e=r(t.race.split("-"),2),n=e[0],a=e[1],o=i.slugs[n],s=[o,a].join("-");return t.special&&(o+="-special"),[o,interactivePage.chamber,s]},getRunoffLean:function(t){var e=o.groupBy(t,(function(t){return t.party})),n=o.map(e,(function(t,e){var n=0;return o.each(t,(function(t){n+=t.winprob})),{party:e,winprob:n}}));return{winprob:o.sortBy(n,(function(t){return-1*t.winprob}))[0].winprob,party:o.sortBy(n,(function(t){return-1*t.winprob}))[0].party}},isBlanket:function(t,e){if(e){var n=t.split("-"),r=i.slugs[n[0]],a=n[1];t="".concat(r,"-").concat(a)}return o.indexOf(["georgia-S3","louisiana-S2","louisiana-2","louisiana-3","louisiana-4","louisiana-5"],t)>-1},processBlanketCands:function(t){var e=[{party:"R",name:"a Republican",candidates:o.filter(t,(function(t){return"R"===t.party}))},{party:"D",name:"a Democrat",candidates:o.filter(t,(function(t){return"D"===t.party}))},{party:null,name:"all others",candidates:o.filter(t,(function(t){return"R"!==t.party&&"D"!==t.party}))}],n=[];return o.each(e,(function(t){var e,r,a,i,s=(e=t.candidates,r=!1,a=0,i={mean:0,hi:0,lo:0},o.each(e,(function(t){a+=t.winprob,i.mean+=t.voteshare?t.voteshare.mean:0,i.hi+=t.voteshare?t.voteshare.hi:0,i.lo+=t.voteshare?t.voteshare.lo:0,r=!1})),{winprob:a,voteshare:i,incumbent:r});n.push({candidate:t.name,fullname:t.name,incumbent:s.incumbent,party:t.party,short:t.name,voteshare:s.voteshare,winprob:s.winprob})})),n}}},function(t,e,n){var r=n(37),a=n(35);t.exports={raceDisplay:function(t){var e=t.split("-"),n=r.abbrs[e[0]];if(r.atLarge[e[0]])return"".concat(n," at large");var i=a.ordinal(+e[1]);return"".concat(n," ").concat(i)},topTwoSameParty:function(t){return 2===t.length&&t[0].party&&t[0].party===t[1].party},unopposed:["alabama-9","alabama-7","arkansas-1","florida-25","georgia-14","massachusetts-3","massachusetts-7","massachusetts-8","mississippi-4","tennessee-5"]}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a,i="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};a=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function c(){c.init.call(this)}t.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(t))}function h(t){return void 0===t._maxListeners?c.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var a,i,o,s;if(u(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),void 0===o)o=i[e]=n,++t._eventsCount;else if("function"==typeof o?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(a=h(t))>0&&o.length>a&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},a=d.bind(r);return a.listener=n,r.wrapFn=a,a}function v(t,e,n){var r=t._events;if(void 0===r)return[];var a=r[e];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(a):y(a,a.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=a[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var l=c.length,u=y(c,l);for(n=0;n<l;++n)o(u[n],this,e)}return!0},c.prototype.addListener=function(t,e){return f(this,t,e,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(t,e){return f(this,t,e,!0)},c.prototype.once=function(t,e){return u(e),this.on(t,p(this,t,e)),this},c.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,p(this,t,e)),this},c.prototype.removeListener=function(t,e){var n,r,a,i,o;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){o=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,a),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(a=i[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},c.prototype.listeners=function(t){return v(this,t,!0)},c.prototype.rawListeners=function(t){return v(this,t,!1)},c.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},c.prototype.listenerCount=m,c.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(48),a=n(34),i=n(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=n(22)(n(16),n(11)),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(m,t);var e,n,a,o,v=(e=m,function(){var t,n=d(e);if(f()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function m(){return s(this,m),v.apply(this,arguments)}return n=m,(a=[{key:"init",value:function(){var t=this;l(d(m.prototype),"init",this).call(this),this.data=null,this.chart=null,this.chartVariable="winprob",this.appData.fetch("".concat(staticUrl,"/").concat("president"!==this.chamber?"".concat(this.chamber,"_"):"").concat(this.state,"_timeseries.json")).then((function(e){t.data=e,t._drawChart(),i.a.select("#change").selectAll(".btn-container").selectAll("button").on("click",(function(){var t=i.a.select(this).attr("id");i.a.select("#change").selectAll(".btn-container").selectAll("button").classed("active",!1),i.a.select(this).classed("active",!0),n.onVariableChange(t)}));var n=t;l(d(m.prototype),"initEnd",t).call(t)}))}},{key:"onModelChange",value:function(t){l(d(m.prototype),"onModelChange",this).call(this,t),this.initialized&&(i.a.select("#change-chart").html(null),this._drawChart(),l(d(m.prototype),"onModelChangeEnd",this).call(this))}},{key:"setChartvar",value:function(t){this.chartVariable=t}},{key:"onVariableChange",value:function(t){this.chartVariable=t,this.chart.chartVariable=this.chartVariable,this.chart.handleVariableChange()}},{key:"_drawChart",value:function(){this.screenshot?this.chart=new r.a(this.data,"#change-screenshot-chart",this.model,{margin:{top:20,left:40,bottom:30,right:50},chartVariable:this.chartVariable,title:"Chances of winning over time",screenshot:this.screenshot,broadcast:this.broadcast,x:{tickValues:[new Date("07/01/20"),new Date("08/01/20"),new Date("09/01/20"),new Date("10/01/20"),new Date("11/03/20")]}}):this.broadcast?this.chart=new r.a(this.data,"#broadcast-change-"+this.chartVariable,this.model,{margin:{top:30,left:90,bottom:90,right:150},chartVariable:this.chartVariable,screenshot:this.screenshot,broadcast:this.broadcast,x:{tickValues:[new Date("07/01/20"),new Date("08/01/20"),new Date("09/01/20"),new Date("10/01/20"),new Date("11/03/20")]}}):this.chart=new r.a(this.data,"#change-chart",this.model,{margin:{top:20,left:40,bottom:30,right:60},chartVariable:this.chartVariable,title:"Chances of winning over time",screenshot:this.screenshot,broadcast:this.broadcast}),this.chart.init()}},{key:"updateScreenshotHed",value:function(){if("us"===this.state)return this;var t="district-of-columbia"===this.state?"D.C.":p.states.abbrs[p.states.toAbbrs[this.state]],e=i.a.select("#change").select("h2"),n=e.text();e.text("".concat(n," in ").concat(t)),e.classed("state",!0)}}])&&c(n.prototype,a),o&&c(n,o),m}(a.a)},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(t,e){return Array.isArray(t)?function(t,e){for(var n,r="",i="",o=Array.isArray(e),s=0;s<t.length;s++)(n=a(t[s]))&&(o&&e[s]&&(n=c(n)),r=r+i+n,i=" ");return r}(t,e):t&&"object"==typeof t?function(t){var e="",n="";for(var a in t)a&&t[a]&&r.call(t,a)&&(e=e+n+a,n=" ");return e}(t):t||""}function i(t){if(!t)return"";if("object"==typeof t){var e="";for(var n in t)r.call(t,n)&&(e=e+n+":"+t[n]+";");return e}return t+""}function o(t,e,n,r){if(!1===e||null==e||!e&&("class"===t||"style"===t))return"";if(!0===e)return" "+(r?t:t+'="'+t+'"');var a=typeof e;return"object"!==a&&"function"!==a||"function"!=typeof e.toJSON||(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('"'))?(n&&(e=c(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"}e.merge=function t(e,n){if(1===arguments.length){for(var r=e[0],a=1;a<e.length;a++)r=t(r,e[a]);return r}for(var o in n)if("class"===o){var s=e[o]||[];e[o]=(Array.isArray(s)?s:[s]).concat(n[o]||[])}else if("style"===o){s=(s=i(e[o]))&&";"!==s[s.length-1]?s+";":s;var c=i(n[o]);c=c&&";"!==c[c.length-1]?c+";":c,e[o]=s+c}else e[o]=n[o];return e},e.classes=a,e.style=i,e.attr=o,e.attrs=function(t,e){var n="";for(var s in t)if(r.call(t,s)){var c=t[s];if("class"===s){c=a(c),n=o(s,c,!1,e)+n;continue}"style"===s&&(c=i(c)),n+=o(s,c,!1,e)}return n};var s=/["&<>]/;function c(t){var e=""+t,n=s.exec(e);if(!n)return t;var r,a,i,o="";for(r=n.index,a=0;r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}a!==r&&(o+=e.substring(a,r)),a=r+1,o+=i}return a!==r?o+e.substring(a,r):o}e.escape=c,e.rethrow=function t(e,r,a,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&r||i))throw e.message+=" on line "+a,e;try{i=i||n(72).readFileSync(r,"utf8")}catch(n){t(e,null,a)}var o=3,s=i.split("\n"),c=Math.max(a-o,0),l=Math.min(s.length,a+o);o=s.slice(c,l).map((function(t,e){var n=e+c+1;return(n==a?"  > ":"    ")+n+"| "+t})).join("\n");throw e.path=r,e.message=(r||"Pug")+":"+a+"\n"+o+"\n\n"+e.message,e}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(28),a=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=n(21),p=n(22)(n(16),n(11)),v=n(27),m=new URLSearchParams(window.location.search),y=m.get("video"),g=m.get("mobile"),b=m.get("abc"),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(w,t);var e,r,i,s,m=(e=w,function(){var t,n=f(e);if(h()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function w(t,e,r,i){var o;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w),(o=m.call(this,t,e,i)).model=r,o.state=i.state,o.stateAbbr=p.states.toAbbrs[o.state],"senate"!==i.chamber&&"house"!==i.chamber||(o.stateAbbr=p.states.toAbbrs[o.state.replace(/-S?\d+$/,"")]),"house"===i.chamber){var s=o.state.split("-");o.district=+s[s.length-1]}return o.screenshot=i.screenshot,o.video=y,o.abc=b,o.mobileVideoParam=g,o.mobileVideo="1"===o.video&&"1"===o.mobileVideoParam,o.key="function"==typeof i.key?i.key():i.key?i.key:"value",o.groupKey=i.groupKey||null,o.numberOfSims=i.numberOfSims||100,o.radius=i.radius||o.isMobile?6:o.video?32:o.abc?16:8,o.collisionForceRadius=i.collisionForceRadius||o.isMobile?o.radius:o.radius+2,o.collisionForce=a.a.forceCollide().radius(o.collisionForceRadius),o.strength=i.strength||6,o.forceIterations=i.forceIterations||150,o.divergingTicks=i.divergingTicks||[],o.hasYScale=i.hasYScale||!1,o.keyY="function"==typeof i.keyY?i.keyY():i.keyY?i.keyY:"value",o.strengthY=i.strengthY||.5,o.tickValues=i.tickValues||null,o.tickCount=i.tickCount||6,o.tickFormat=function(t,e){return 0===e?"+".concat(Math.abs(t)," E. VOTES"):0===t?"":"+".concat(Math.abs(t))},o.tickFormatMobile=function(t,e){return 0===t?"":"+".concat(Math.abs(t))},o.tickPadding=i.tickPadding||10,o.timeseriesData=i.timeseriesData,o.tooltipEl=a.a.select("#topline-tooltip-container"),o.tooltipContent=o.tooltipEl.select(".tooltip-content"),o.tooltipTemplate=n(76),o.mapData=i.mapData,o.tooltip=i.tooltip,o.applenews=i.applenews,o.chamber=i.chamber,o.candidates=i.candidates,o.templateDek=d.template(v.topline.dek_senate,{interpolate:/\{\{(.+?)\}\}/g}),o.templateRunoffNote=d.template(v.topline.runoff_note,{interpolate:/\{\{(.+?)\}\}/g}),o.templateRunoffLeader=d.template(v.topline.runoff_leader,{interpolate:/\{\{(.+?)\}\}/g}),o.topTwoSameParty=p.house.topTwoSameParty(o.timeseriesData[0].candidates),o}return r=w,s=[{key:"winProbFormat",value:function(t){return"".concat(a.a.format(".0f")(t),"% chance")}}],(i=[{key:"init",value:function(){1!==this.candidates.length?(this._processData()._updateHedAndDek()._drawChartFrame()._calculateXDomain()._calculateXScale()._drawZeroAxis()._drawAxis()._styleTicksAtZero()._styleTrumpTicks()._styleBidenTicks()._drawCandHeads()._drawTrumpWinProb()._drawTrumpWinSent()._drawBidenWinProb()._drawBidenWinSent()._updateLegend()._addTitle()._initSimulation()._drawCircles()._drawRunoffMarks()._updateStatewideExpl()._addMNFootnote(),this.isMobile||this.screenshot||this._addHover()):this._handleUnopposed()}},{key:"_processData",value:function(){var t=this;this.parties=d.uniq(d.pluck(this.candidates,"party")),this.oneMajor=-1===d.indexOf(this.parties,"D")||-1===d.indexOf(this.parties,"R"),this.oneDem=this.oneMajor&&d.indexOf(this.parties,"D")>-1,this.oneRep=this.oneMajor&&d.indexOf(this.parties,"R")>-1,this.otherParty=this.oneMajor?d.filter(this.parties,(function(e){return e!==(t.oneDem?"D":"R")}))[0]:null,this.oneMajor&&this.candidates.length>=3&&(this.otherParty="O",this.candidates.push({guess:!1,incumbent:!1,name:"all others",party:"O",party_order:1,short:"Someone else"})),this._processSpecialElecData(),this.sim_data=d.find(this.data,(function(e){return e.type===t.model})).simulations;var e="voteshares";"us"===this.state&&(e={senate:"seats",house:"seats",president:"evs"}[this.chamber]),this.applenews?this.chart_data=this._formatChartDataApple(this.sim_data):this.chart_data=this._formatChartData(this.sim_data,e),this.hasRunoff=d.indexOf(d.unique(d.pluck(this.chart_data,"stage")),"runoff")>-1;var n=d.find(this.timeseriesData,(function(e){return e.type===t.model})),r=n.topline_runoff_candidates||n.candidates;return this.candChances=r.map((function(t){return{candidate:t.candidate,winprob:t.dates[0].winprob,odds:p.formatting.probToFrac(t.dates[0].winprob)}})),this}},{key:"_calculateXDomain",value:function(){var t=d.flatten(d.pluck(this.chart_data,this.key)),e=a.a.extent(t),n=d.max(d.map(e,(function(t){return Math.abs(t)})));return this.domainX=[-n,n],this}},{key:"_calculateXScale",value:function(){return this.scaleX=a.a.scaleLinear().domain(this.domainX).range([0,this.width]),this}},{key:"_drawZeroAxis",value:function(){return this.axisZero=a.a.axisBottom(this.scaleX).ticks(1).tickValues(this.tickValues).tickSize(-this.height).tickPadding(this.tickPadding).tickFormat(v.topline.tie_tick),this.chartEl.append("g").attr("transform","translate(0,".concat(this.height,")")).attr("class","axis axis-x ".concat(this.video?"video":""," ").concat(this.mobileVideo?"mobile-video":""," ").concat(this.abc?"abc":"")).call(this.axisZero),this}},{key:"_drawAxis",value:function(){var t=this;this.axisX=a.a.axisBottom(this.scaleX).ticks(this.tickCount).tickValues(this.tickValues).tickSize(-this.height/2).tickPadding(this.tickPadding).tickFormat(this.tickFormatMobile),this.xAxis=this.chartEl.append("g").attr("transform","translate(0,".concat(.75*this.height,")")).attr("class","axis axis-x ".concat(this.video?"video":""," ").concat(this.mobileVideo?"mobile-video":""," ").concat(this.abc?"abc":"")).call(this.axisX);var e=this.isMobile||this.abc?this.xAxis.select(".tick").select("text").node().getBBox().x:0,n="us"===this.state?this.isMobile||this.mobileVideo?v.topline.axis_label.national_mobile:v.topline.axis_label.national:v.topline.axis_label.state;return d.each(n,(function(n,r){t.xAxis.select(".tick").append("text").attr("fill","currentColor").attr("y",10).attr("dy","".concat(1.71+r,"em")).attr("dx",e).attr("class",t.isMobile?"ev-label mobile":t.abc?"ev-label abc":"ev-label").text(n)})),this}},{key:"_styleTicksAtZero",value:function(){return this.chartEl.selectAll(".tick").filter((function(t){return 0===t})).classed("tick-0",!0),this}},{key:"_styleTrumpTicks",value:function(){if(this.divergingTicks){var t="tick-".concat(this.oneDem?this.otherParty:"R");return this.topTwoSameParty&&(t="tick-".concat(this.candidates[0].party,"1")),this.chartEl.selectAll(".tick").filter((function(t){return t<0})).classed(t,!0),this}}},{key:"_styleBidenTicks",value:function(){if(this.divergingTicks){var t="tick-".concat(this.oneRep?this.otherParty:"D");return this.topTwoSameParty&&(t="tick-".concat(this.candidates[0].party,"2")),this.chartEl.selectAll(".tick").filter((function(t){return t>0})).classed(t,!0),this}}},{key:"_drawCandHeads",value:function(){if("president"!==this.chamber)return this;this.candHeadsEl=this.chartEl.append("g").attr("class","cand-heads");var t="trump-head.png",e="biden-head.png";this.applenews||(t=p.imgSrc(t),e=p.imgSrc(e));var n=this.mobileVideoParam?.16*this.height:-.03*this.height,r=n,a=n-10,i=this.mobileVideoParam?.35*this.width:.4*this.width,o=i,s=this.width-i,c=this.isMobile?100:this.video?360:this.abc?240:120,l=this.isMobile?110:this.video?390:this.abc?260:130;return this.candHeadsEl.append("svg:image").attr("class","cand-head trump").attr("xlink:href",t).attr("x",o-c/2).attr("y",r).attr("width",c).attr("height",c).attr("transform","rotate(".concat(-20,", ").concat(o,", ").concat(r+c/2,")")),this.candHeadsEl.append("svg:image").attr("class","cand-head biden").attr("xlink:href",e).attr("x",s-l/2).attr("y",a).attr("width",l).attr("height",l).attr("transform","rotate(".concat(20,", ").concat(s,", ").concat(a+l/2,")")),this}},{key:"_initSimulation",value:function(){var t=this;this.simulation=a.a.forceSimulation(this.chart_data).force("x",a.a.forceX((function(e){return t.scaleX(e[t.key])})).strength(this.strength)).force("y",a.a.forceY((function(e){return t.hasYScale?t.scaleY(e[t.keyY]):t.height/2})).strength(this.strengthY)).force("collide",this.collisionForce).stop();for(var e=0;e<this.forceIterations;++e)this.simulation.tick(),this._ticked();return this}},{key:"_ticked",value:function(){var t,e=this;t=this.topTwoSameParty?[p.slugify(this.candidates[0].name)]:d.map(d.filter(this.candidates,(function(t){return"R"===t.party})),(function(t){return"president"===e.chamber?t.short:p.slugify(t.name)})),this.chart_data.forEach((function(n){n.tie?n.x=e.scaleX(0):d.indexOf(t,n.candidate)>-1||"R"===n.candidate?n.x=Math.min(e.scaleX(0),n.x):n.x=Math.max(e.scaleX(0),n.x)}))}},{key:"_drawCircles",value:function(){var t=this;return this.circleG=this.chartEl.append("g").attr("class","circle-g"),this.circles=this.circleG.selectAll("circle").data(this.chart_data).enter().append("circle").attr("class",(function(e){return e.win||(a.a.select(".lead-dot").classed("show",!0),a.a.select(".lead-label").classed("show",!0)),"node group-".concat(e[t.groupKey]," ").concat(e.win?"":"not-win"," ").concat("us"!==e.state&&e.state?"state":""," ").concat(t.video?"video":""," ").concat(t.abc?"abc":"")})).attr("id",(function(t){return"circle-".concat(t.index)})),this.circles.attr("r",this.radius).style("fill",this.fill).attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),this.circles.each((function(t,e,n){var r=a.a.select(n[e]);"runoff"===t.stage&&r.raise()})),this}},{key:"_drawRunoffMarks",value:function(){if(!p.senate.isBlanket(this.state)&&!this.hasRunoff)return this;var t=d.filter(this.chart_data,(function(t){return"runoff"===t.stage}));return this.runoffMarks=this.circleG.selectAll("text").data(t).enter().append("text").attr("class",(function(t){return"runoff ".concat(t.party)})).attr("id",(function(t){return"runoff-".concat(t.index)})).attr("text-anchor","middle").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("dy","0.55em").text("*"),this}},{key:"_drawTrumpWinProb",value:function(){var t,e=this,n="",r=this.oneDem?this.otherParty:"R";this.topTwoSameParty?(t=this.candidates.find((function(t){return 1===t.party_order})).name,n="".concat(this.candidates[0].party,"1")):(t="president"===this.chamber?"Trump":d.find(this.candidates,(function(t){return t.party===r&&1===t.party_order})).name,n=this.oneDem?this.otherParty:"R");var a=d.find(this.candChances,(function(e){return e.candidate===t})).odds;return this.winprob=this.chartEl.append("g").attr("class","winProb trump ".concat(n)),d.each(["bg",""],(function(t){e.winprob.append("text").data(e.candChances).attr("x","".concat(.15*e.width)).attr("y",30).attr("class","win-prob ".concat(n," trumpWinProbText ").concat(t," ").concat(e.video?"video":""," ").concat(e.mobileVideo?"mobile-video":""," ").concat(e.abc?"abc":"")).text(a)})),this}},{key:"_drawTrumpWinSent",value:function(){var t=this,e=this.oneDem?this.otherParty:"R";return this.winprob=this.chartEl.append("g").attr("class","winSent trump"),d.each(["bg",""],(function(n){t.winprob.append("text").attr("x","".concat(.15*t.width)).attr("y",0).attr("class","winSentText ".concat(n," ").concat(t.video?"video":""," ").concat(t.mobileVideo?"mobile-video":""," ").concat(t.video?"video":""," ").concat(t.abc?"abc":"")).text((function(){if("president"===t.chamber)return v.topline.trumpChances;var n,r="all others"===(n=t.topTwoSameParty?t.candidates.find((function(t){return 1===t.party_order})):d.find(t.candidates,(function(t){return t.party===e&&1===t.party_order}))).name?n.short:n.name;return v.topline.trumpChances.replace(/Trump/,t.isMobile?n.short:r)}))})),this}},{key:"_drawBidenWinProb",value:function(){var t,e=this,n=this.oneRep?this.otherParty:"D",r="";this.topTwoSameParty?(t=this.candidates.find((function(t){return 2===t.party_order})),r="".concat(t.party,"2")):t=d.find(this.candidates,(function(t){return t.party===n&&1===t.party_order}));var a="president"===this.chamber?"Biden":t.name,i=d.find(this.candChances,(function(t){return t.candidate===a})).odds;return this.winprob=this.chartEl.append("g").attr("class","winProb biden ".concat(r)),d.each(["bg",""],(function(t){e.winprob.append("text").data(e.candChances).attr("x","".concat(.85*e.width)).attr("y",30).attr("class","win-prob ".concat(r," ").concat(n," ").concat(t," bidenWinProbText ").concat(e.video?"video":""," ").concat(e.mobileVideo?"mobile-video":""," ").concat(e.abc?"abc":"")).text(i)})),this}},{key:"_drawBidenWinSent",value:function(){var t=this;return this.winprob=this.chartEl.append("g").attr("class","winSent biden"),d.each(["bg",""],(function(e){t.winprob.append("text").attr("x","".concat(.85*t.width)).attr("y",0).attr("class","winSentText ".concat(e," ").concat(t.video?"video":""," ").concat(t.mobileVideo?"mobile-video":""," ").concat(t.abc?"abc":"")).text((function(){if("president"===t.chamber)return v.topline.bidenChances;var e,n=t.oneRep?t.otherParty:"D",r="all others"===(e=t.topTwoSameParty?t.candidates.find((function(t){return 2===t.party_order})):d.find(t.candidates,(function(t){return t.party===n&&1===t.party_order}))).name?e.short:e.name;return v.topline.bidenChances.replace(/Biden/,t.isMobile?e.short:r)}))})),this}},{key:"_updateLegend",value:function(){return this._updateRepLegend()._updateDemLegend()._updateRunoffLegend()._updateRunoffLeaderNote()._updateRunoffFootnote()._updateTopTwoNote()._updateVideoLegend(),this}},{key:"_updateRunoffLegend",value:function(){return p.senate.isBlanket(this.state)||this.hasRunoff?(a.a.select("#topline").select("#runoff-legend-container").classed("hidden",!1),this):this}},{key:"_updateRunoffFootnote",value:function(){if(!p.senate.isBlanket(this.state)&&!this.hasRunoff)return this;var t=a.a.select("#topline").select("#runoff-footnote");if(!p.senate.isBlanket(this.state))return t.classed("hidden",!1).html("<p>".concat(v.topline.runoff_note_no_jungle,"</p>")),this;var e=" ".concat(p.states.abbrs[this.stateAbbr]),n=this.state.match(/-\S3/)?" special":"";return"house"===this.chamber?e="the".concat(e," ").concat(p.formatting.ordinal(this.district)," District election"):"senate"===this.chamber&&(e+="'s ".concat(p.formatting.capitalize(this.chamber)).concat(n).concat(this.isMobile?" ":"&nbsp;","election")),t.classed("hidden",!1).html("<p>".concat(this.templateRunoffNote({state:e}),"</p>")),this}},{key:"_updateTopTwoNote",value:function(){if(!this.topTwoSameParty)return this;var t=d.template(v.topline.toptwo_note,{interpolate:/\{\{(.+?)\}\}/g}),e={D:"Democrat",R:"Republican"}[this.candidates[0].party];return a.a.select("#topline #runoff-footnote").classed("hidden",!1).html("<p>".concat(t({state:p.states.abbrs[this.stateAbbr],district:p.formatting.ordinal(this.district),party:e}),"</p>")),this}},{key:"_updateRunoffLeaderNote",value:function(){var t=this;if(!p.senate.isBlanket(this.state))return this;var e=d.find(this.timeseriesData,(function(e){return e.type===t.model})).candidates,n=d.sortBy(e,(function(t){return-1*t.dates[0].winprob}))[0],r="<span class=cand>".concat(n.candidate,"</span>"),i="<span class=party>".concat({D:"Democrat",R:"Republican"}[n.party],"</span>"),o="<span class='chance ".concat(n.party,"'>").concat(p.formatting.probToFrac(n.dates[0].winprob),"</span>");return a.a.select("#topline").select("#runoff-leader-legend-container").classed("hidden",!1).select("#runoff-leader-label").html("".concat(this.templateRunoffLeader({candName:r,party:i,chance:o}))),this}},{key:"_updateRepLegend",value:function(){var t,e=this.oneDem?this.otherParty:"R";if(t=this.topTwoSameParty?this.candidates.find((function(t){return 1===t.party_order})).short:d.find(this.candidates,(function(t){return t.party===e&&1===t.party_order})).short,this.repLabel=a.a.select("#topline").select("#rep-label"),!this.repLabel.node())return this;var n=v.topline.legend_trumpwin.replace(/Trump/,t);return this.repLabel.html(n),this.topTwoSameParty?a.a.select("#topline .legend-wrap .dot.state.trump").classed("trump",!1).classed("".concat(this.candidates[0].party,"1"),!0):a.a.select(this.repLabel.node().parentNode).select(".dot").attr("class","dot ".concat("us"===this.state?"":"state"," ").concat(this.oneDem?this.otherParty:"trump")),this}},{key:"_updateDemLegend",value:function(){var t,e=this.oneRep?this.otherParty:"D";if(t=this.topTwoSameParty?this.candidates.find((function(t){return 2===t.party_order})).short:d.find(this.candidates,(function(t){return t.party===e&&1===t.party_order})).short,this.demLabel=a.a.select("#topline").select("#dem-label"),!this.demLabel.node())return this;var n=v.topline.legend_bidenwin.replace(/Biden/,t);return this.demLabel.html(n),this.topTwoSameParty?a.a.select("#topline .legend-wrap .dot.state.biden").classed("".concat(this.candidates[0].party,"2"),this.topTwoSameParty):a.a.select(this.demLabel.node().parentNode).select(".dot").attr("class","dot ".concat("us"===this.state?"":"state"," ").concat(this.oneRep?this.otherParty:"biden")),this}},{key:"_addTitle",value:function(){var t=this,e=[".winSent.trump text",".winProb.trump text",".winSent.biden text",".winProb.biden text"].map((function(e){return t.svgEl.node().querySelector(e).textContent})).join(" ");return this.svgEl.select("desc").html(e),this}},{key:"_addHover",value:function(){var t=this;return this.applenews||(this.voronoi=a.a.voronoi().x((function(e){return e.x+t.margin.right})).y((function(e){return e.y+t.margin.top}))(this.chart_data),this.svgEl.on("mousemove",(function(e){var n=o(a.a.mouse(t.svgEl.node()),2),r=n[0],i=n[1],s=t.voronoi.find(r,i,50);if(s){var c=s.data;t.chartEl.selectAll("circle.node").classed("unhighlighted",!0).classed("highlighted",!1),t.chartEl.select("circle#circle-".concat(c.index)).raise().classed("highlighted",!0).classed("unhighlighted",!1),t.chartEl.select("text#runoff-".concat(c.index)).raise(),t._showTooltip(c)}else t.chartEl.selectAll("circle.node").classed("highlighted",!1).classed("unhighlighted",!1),t._hideTooltip()})).on("mouseout",(function(e){t.chartEl.selectAll("circle.node").classed("highlighted",!1).classed("unhighlighted",!1),t._hideTooltip()}))),this}},{key:"_showTooltip",value:function(t){this.tooltipEl.style("opacity",1);var e="us"===this.state?v.topline.tooltip_header.national:v.topline.tooltip_header.state;if(p.senate.isBlanket(this.state)||this.hasRunoff?(this.tooltipEl.select("#topline-tooltip-map").classed("runoff",!0),e="runoff"===t.stage?v.topline.tooltip_header.runoff:v.topline.tooltip_header.primary):this.tooltipEl.select("#topline-tooltip-map").classed("runoff",!1),this.tooltipContent.html(this.tooltipTemplate({cands:t.tooltip,utils:p,archie:v,_:d,state:this.state,tooltipHeader:e,topTwoSameParty:this.topTwoSameParty})),t.win){var n=this.tooltipContent.select(".cand-val-container").select(".cand-val.".concat(p.slugify(t.candidate))).select("p.cand.".concat(p.slugify(t.candidate)));n.html(n.html()+"&nbsp;&#10003;")}return this.tooltipEl.style("left","".concat(t.x+this.margin.left,"px")).style("top","".concat(t.y+this.margin.top,"px")),this.tooltipEl.classed("tooltip-position-left",!1),this.tooltipEl.classed("tooltip-position-right",!1),t.x<this.width/4?this.tooltipEl.classed("tooltip-position-left",!0):t.x>this.width-this.width/4&&this.tooltipEl.classed("tooltip-position-right",!0),"us"!==this.state||this.screenshot||this.tooltip.highlightStates(t.states),this}},{key:"_hideTooltip",value:function(){return this.tooltipEl.style("opacity",0),this}},{key:"_updateHedAndDek",value:function(){return this._updateHed(),this._updateDek(),this}},{key:"_updateDek",value:function(){var t=this;if("president"===this.chamber)return this;var e=a.a.select("#topline").select("p.intro"),n=d.find(v.model_picker.models,(function(e){return e.id===t.model})).name;e.html(this.templateDek({modelVersion:n}))}},{key:"_updateHed",value:function(){var t=d.sortBy(this.candChances,(function(t){return-1*t.winprob}))[0],e="president"===this.chamber?t.candidate:d.find(this.candidates,(function(e){return e.name===t.candidate})).short,n=a.a.select("#topline").select("h2"),r="us"===this.state?" the election":" ".concat(p.states.abbrs[this.stateAbbr]);if("senate"===this.chamber){var i=this.state.match(/-\S3/)?" special":"";r+="'s".concat(i," ").concat(p.formatting.capitalize(this.chamber)).concat(this.isMobile?" ":"&nbsp;","election")}else if(this.state.match(/-\d/)){var o=this.state.match(/([-a-z]+)-(\d+)/),s=o[1],c=p.states.toAbbrs[s],l=p.states.abbrs[c],u=p.states.atLarge[c]?"at-large district":"".concat(p.formatting.ordinal(+o[2])," District");r=" ".concat(l,"’s ").concat(u)}if("50"===p.formatting.formatLeaderLabel(t.winprob).type){var h=d.template(v.topline.hed_tossup,{interpolate:/\{(.+?)\}/g})({leaderLabel:p.formatting.formatLeaderLabel(t.winprob).value,in_for:"us"===this.state?"":"in",state:"president"===this.chamber&&"us"===this.state?"":r});n.attr("class",this.chamber).html("president"===this.chamber?h:"<span>".concat(h,"</span>"))}else{var f=d.template(v.topline.hed,{interpolate:/\{(.+?)\}/g})({candidate:e,leaderLabel:p.formatting.formatLeaderLabel(t.winprob).value,state:r});n.attr("class",this.chamber).html("president"===this.chamber?f:"<span>".concat(f,"</span>"))}return this}},{key:"_updateVideoLegend",value:function(){return this.video?(a.a.select("h4.label").classed("hide",!1),a.a.select(".legend-wrap").classed("video",!0),this.mobileVideo&&a.a.select(".legend-wrap").classed("mobile-video",!0),this):this}},{key:"_addMNFootnote",value:function(){var t=this.state;if("house"===this.chamber&&"minnesota-2"===t)return a.a.select("#topline").select("#mn-footnote").classed("hidden",!1).html("<p>".concat(v.topline.mnfootenote,"</p>")),this}},{key:"_updateStatewideExpl",value:function(){var t=this;if(this.video||this.screenshot||"president"!==this.chamber)return this;this.addStatewide=["maine","nebraska"];var e=this.state.match(/\d/)?this.state.match(/([a-z]+)-(\d)/)[1]:this.state;if(d.indexOf(this.addStatewide,e)>-1){this.statewideFootnote=a.a.select("#topline").select("#statewide-footnote"),this.statewideFootnote.classed("hidden",!1);var n=v.statewide_footnote.replace("{STATE}",p.states.abbrs[p.states.toAbbrs[e]]),r=d.filter(d.keys(p.states.dropdownContests),(function(t){return t.includes(p.states.toAbbrs[e])}));d.each(r,(function(r){var a=r.match(/\d/)?"".concat(p.formatting.ordinal(r.match(/\d/)[0])," District"):"Statewide",i=r.match(/\d/)?"".concat(e,"-").concat(r.match(/\d/)[0]):e;n+='<span class="statewide-link '.concat(i===t.state?"active":"",'" data-state="').concat(i,'">').concat(a,"</span>")})),this.statewideFootnote.append("p").html(n)}return a.a.selectAll("span.statewide-link").on("click",(function(e,n,r){var i=a.a.select(r[n]).attr("data-state");i!==t.state&&window.forecastNavigator.navigateToState(i,interactivePage.chamber)})),this}},{key:"_handleUnopposed",value:function(){var t=this.state.match(/([-a-z]+)-(\d+)/),e=t[1],n=p.states.toAbbrs[e],r=p.states.abbrs[n],i=p.states.atLarge[n]?"at large district":"".concat(p.formatting.ordinal(+t[2])," District"),o=" ".concat(r,"’s ").concat(i),s=d.template(v.topline.hed_unopposed,{interpolate:/\{(.+?)\}/g}),c=a.a.select("#topline"),l=c.select("h2");l.html(s({race:o,candidate:this.candidates[0].name})),l.style("margin-bottom","0px"),c.select("p.intro").classed("hidden",!0),c.select(".chart-tooltip-container").classed("hidden",!0),c.select(".legend-wrap").classed("hidden",!0)}},{key:"_processSpecialElecData",value:function(){var t=this;if(!p.senate.isBlanket(this.state))return this;var e=function(e,n){var r={D:"D1",R:"R1"},a={D:"A Democrat",R:"A Republican"};d.each(e.simulations,(function(e){if(e.winner.substring(0,1)===n&&!e.winner_special){var a=d.find(t.candidates,(function(t){return"".concat(t.party).concat(t.party_order)===e.winner}));e.winner_special=a.name,e.winner=r[n]}})),d.each(t.timeseriesData,(function(e){if(e.type===t.model){var r=e.topline_runoff_candidates||e.candidates,i=d.filter(r,(function(t){return t.party!==n})),o=d.filter(r,(function(t){return t.party===n})),s=d.reduce(d.map(o,(function(t){return t.dates[0].winprob})),(function(t,e){return t+e}),0);i.push({candidate:a[n],party:n,dates:[{winprob:s}]}),e.topline_runoff_candidates=i}})),d.find(t.candidates,(function(t){return"".concat(t.party).concat(t.party_order)===r[n]})).name,d.each(t.candidates,(function(t){t.party===n&&t.name!==a[n]&&(t.party_order+=1)})),t.candidates.push({guess:!1,incumbent:!1,name:a[n],party:n,party_order:1,short:a[n]})},n=function(e,n){var r={D:"D1",R:"R1"};d.find(t.candidates,(function(t){return"".concat(t.party).concat(t.party_order)===r[n]})).name==={D:"A Democrat",R:"A Republican"}[n]&&(t.candidates=d.filter(t.candidates,(function(t){return"".concat(t.party).concat(t.party_order)!==r[n]})),d.each(t.candidates,(function(t){t.party===n&&(t.party_order-=1)})))};return d.each(this.data,(function(r){r.type===t.model&&(n(0,"D"),e(r,"D"),n(0,"R"),e(r,"R"),d.each(r.simulations,(function(t){if(!t.stage){var e={},n=d.map(t.voteshares,(function(t,e){return{cand:e,val:t}})),r=d.sortBy(d.filter(n,(function(t){return"O1"!==t.cand})),(function(t){return-1*t.val})),a=d.filter(r,(function(t,e){return e>=3})),i=d.reduce(d.pluck(a,"val"),(function(t,e){return t+e}),0)+(t.voteshares.O1||0);e.O1=i;for(var o=0;o<3;o++){var s=r[o];e[s.cand]=s.val}t.voteshares=e}})))})),this}},{key:"_formatChartData",value:function(t,e){var n=this;return t.map((function(t){var r=d.pairs(t[e]).sort((function(t,e){return t[1]>e[1]||"O1"===e[0]?-1:e[1]>t[1]?1:0})),a=r[0][1]-r[1][1],i=t.winner,o=t.winner[0];return n.topTwoSameParty?(o=t.winner,"1"===i[1]&&(a*=-1)):"Trump"!==i&&i.substring(0,1)!==(n.oneDem?"I":"R")||(a*=-1),{candidate:t.winner_special?p.slugify(t.winner_special):r[0][0],party:"president"!==n.chamber?o:null,margin:a,win:"president"!==n.chamber||"us"!==n.state||r[0][1]>=270,tie:"president"===n.chamber&&"us"===n.state&&r[0][1]===r[1][1],tooltip:r.map((function(t){var e=d.find(n.candidates,(function(e){return("president"===n.chamber?e.short:p.slugify(e.name))===t[0]}));return e&&"O1"!==t[0]||(e={short:"All others",party:"O",name:"All others"}),{cand:e.short,name:"president"===n.chamber?e.short:e.name,val:n.applenews?a:t[1],party:e.party,order:e.party_order}})),states:t.states,state:n.state,stage:"president"!==n.chamber?t.stage:null}}))}},{key:"_formatChartDataApple",value:function(t){return t.map((function(t){return{candidate:t.winner,margin:t.margin,win:t.win,tie:0===t.margin,tooltip:[]}}))}}])&&c(r.prototype,i),s&&c(r,s),w}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));var r=n(70),a=n(28),i=n(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=n(74),d=(n(21),n(16)),p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,t);var e,n,r,a,o=(e=p,function(){var t,n=h(e);if(u()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function p(t,e,n,r){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(a=o.call(this,t,e,r)).model=n,a}return n=p,(r=[{key:"init",value:function(){this._drawChartFrame()._processData()._drawMap()}},{key:"_processData",value:function(){return this.states_map=f.feature(this.data,"states"),this}},{key:"_drawMap",value:function(){var t=i.a.geoAlbersUsa().scale(1).translate([0,0]),e=i.a.geoPath().projection(t),n=Object({0:Object({0:-.418743197681691,1:-.22353850659994334}),1:Object({0:.3612513098653094,1:.23003135990302526})}),r=n[1][0]-n[0][0],a=n[1][1]-n[0][1],o=1/Math.max(r/this.width,a/this.height),s=[(this.width-o*(n[1][0]+n[0][0]))/2,(this.height-o*(n[1][1]+n[0][1]))/2];return t.scale(o).translate(s),this.chartEl.selectAll("path.state").data(this.states_map.features).enter().append("path").attr("class",(function(t){return"US"===t.properties.name?"country":"state"})).attr("id",(function(t){return t.properties.name})).attr("d",e),this}},{key:"highlightStates",value:function(t){this.chartEl.selectAll("path.state").attr("class",(function(e){if("US"!==e.properties.name)return"state ".concat(d.slugify(t[e.properties.name].winner))}))}}])&&s(n.prototype,r),a&&s(n,a),p}(a.a),v=n(34);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=n(21),O=n(22)(n(16),n(11)),j=new URLSearchParams(window.location.search),M=j.get("video"),E=j.get("abc"),A=j.get("mobile"),D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(c,t);var e,n,a,o,s=(e=c,function(){var t,n=k(e);if(x()){var r=k(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _(this,t)});function c(){return y(this,c),s.apply(this,arguments)}return n=c,(a=[{key:"init",value:function(){var t=this;b(k(c.prototype),"init",this).call(this),this.data=null,this.chart=null;var e=[this.appData.fetch("".concat(staticUrl,"/").concat("president"!==this.chamber?"".concat(this.chamber,"_"):"").concat(this.state,"_simulations.json")),this.appData.fetch("".concat(staticUrl,"/").concat("president"!==this.chamber?"".concat(this.chamber,"_"):"").concat(this.state,"_timeseries.json")),this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_candidates.json"))];"president"===this.chamber&&"us"===this.state&&e.push(this.appData.fetch("".concat(staticUrl,"/us_map.json"))),Promise.all(e).then((function(e){if(t.data=e[0],t.timeseriesData=e[1],t.candidates=e[2],t.mapData=e[3],"president"===t.chamber)t.candidates=t.candidates.US;else if("us"===t.state)t.candidates=t.candidates.US;else{var n=t.state.split("-"),r=n.slice(0,n.length-1).join("-"),a=n[n.length-1],i=O.states.toAbbrs[r];t.candidates=t.candidates["".concat(i,"-").concat(a)];var o=S.indexBy(t.candidates,(function(t){return"".concat(-1===S.indexOf(["D","R"],t.party)?"I":t.party).concat(t.party_order)}));Object.keys(t.data).forEach((function(e){t.data[e].simulations=t.data[e].simulations.map((function(t){return t.voteshares=S.object(S.pairs(t.voteshares).map((function(t){return t[0]=o[t[0]]?O.slugify(o[t[0]].name):t[0],t}))),t}))}))}t._video(),t._abc(),t._drawChart(),b(k(c.prototype),"initEnd",t).call(t)}))}},{key:"onModelChange",value:function(t){b(k(c.prototype),"onModelChange",this).call(this,t),this.initialized&&(this._drawChart(),b(k(c.prototype),"onModelChangeEnd",this).call(this))}},{key:"_drawChart",value:function(){i.a.select("#topline-chart").html(null),"us"!==this.state||this.screenshot||(i.a.select("#topline-tooltip-map").style("height","120px"),this.tooltipChart=new p(this.mapData,"#topline-tooltip-map",this.model,{}),this.tooltipChart.init());var t={margin:{bottom:30},key:"margin",groupKey:"president"===this.chamber?"candidate":"party",timeseriesData:this.timeseriesData,state:this.state,mapData:this.mapData,tooltip:this.tooltipChart,screenshot:this.screenshot,candidates:this.candidates,chamber:this.chamber};this.chart=new r.a(this.data,"#topline-chart",this.model,t),this.chart.init()}},{key:"_abc",value:function(){if(!E)return this;i.a.select("#topline").select("h2").remove(),i.a.select("#topline").select("p.intro").remove(),i.a.select("#topline").classed("video",!0),i.a.select("#topline-chart").classed("video",!0)}},{key:"_video",value:function(){if(!M)return this;i.a.select("#topline").select("h2").remove(),i.a.select("#topline").select("p.intro").remove(),i.a.select("#topline").classed("video",!0),i.a.select("#topline-chart").classed("video",!0),A&&(i.a.select("#topline").classed("mobile-video",!0),i.a.select("#topline-chart").classed("mobile-video",!0))}}])&&g(n.prototype,a),o&&g(n,o),c}(v.a)},function(t,e){},function(module,exports,__webpack_require__){var timeago=function timeago(){var o={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},obj={ago:function(t){var e,n=Math.round,r=function(t,e){return e+" "+t+(e>1?"s":"")+" ago"},a=(new Date).getTime()-new Date(t).getTime();for(i in o){if(n(a)<o[i])return r(e||"m",n(a/(o[e]||1)));e=i}return r(i,n(a/o[i]))},today:function(){var t=new Date,e=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),n=new Array("January","February","March","April","May","June","July","August","September","October","November","December");return e[t.getDay()]+", "+n[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()},timefriendly:function(s){var t=s.match(/(\d).([a-z]*?)s?$/);return t[1]*eval(o[t[2]])},mintoread:function(t,e,n){return(Math.round(t.split(" ").length/(n||200))||"< 1")+(e||" min to read")}};return obj};module.exports&&(module.exports=timeago)},function(t,e,n){"use strict";n.r(e),n.d(e,"bbox",(function(){return i})),n.d(e,"feature",(function(){return o})),n.d(e,"mesh",(function(){return u})),n.d(e,"meshArcs",(function(){return h})),n.d(e,"merge",(function(){return d})),n.d(e,"mergeArcs",(function(){return p})),n.d(e,"neighbors",(function(){return m})),n.d(e,"quantize",(function(){return g})),n.d(e,"transform",(function(){return a})),n.d(e,"untransform",(function(){return y}));var r=function(t){return t},a=function(t){if(null==t)return r;var e,n,a=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var c=2,l=t.length,u=new Array(l);for(u[0]=(e+=t[0])*a+o,u[1]=(n+=t[1])*i+s;c<l;)u[c]=t[c],++c;return u}},i=function(t){var e,n=a(t.transform),r=1/0,i=r,o=-r,s=-r;function c(t){(t=n(t))[0]<r&&(r=t[0]),t[0]>o&&(o=t[0]),t[1]<i&&(i=t[1]),t[1]>s&&(s=t[1])}function l(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"Point":c(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(c)}}for(e in t.arcs.forEach((function(t){for(var e,a=-1,c=t.length;++a<c;)(e=n(t[a],a))[0]<r&&(r=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>s&&(s=e[1])})),t.objects)l(t.objects[e]);return[r,i,o,s]},o=function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return s(t,e)}))}:s(t,e)};function s(t,e){var n=e.id,r=e.bbox,a=null==e.properties?{}:e.properties,i=c(t,e);return null==n&&null==r?{type:"Feature",properties:a,geometry:i}:null==r?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:r,properties:a,geometry:i}}function c(t,e){var n=a(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var a=r[t<0?~t:t],i=0,o=a.length;i<o;++i)e.push(n(a[i],i));t<0&&function(t,e){for(var n,r=t.length,a=r-e;a<--r;)n=t[a],t[a++]=t[r],t[r]=n}(e,o)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function c(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(c)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}var l=function(t,e){var n={},r={},a={},i=[],o=-1;function s(t,e){for(var r in t){var a=t[r];delete e[a.start],delete a.start,delete a.end,a.forEach((function(t){n[t<0?~t:t]=1})),i.push(a)}}return e.forEach((function(n,r){var a,i=t.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=e[++o],e[o]=n,e[r]=a)})),e.forEach((function(e){var n,i,o=function(e){var n,r=t.arcs[e<0?~e:e],a=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,a]:[a,n]}(e),s=o[0],c=o[1];if(n=a[s])if(delete a[n.end],n.push(e),n.end=c,i=r[c]){delete r[i.start];var l=i===n?n:n.concat(i);r[l.start=n.start]=a[l.end=i.end]=l}else r[n.start]=a[n.end]=n;else if(n=r[c])if(delete r[n.start],n.unshift(e),n.start=s,i=a[s]){delete a[i.end];var u=i===n?n:i.concat(n);r[u.start=i.start]=a[u.end=n.end]=u}else r[n.start]=a[n.end]=n;else r[(n=[e]).start=s]=a[n.end=c]=n})),s(a,r),s(r,a),e.forEach((function(t){n[t<0?~t:t]||i.push([t])})),i},u=function(t){return c(t,h.apply(this,arguments))};function h(t,e,n){var r,a,i;if(arguments.length>1)r=f(t,e,n);else for(a=0,r=new Array(i=t.arcs.length);a<i;++a)r[a]=a;return{type:"MultiLineString",arcs:l(t,r)}}function f(t,e,n){var r,a=[],i=[];function o(t){var e=t<0?~t:t;(i[e]||(i[e]=[])).push({i:t,g:r})}function s(t){t.forEach(o)}function c(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":c(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(c)}(e.arcs)}}(e),i.forEach(null==n?function(t){a.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&a.push(t[0].i)}),a}var d=function(t){return c(t,p.apply(this,arguments))};function p(t,e){var n={},r=[],a=[];function i(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function o(e){return function(t){for(var e,n=-1,r=t.length,a=t[r-1],i=0;++n<r;)e=a,a=t[n],i+=e[0]*a[1]-e[1]*a[0];return Math.abs(i)}(c(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,a.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:a.map((function(e){var r,a=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&a.push(t)}))}))})),(r=(a=l(t,a)).length)>1)for(var i,s,c=1,u=o(a[0]);c<r;++c)(i=o(a[c]))>u&&(s=a[0],a[0]=a[c],a[c]=s,u=i);return a})).filter((function(t){return t.length>0}))}}var v=function(t,e){for(var n=0,r=t.length;n<r;){var a=n+r>>>1;t[a]<e?n=a+1:r=a}return n},m=function(t){var e={},n=t.map((function(){return[]}));function r(t,n){t.forEach((function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]}))}function a(t,e){t.forEach((function(t){r(t,e)}))}var i={LineString:r,MultiLineString:a,Polygon:a,MultiPolygon:function(t,e){t.forEach((function(t){a(t,e)}))}};for(var o in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in i&&i[e.type](e.arcs,n)})),e)for(var s=e[o],c=s.length,l=0;l<c;++l)for(var u=l+1;u<c;++u){var h,f=s[l],d=s[u];(h=n[f])[o=v(h,d)]!==d&&h.splice(o,0,d),(h=n[d])[o=v(h,f)]!==f&&h.splice(o,0,f)}return n},y=function(t){if(null==t)return r;var e,n,a=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var c=2,l=t.length,u=new Array(l),h=Math.round((t[0]-o)/a),f=Math.round((t[1]-s)/i);for(u[0]=h-e,e=h,u[1]=f-n,n=f;c<l;)u[c]=t[c],++c;return u}},g=function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)c=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be ≥2");var n,r=(c=t.bbox||i(t))[0],a=c[1],o=c[2],s=c[3];e={scale:[o-r?(o-r)/(n-1):1,s-a?(s-a)/(n-1):1],translate:[r,a]}}var c,l,u=y(e),h=t.objects,f={};function d(t){return u(t)}function p(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(p)};break;case"Point":e={type:"Point",coordinates:d(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(d)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(l in h)f[l]=p(h[l]);return{type:"Topology",bbox:c,transform:e,objects:f,arcs:t.arcs.map((function(t){var e,n=0,r=1,a=t.length,i=new Array(a);for(i[0]=u(t[0],0);++n<a;)((e=u(t[n],n))[0]||e[1])&&(i[r++]=e);return 1===r&&(i[r++]=[0,0]),i.length=r,i}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(48),a=n(34),i=n(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=n(27),y=n(22)(n(16),n(11)),g=n(21),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(b,t);var e,n,a,o,c=(e=b,function(){var t,n=v(e);if(p()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function b(){return l(this,b),c.apply(this,arguments)}return n=b,(a=[{key:"init",value:function(){var t=this;h(v(b.prototype),"init",this).call(this),this.selectors=[],this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_").concat(this.state,"_timeseries.json")).then((function(e){t.data=e,t.charts={},s(document.querySelectorAll("#change .change-chart")).forEach((function(e){var n=e.getAttribute("data-type"),r='#change .change-chart[data-type="'.concat(n,'"]');y.senate.isBlanket(t.state)&&"winprob"!==n?e.classList.add("hidden"):(t._drawHed(r,n),t._drawChart(r,n)),t.selectors.push([r,n])})),t._linkCharts()}))}},{key:"onModelChange",value:function(t){var e=this;h(v(b.prototype),"onModelChange",this).call(this,t),this.initialized&&(this.charts={},this.selectors.forEach((function(t){e._drawChart.apply(e,s(t))})),this._linkCharts(),h(v(b.prototype),"onModelChangeEnd",this).call(this))}},{key:"_drawHed",value:function(t,e){if(i.a.select(t).select("h1").remove(),!this.screenshot){var n=e;"winprob"===e&&(n="us"===this.state?"winprob_us":"winprob_state"),i.a.select("".concat(t)).append("h1").text(m.house_senate_change.chart_heds[n].replace("{CHAMBER}",y.formatting.capitalize(this.chamber)))}}},{key:"_drawChart",value:function(t,e){i.a.select(t).classed("senate",!0).classed(e,!0),i.a.select("".concat(t," svg")).remove();var n="winprob"===e?null:3,a=new r.a(this.data,t,this.model,{margin:{top:20,left:40,bottom:this.screenshot?55:30,right:60},chartVariable:e,title:"",y:{tickCount:n},state:this.state,chamber:this.chamber});a.init(),this.charts[t]=a}},{key:"_linkCharts",value:function(){var t=this,e=Object.keys(this.charts);e.forEach((function(n){t.charts[n].others=e.filter((function(t){return t!==n})).map((function(e){return t.charts[e]}))}))}},{key:"updateScreenshotHed",value:function(){var t=g.template(m.change.screenshotHed,{interpolate:/\{\{(.+?)\}\}/g}),e="",n="chamber";if(this.state.match(/-S\d/)){var r=this.state.match(/(.*)-S(\d)/),a=r[1];"3"===r[2]?e+="".concat(y.states.toAbbrs[a]," Special "):e="".concat(y.states.abbrs[y.states.toAbbrs[a]]," "),n="seat"}var o=t({chamber:"president"===this.chamber?"":y.formatting.capitalize(this.chamber),state:e});i.a.select(".container.viz-module").select("h2").classed(this.chamber,!0).html(o);var s=g.template(m.house_senate_change.screenshot_dek,{interpolate:/\{\{(.+?)\}\}/g});i.a.select(".container.viz-module").select("p").classed(this.chamber,!0).html(s({chamberOrSeat:n}))}}])&&u(n.prototype,a),o&&u(n,o),b}(a.a)},function(t,e,n){var r=n(65);t.exports=function(t){var e,n="",a=t||{};return function(t,a,i,o,s){n=n+'\n<h2 class="tooltip-content-header"><span>'+(null==(e=i)?"":e)+'</span></h2>\n<div class="cand-val-container">',function(){var i=t;if("number"==typeof i.length)for(var c=0,l=i.length;c<l;c++){const t=`${(u=i[c]).party}${o?u.order:""}`;n=n+"\n  <div"+r.attr("class",r.classes([["cand-val",s.slugify(u.name),t]],[!0]),!1,!0)+">\n    <p"+r.attr("class",r.classes([["cand",s.slugify(u.name),t]],[!0]),!1,!0)+">"+(null==(e=u.cand.split(" ").join("&nbsp;"))?"":e)+"</p>",n="us"!==a?n+"\n    <p"+r.attr("class",r.classes([["val",s.slugify(u.name),t]],[!0]),!1,!0)+">"+(null==(e=s.fixedRound(u.val,1))?"":e)+r.escape(null==(e=0===c?"%":"")?"":e)+"</p>":n+"\n    <p"+r.attr("class",r.classes([["val",s.slugify(u.name),t]],[!0]),!1,!0)+">"+(null==(e=u.val)?"":e)+"</p>",n+="\n  </div>"}else{l=0;for(var c in i){var u;l++;const t=`${(u=i[c]).party}${o?u.order:""}`;n=n+"\n  <div"+r.attr("class",r.classes([["cand-val",s.slugify(u.name),t]],[!0]),!1,!0)+">\n    <p"+r.attr("class",r.classes([["cand",s.slugify(u.name),t]],[!0]),!1,!0)+">"+(null==(e=u.cand.split(" ").join("&nbsp;"))?"":e)+"</p>",n="us"!==a?n+"\n    <p"+r.attr("class",r.classes([["val",s.slugify(u.name),t]],[!0]),!1,!0)+">"+(null==(e=s.fixedRound(u.val,1))?"":e)+r.escape(null==(e=0===c?"%":"")?"":e)+"</p>":n+"\n    <p"+r.attr("class",r.classes([["val",s.slugify(u.name),t]],[!0]),!1,!0)+">"+(null==(e=u.val)?"":e)+"</p>",n+="\n  </div>"}}}.call(this),n+="\n</div>"}.call(this,"cands"in a?a.cands:"undefined"!=typeof cands?cands:void 0,"state"in a?a.state:"undefined"!=typeof state?state:void 0,"tooltipHeader"in a?a.tooltipHeader:"undefined"!=typeof tooltipHeader?tooltipHeader:void 0,"topTwoSameParty"in a?a.topTwoSameParty:"undefined"!=typeof topTwoSameParty?topTwoSameParty:void 0,"utils"in a?a.utils:"undefined"!=typeof utils?utils:void 0),n}},function(t){t.exports=JSON.parse('{"updated":1604381623000}')},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return W}));var r=n(0),a=n(28);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e,this.h=n}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.root={x:0,y:0,w:this.w,h:this.h}}},{key:"fit",value:function(t){var e,n,r;for(e=0;e<t.length;e++)(r=t[e]).w=.9*r.w,r.h=.9*r.h,(n=this.findNode(this.root,r.w,r.h))?r.fit=this.splitNode(n,r.w,r.h):(r.w=r.w-=2,r.h=r.h-=2,t.push(r))}},{key:"findNode",value:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null}},{key:"splitNode",value:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t}}])&&i(e.prototype,n),r&&i(e,r),t}();function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=n(21),l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.buffer=3}},{key:"fit",value:function(t){var e,n,r=this,a=0;for(this.rowHeights=[],this.rowWidths=[],e=0;e<t.length;e++)(n=t[e]).w=n.w+=this.buffer,n.h=n.h+=this.buffer,0===e?(n.fit={x:0,y:0,w:n.w,h:n.h,row:a},this.horizontalSpaceLeft=this.w-n.w,this.rowHeights[a]=n.h,this.rowWidths[a]=n.w,this.cumuX=n.w):n.w>this.horizontalSpaceLeft?(this.rowWidths[a]=this.cumuX,a=a+=1,this.horizontalSpaceLeft=this.w-n.w,this.cumuX=n.w,this.rowHeights.push(n.h),this.rowWidths.push(n.w),n.fit={x:0,w:n.w,h:n.h,row:a}):(this.rowHeights[a]<n.h&&(this.rowHeights[a]=n.h),n.fit={x:this.cumuX,w:n.w,h:n.h,row:a},this.horizontalSpaceLeft=this.horizontalSpaceLeft-n.w,this.cumuX=this.cumuX+=n.w,this.rowWidths[a]=this.cumuX);c.each(this.rowHeights,(function(e,n){var a=r.rowHeights.slice(0,n),i=c.reduce(a,(function(t,e){return t+e}),0);c.each(t,(function(t){t.fit.row===n&&(t.fit.y=i+(e-t.fit.h)/2)}))})),c.each(this.rowWidths,(function(e,n){c.each(t,(function(t){t.fit.row===n&&(t.fit.x=t.fit.x+=(r.w-e)/2)}))}))}}])&&s(e.prototype,n),r&&s(e,r),t}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=n(21),y=n(16),g=n(27),b=new URLSearchParams(window.location.search),w=b.get("video"),_=b.get("mobile"),x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(u,t);var e,a,i,s,c=(e=u,function(){var t,n=v(e);if(p()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function u(t,e,a,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(o=c.call(this,t,e,i)).model=a,o.tippingVerticalBuffer=.04,o.tippingCategoryThreshold=+g.ec_margins.tipping_cutoff,o.strokeWidth=o.isMobile?15:23,o.points=i.points,o.snakeRotateTransform=o.isMobile?"rotate(-25deg)":"translateX(-45px) translateY(5px) rotate(-25deg)",o.mobileScale=o.width/330,o.transitionTime=300,o.state=i.state||null,o.lineGenerator=r.a.line().x((function(t){return t[0]})).y((function(t){return t[1]})),o.fiveyWrap=r.a.select(o.parentEl.node().parentNode.parentNode.parentNode).select(".fivey-wrap"),o.fivey=o.fiveyWrap.select(".fivey"),o.fiveyText=o.fiveyWrap.select(".fivey-text"),o.video=w,o.mobileVideoParam=_,o.mobileVideo="1"===o.video&&"1"===o.mobileVideoParam,o.mobileVideoScale=1.6,o.tooltip=i.tooltip,o.tooltipTemplate=n(82),o}return a=u,s=[{key:"tippingFormat",value:function(t){return"".concat(r.a.format(".1f")(t),"%")}},{key:"marginScreenReaderFormat",value:function(t){return"".concat(r.a.format(".1f")(t),"%")}}],(i=[{key:"init",value:function(){this._processData()._drawChartFrame()._adjustMobileHeight()._adjustMobileVideoHeight()._adjustRotate()._draw270Line(100,this.isMobile?-5:0)._drawTippingAnnoGroup()._splitPath()._drawSegments()._drawLabels()._addHoverAndClick()._addTitle(),this.mobileVideo&&(this.parentEl.style("height","".concat(1530,"px")),this.svgEl.attr("height",1530),this.chartEl.attr("height",1530))}},{key:"initStateRecirc",value:function(){this._processData()._drawChartFrame()._splitPath()._drawSegments().highlightRecircState()}},{key:"_fivey",value:function(t,e){this.fiveyWrap.attr("class","fivey-wrap ".concat(t)),this.fivey.attr("class","fivey ".concat(t)),this.fiveyText.attr("class","fivey-text ".concat(t)),this.fiveyText.html(e)}},{key:"handleTippingButton",value:function(t){var e=this;r.a.select("#ec-margins").select("p").html(g.ec_margins.dek_tipping);var n=t?this.transitionTime:0;r.a.selectAll("button.btn-ec-margins").classed("active",!1),r.a.select("button#tipping").classed("active",!0),m.each(["text.two-seventy","path.two-seventy-line","line.sep","rect.two-seventy-bg"],(function(t){e.chartEl.selectAll(t).classed("hidden",!0)})),m.each(["text.tipping-anno","path.tipping-anno","rect.tipping-anno-bg"],(function(t){e.chartEl.selectAll(t).classed("hidden",!1)})),this.chartEl.transition().duration(n).style("transform","translateX(0px) rotate(0deg) translateY(5px)");var a=[],i=[],s=[];this.pathEl.selectAll(".piece").each((function(t,n,o){var c=r.a.select(o[n]).node().getBBox();c.width=c.width+=e.strokeWidth,c.height=c.height+=e.strokeWidth,a.push({w:c.width+1,h:c.height+1,d:t}),i=m.filter(a,(function(t){return t.d.tipping>=e.tippingCategoryThreshold})),s=m.filter(a,(function(t){return t.d.tipping<e.tippingCategoryThreshold}))})),i=m.sortBy(i,(function(t){return-1*t.d.tipping})),s=m.sortBy(s,(function(t){return-1*t.h}));var c=new l(this.width);c.init(),c.fit(i),m.each(i,(function(n){e.moveBlock(n,0,!0,t)})),this.tippingHeightThreshold=2*this.tippingVerticalBuffer+m.reduce(c.rowHeights,(function(t,e){return t+e}),0)/this.height;var u=new o(this.width,this.height*(1-this.tippingHeightThreshold+this.tippingVerticalBuffer));u.init(),u.fit(s),m.each(s,(function(n){var r=n.d.id;e.labelEl.select("text#".concat(r,"-label")).select("textPath").text(r),e.moveBlock(n,e.tippingHeightThreshold,!1,t)})),this._drawTippingThresholdLine(),this._fivey("right jumping ec-margins peek",g.clippy["ec-margins-alt"])}},{key:"handleMarginButton",value:function(){var t=this;r.a.select("#ec-margins").select("p").html(g.ec_margins.dek),r.a.selectAll("button.btn-ec-margins").classed("active",!1),r.a.select("button#margin-mean").classed("active",!0),this.labelEl.selectAll("text.label-snake").each((function(e,n,a){var i=r.a.select(a[n]),o=i.attr("id").split("-")[0];i.select("textPath").text((function(e){return e.ecVotes>=6&&!t.isMobile?y.states.abbrs[o]:o}))})),this.chartEl.transition().duration(this.transitionTime).style("transform",this.snakeRotateTransform),this.pathEl.selectAll(".piece").transition().duration(this.transitionTime).attr("transform","translate(0, 0)"),this.pathBgEl.selectAll(".bg-piece").transition().duration(this.transitionTime).attr("transform","translate(0, 0)"),this.labelEl.selectAll(".label").classed("hidden",!1).transition().duration(this.transitionTime).attr("transform","translate(0, 0)"),this.labelEl.selectAll(".tipping").classed("hidden",!0),m.each(["text.two-seventy","path.two-seventy-line","line.sep","rect.two-seventy-bg"],(function(e){t.chartEl.selectAll(e).classed("hidden",!1)})),m.each(["text.tipping-anno","path.tipping-anno","rect.tipping-anno-bg"],(function(e){t.chartEl.selectAll(e).classed("hidden",!0)})),this._fivey("peek left professor ec-margins",g.clippy["ec-margins"]),this.labelEl.select("text").classed("hidden",!1)}},{key:"moveBlock",value:function(t,e,n,r){var a=r?this.transitionTime:0;if(t.fit){var i=this.pathEl.select("#".concat(t.d.id,"-seg")),o=i.node().getBBox(),s=t.fit.x-o.x+this.strokeWidth/2,c=t.fit.y-o.y+this.strokeWidth/2+this.height*e;i.transition().duration(a).attr("transform","translate(".concat(s,", ").concat(c,")")),this.pathBgEl.transition().select("#".concat(t.d.id,"-bg-seg")).attr("transform","translate(".concat(s,", ").concat(c,")")),this.labelEl.select("#".concat(t.d.id,"-label")).transition().duration(a).attr("transform","translate(".concat(s,", ").concat(c,")")),this.labelEl.select("#".concat(t.d.id,"-label-tipping-bottom-bg")).attr("transform","translate(".concat(t.fit.x+t.fit.w/2,", ").concat(t.fit.y+t.fit.h/2,")")),this.labelEl.select("#".concat(t.d.id,"-label-tipping-bottom")).attr("transform","translate(".concat(t.fit.x+t.fit.w/2,", ").concat(t.fit.y+t.fit.h/2,")")),this.labelEl.select("#".concat(t.d.id,"-label-tipping-top-bg")).attr("transform","translate(".concat(t.fit.x+t.fit.w/2,", ").concat(t.fit.y+t.fit.h/2,")")),this.labelEl.select("#".concat(t.d.id,"-label-tipping-top")).attr("transform","translate(".concat(t.fit.x+t.fit.w/2,", ").concat(t.fit.y+t.fit.h/2,")")),n&&(this.labelEl.select("#".concat(t.d.id,"-label")).classed("hidden",!0),this.labelEl.select("#".concat(t.d.id,"-label-tipping-bottom")).classed("hidden",!1),this.labelEl.select("#".concat(t.d.id,"-label-tipping-top")).classed("hidden",!1),this.labelEl.select("#".concat(t.d.id,"-label-tipping-bottom-bg")).classed("hidden",!1),this.labelEl.select("#".concat(t.d.id,"-label-tipping-top-bg")).classed("hidden",!1)),this.chartEl.append("rect").attr("x",t.fit.x).attr("y",t.fit.y+this.height*e).attr("width",t.w).attr("height",t.h).attr("class","block ".concat(t.d.id))}}},{key:"_processData",value:function(){var t=this;return this.points.adjustedPoints=this.points.points,this.isMobile&&(this.points.adjustedPoints=this.points.points.map((function(e){return[e[0]*t.mobileScale,e[1]*t.mobileScale]}))),this.mobileVideo&&(this.points.adjustedPoints=this.points.points.map((function(e){return[e[0]*t.mobileVideoScale,e[1]*t.mobileVideoScale*1.2]}))),this.chart_data=m.find(this.data,(function(e){return e.type===t.model})),this.state_data_sorted=m.sortBy(this.chart_data.states,(function(t){return-1*t.margin.mean})),this.max_margin=Math.abs(m.max(this.chart_data.states,(function(t){return Math.abs(t.margin.mean)})).margin.mean),this}},{key:"_adjustRotate",value:function(){return this.chartEl.style("transform","".concat(this.snakeRotateTransform," scale(1, 1)")),this}},{key:"_adjustMobileHeight",value:function(){return this.isMobile?(this.parentEl.style("height","".concat(+this.parentEl.style("height").replace("px","")*this.mobileScale,"px")),this.svgEl.attr("height",this.svgEl.attr("height")*this.mobileScale),this.chartEl.attr("height",this.chartEl.attr("height")*this.mobileScale),this.strokeWidth=this.strokeWidth*this.mobileScale,this.height=this.height*this.mobileScale,this):this}},{key:"_adjustMobileVideoHeight",value:function(){return this.mobileVideo?(this.parentEl.style("height","".concat(+this.parentEl.style("height").replace("px","")*this.mobileVideoScale,"px")),this.svgEl.attr("height",this.svgEl.attr("height")*this.mobileVideoScale),this.chartEl.attr("height",this.chartEl.attr("height")*this.mobileVideoScale),this.strokeWidth=this.strokeWidth*this.mobileVideoScale*1.4,this.height=this.height*this.mobileVideoScale,this):this}},{key:"_draw270Line",value:function(t,e){var n=this,r=this.points.adjustedPoints[269/this.points.interval],a=[],i=this.mobileVideo?8:this.isMobile?2.5*this.mobileScale:4.5;a.push([r[0]-t*i,r[1]-e*i]),this.isMobile?a.push([r[0]+.75*t,r[1]+.75*e]):a.push([r[0]+t,r[1]+e]),this.twoSeventy=this.chartEl.append("g").attr("class","two-seventy"),this.twoSeventy.selectAll("path.two-seventy-line").data([a]).enter().append("path").attr("class","two-seventy-line").attr("id","two-seventy-line").attr("d",(function(t){return n.lineGenerator(t)}));var o=this.isMobile?"40%":"50%",s=this.twoSeventy.append("text").attr("dy","0.25em").attr("class","two-seventy fg").append("textPath").attr("startOffset",o).attr("xlink:href","#two-seventy-line").text(g.ec_margins.two_seventy_line).node().getBBox(),c=this.mobileVideo?12.5:7.23;return this.twoSeventy.append("rect").attr("class","two-seventy-bg").attr("x",s.x).attr("y",s.y).attr("width",g.ec_margins.two_seventy_line.length*c).attr("height",s.height),this.twoSeventy.select("text").raise(),this}},{key:"_drawTippingAnnoGroup",value:function(){return this.tippingAnno=this.chartEl.append("g").attr("class","tipping-anno"),this}},{key:"_drawTippingThresholdLine",value:function(){var t=this;this.tippingAnno.html(null);var e=this.isMobile?g.ec_margins.tipping_line_short:g.ec_margins.tipping_line,n=[[0,this.height*(this.tippingHeightThreshold-this.tippingVerticalBuffer)],[this.width,this.height*(this.tippingHeightThreshold-this.tippingVerticalBuffer)]];this.tippingAnno.selectAll("path.tipping-anno").data([n]).enter().append("path").attr("class","tipping-anno").attr("id","tipping-anno-line").attr("d",(function(e){return t.lineGenerator(e)}));var r=this.tippingAnno.append("text").attr("dy","0.25em").attr("class","tipping-anno").append("textPath").attr("startOffset","50%").attr("xlink:href","#tipping-anno-line").text(e.replace("{perc}",g.ec_margins.tipping_cutoff)).node().getBBox();return this.tippingAnno.append("rect").attr("class","tipping-anno-bg").attr("x",r.x).attr("y",r.y).attr("width",r.width).attr("height",r.height),this.tippingAnno.select("text").raise(),this}},{key:"_splitPath",value:function(){var t=this;this.pieces=[];var e=0;return m.each(this.state_data_sorted,(function(n,r){var a,i=(n.ecVotes+t.points.interval)/t.points.interval,o=e,s=e+i,c=t.points.adjustedPoints.slice(o,s).map((function(t,e){return[t[0],t[1]]})),l=[];c.forEach((function(t,e){0===e||l[l.length-1]&&Math.sign(a-t[0])===l[l.length-1]||l.push(Math.sign(a-t[0])),a=t[0]}));var u=180*Math.atan2(c[1][1]-c[0][1],c[1][0]-c[0][0])/Math.PI;t.pieces.push({id:n.state,cumu:e,margin:n.margin.mean,ecVotes:n.ecVotes,tipping:n.tipping,turns:l.length-1,segs:c,path:t.lineGenerator(c),angle:u}),e+=i-1})),this}},{key:"_drawSegments",value:function(){var t=this;this.colorScale=y.colorFunctions.smoothScale,this.pathBgEl=this.chartEl.append("g").attr("class","bg-pieces"),this.pathEl=this.chartEl.append("g").attr("class","pieces"),this.sepEl=this.chartEl.append("g").attr("class","seps"),this.pathBgEl.selectAll("path.bg-piece").data(this.pieces).enter().append("path").attr("class","bg-piece").attr("d",(function(t,e){return t.path})).attr("id",(function(t){return"".concat(t.id,"-bg-seg")})).attr("stroke-width",this.strokeWidth+4),this.pathEl.selectAll("path.piece").data(this.pieces).enter().append("path").attr("class",(function(t,e){return"piece ".concat(1===t.ecVotes?"one-vote":"")})).attr("d",(function(t){return t.path})).attr("stroke",(function(e){return e.margin<0?t.colorScale.dem(Math.abs(e.margin)):t.colorScale.rep(Math.abs(e.margin))})).attr("id",(function(t){return"".concat(t.id,"-seg")})).attr("stroke-width",this.strokeWidth),this.sepEl.selectAll("line.sep").data(this.pieces).enter().append("line").attr("class",(function(t,e){return"sep ".concat(t.id,"-sep sep-").concat(e)})).attr("id",(function(t){return"".concat(t.id,"-sep")})).attr("transform",(function(t,e){return"translate("+t.segs[0][0]+","+t.segs[0][1]+")rotate("+(t.angle-90)+" 0 0)"})).attr("x1",-(this.strokeWidth+4)/2).attr("y1",0).attr("x2",(this.strokeWidth+4)/2).attr("y2",0);var e=this.pieces[this.pieces.length-1].segs,n=180*Math.atan2(e[e.length-2][1]-e[e.length-1][1],e[e.length-2][0]-e[e.length-1][0])/Math.PI;return this.sepEl.append("line").attr("class","sep sep-".concat(this.pieces.length)).attr("id","last-sep").attr("transform","translate("+e[e.length-1][0]+","+e[e.length-1][1]+")rotate("+(n-90)+" 0 0)").attr("x1",-this.strokeWidth/2).attr("y1",0).attr("x2",this.strokeWidth/2).attr("y2",0),this}},{key:"_drawLabels",value:function(){var t=this;return this.textPathEl=this.chartEl.append("g").attr("class","text-paths"),this.textPathEl.selectAll("path.text-path").data(this.pieces).enter().append("path").attr("class",(function(t){return t.ecVotes>1?"text-path":"text-path one-vote"})).attr("d",(function(e){return t.lineGenerator(t._getSegmentsForTextPath(e))})).attr("id",(function(t){return"".concat(t.id,"-text-path")})),this.textPathEl.selectAll("path.text-path.one-vote").attr("transform",(function(t,e){return"translate("+t.segs[0][0]+","+t.segs[0][1]+")rotate("+(t.angle-90)+" 0 0)"})),this.labelEl=this.chartEl.append("g").attr("class","labels"),this.labelEl.selectAll("text.label").data(this.pieces).enter().append("text").attr("class",(function(t){return t.ecVotes>1?"label label-snake":"label label-snake one-vote"})).attr("id",(function(t){return"".concat(t.id,"-label")})).attr("dy",(function(t){return t.ecVotes>1?"0.25em":"0.75em"})).append("textPath").attr("startOffset","50%").attr("xlink:href",(function(t){return"#".concat(t.id,"-text-path")})).text((function(e){return e.ecVotes>=6&&!t.isMobile?y.states.abbrs[e.id]:e.id})),this.labelEl.selectAll("text.tipping-top-bg").data(this.pieces).enter().append("text").attr("class",(function(t){return t.ecVotes>1?"label tipping tipping-top-bg hidden bg":"label tipping tipping-top-bg hidden one-vote bg"})).attr("id",(function(t){return"".concat(t.id,"-label-tipping-top-bg")})).attr("dy","-0.6em").text((function(e){return e.ecVotes>=6&&!t.isMobile?y.states.abbrs[e.id]:e.id})),this.labelEl.selectAll("text.tipping-top").data(this.pieces).enter().append("text").attr("class",(function(t){return t.ecVotes>1?"label tipping tipping-top hidden":"label tipping tipping-top hidden one-vote"})).attr("id",(function(t){return"".concat(t.id,"-label-tipping-top")})).attr("dy","-0.6em").text((function(e){return e.ecVotes>=6&&!t.isMobile?y.states.abbrs[e.id]:e.id})),this.labelEl.selectAll("text.tipping-bottom-bg").data(this.pieces).enter().append("text").attr("class",(function(t){return t.ecVotes>1?"label tipping tipping-bottom-bg hidden bg":"label tipping tipping-bottom-bg hidden one-vote bg"})).attr("id",(function(t){return"".concat(t.id,"-label-tipping-bottom-bg")})).attr("dy","0.6em").text((function(t){return u.tippingFormat(t.tipping)})),this.labelEl.selectAll("text.tipping-bottom").data(this.pieces).enter().append("text").attr("class",(function(t){return t.ecVotes>1?"label tipping tipping-bottom hidden":"label tipping tipping-bottom hidden one-vote"})).attr("id",(function(t){return"".concat(t.id,"-label-tipping-bottom")})).attr("dy","0.6em").text((function(t){return u.tippingFormat(t.tipping)})),this.mobileVideo&&this.labelEl.select("#MS-label").select("textPath").text("MS"),this}},{key:"_getSegmentsForTextPath",value:function(t){if(t.ecVotes>1){var e=Math.floor(t.segs.length/2);return t.segs[e-3][0]>t.segs[e+3][0]?m.sortBy(t.segs,(function(t,e){return-1*e})):t.segs}return[[-this.strokeWidth/2,0],[this.strokeWidth/2,0]]}},{key:"_addHoverAndClick",value:function(){var t=this,e=function(e,n){var a=e.id;r.a.selectAll(".bg-piece").classed("highlight",!1),r.a.select("#".concat(a,"-bg-seg")).classed("highlight",!0),r.a.select("#".concat(a,"-seg")).raise(),r.a.selectAll(".label").classed("highlight",!1),r.a.select("#".concat(a,"-label")).classed("highlight",!0),r.a.select("#".concat(a,"-label-tipping-top")).classed("highlight",!0),r.a.select("#".concat(a,"-label-tipping-bottom")).classed("highlight",!0),r.a.select("#".concat(a,"-label-tipping-top-bg")).classed("highlight",!0),r.a.select("#".concat(a,"-label-tipping-bottom-bg")).classed("highlight",!0),r.a.selectAll(".sep").classed("highlight",!1),r.a.select(".sep-".concat(n)).classed("highlight",!0),r.a.select(".sep-".concat(n+1)).classed("highlight",!0),t.mobile||(t.tooltip.updateState(e.id),t._updateTooltip(e))},n=function(){r.a.selectAll(".bg-piece").classed("highlight",!1),r.a.selectAll(".label").classed("highlight",!1),r.a.selectAll(".sep").classed("highlight",!1),r.a.select("#ec-margins-tooltip-container").style("opacity",0)};return this.labelEl.selectAll("text.label").on("mouseover",(function(t,n){return e(t,n)})).on("mouseout",n).on("click",(function(t){window.forecastNavigator.navigateToState(y.states.abbrToSlug(t.id),"president")})),this.pathEl.selectAll("path.piece").on("mouseover",(function(t,n){return e(t,n)})).on("mouseout",n).on("click",(function(t){window.forecastNavigator.navigateToState(y.states.abbrToSlug(t.id),"president")})),this}},{key:"_updateTooltip",value:function(t){var e=r.a.select("#ec-margins-tooltip-container"),n=e.select("#ec-margins-tooltip").select(".tooltip-content");e.style("opacity",1);var a=m.find(this.chart_data.states,(function(e){return e.state===t.id})),i="";m.indexOf(["ME","NE"],t.id)>-1&&(i=m.template(g.ec_margins.tooltip.footnote,{interpolate:/\{\{(.+?)\}\}/g})({state:y.states.abbrs[t.id]})),n.html(this.tooltipTemplate({cands:a.candidates,footnote:i,utils:y,archie:g})),r.a.select("#ec-margins-tooltip-map").selectAll("text.ec-label").html(""),r.a.select("#ec-margins-tooltip-map").selectAll("text.ec-label").html("<tspan>".concat(t.ecVotes,"</tspan> electoral vote").concat(1==+t.ecVotes?"":"s"));var o=Math.floor(t.segs.length/2),s=t.segs[o],c=s[0],l=s[1],u=-45,h=25,f=0,d=this.pathEl.select("path#".concat(t.id,"-seg")).attr("transform"),p=d?y.dom.translateX(d):0,v=d?y.dom.translateY(d):0;0!==p&&0!==v&&(c+=p,l+=v,u=0,h=0,f=35);var b=this.chartEl.select("g.pieces").node().getBBox(),w=[b.x+b.width/2,b.y+b.height/2],_=function(t,e,n,r,a){var i=Math.PI/180*a,o=Math.cos(i),s=Math.sin(i);return[o*(n-t)+s*(r-e)+t,o*(r-e)-s*(n-t)+e]}(w[0],w[1],c,l,h);e.style("left","".concat(_[0]+this.margin.left+u,"px")).style("top","".concat(_[1]+this.margin.top+f,"px")),l/b.height>.8?e.classed("low",!0):e.classed("low",!1)}},{key:"highlightRecircState",value:function(){this.pathEl.selectAll("path.piece:not(#".concat(this.state,"-seg)")).attr("stroke","#D3D3D3")}},{key:"_addTitle",value:function(){var t=m.filter(this.state_data_sorted,(function(t){return t.margin.mean<0})).length,e=m.filter(this.state_data_sorted,(function(t){return t.margin.mean>0})).length,n=m.sortBy(this.state_data_sorted,(function(t){return-1*t.tipping}))[0],r=y.states.abbrs[n.state],a=u.tippingFormat(Math.abs(n.margin.mean)),i=n.margin.mean>0?"Trump":"Biden",o=m.template(g.ec_margins.title,{interpolate:/\{\{(.+?)\}\}/g})({bidenLength:t,trumpLength:e,highestTippingState:r,margin:a,marginCand:i});return this.svgEl.select("desc").html(o),this}}])&&h(a.prototype,i),s&&h(a,s),u}(a.a);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=n(21),D=n(16),C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(s,t);var e,n,a,i,o=(e=s,function(){var t,n=E(e);if(M()){var r=E(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return j(this,t)});function s(t,e,n,r,a){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(i=o.call(this,t,e,r)).model=n,i.state=r.state,i.mapData=a,i}return n=s,(a=[{key:"init",value:function(){this._drawChartFrame()._processData()._addChartElems()._updateDefs()._updateStateName()._updateMap()}},{key:"_processData",value:function(){var t=this;return this.chart_data=A.find(this.data,(function(e){return e.type===t.model})),this.state_data=A.find(this.chart_data.states,(function(e){return e.state===t.state})),this.states_map=this.mapData,this.state_map={type:"FeatureCollection",features:A.filter(this.states_map.features,(function(e){return e.properties.name===t.state}))},this}},{key:"_addChartElems",value:function(){return this.defs=this.svgEl.append("defs"),this.gradient=this.defs.append("linearGradient"),this.gradient.append("stop").attr("class","stop-left").attr("offset",0),this.gradient.append("stop").attr("class","stop-left mid-stop-left"),this.gradient.append("stop").attr("class","mid-stop"),this.gradient.append("stop").attr("class","stop-right mid-stop-right"),this.gradient.append("stop").attr("class","stop-right").attr("offset",1),this.chartEl.append("path").attr("class","feature"),this.chartEl.append("text").attr("class","state-label bg").attr("x",0).attr("y",-10),this.chartEl.append("text").attr("class","state-label").attr("x",0).attr("y",-10),this.chartEl.append("text").attr("class","ec-label bg").attr("x",0).attr("y",10),this.chartEl.append("text").attr("class","ec-label").attr("x",0).attr("y",10),this}},{key:"_updateDefs",value:function(){var t=A.find(this.state_data.candidates,(function(t){return"Trump"===t.candidate})).voteshare.mean/100;return this.gradient.attr("id","gradient_".concat(this.state)),this.gradient.select(".mid-stop-left").attr("offset",t-.1),this.gradient.select(".mid-stop").attr("stop-color","rgb(169, 97, 126)").attr("offset",t),this.gradient.select(".mid-stop-right").attr("offset",t+.1),this}},{key:"_updateMap",value:function(){if(this.state.match(/\d/))return this.chartEl.select("path.feature").classed("hidden",!0),this;this.chartEl.select("path.feature").classed("hidden",!1);var t=r.a.geoAlbersUsa().scale(1).translate([0,0]),e=r.a.geoPath().projection(t),n=Object({US:Object({0:Object({0:-.418743197681691,1:-.22353850659994334}),1:Object({0:.3612513098653094,1:.23003135990302526})}),AL:Object({0:Object({0:.11852084049901104,1:.05744876562023449}),1:Object({0:.17170251780985146,1:.1431255841968082})}),AK:Object({0:Object({0:-.418743197681691,1:.12275783223673714}),1:Object({0:-.21892589040227195,1:.23003135990302526})}),AZ:Object({0:Object({0:-.2655734417430158,1:.006397675869633135}),1:Object({0:-.17139893846361295,1:.11638540065642289})}),AR:Object({0:Object({0:.027303705767189893,1:.036365661725364706}),1:Object({0:.09575796601033812,1:.09975623080108309})}),CA:Object({0:Object({0:-.3607938250764278,1:-.1116363375662901}),1:Object({0:-.249770235100916,1:.07849522685885724})}),CO:Object({0:Object({0:-.17139893846361295,1:-.052158885264004695}),1:Object({0:-.0709529112883588,1:.027440399473106947})}),CT:Object({0:Object({0:.29512928263436167,1:-.09793164182914293}),1:Object({0:.3190001571472974,1:-.07442705348385092})}),DE:Object({0:Object({0:.27491366646067833,1:-.04891891136778659}),1:Object({0:.28942351474619066,1:-.025060702940925994})}),DC:Object({0:Object({0:.26031918383092373,1:-.030519045951874935}),1:Object({0:.2632373572865921,1:-.02697972840344276})}),FL:Object({0:Object({0:.13290524432963657,1:.12299992158080242}),1:Object({0:.2586624347992543,1:.21899936967511402})}),GA:Object({0:Object({0:.15518165365817904,1:.05280303553017962}),1:Object({0:.22970171163243697,1:.13161768994915635})}),HI:Object({0:Object({0:-.20075181095160238,1:.1716964859084762}),1:Object({0:-.11942576922279577,1:.22882264313203415})}),ID:Object({0:Object({0:-.2605150698321949,1:-.2070367504469659}),1:Object({0:-.17805287623179894,1:-.07341427210597029})}),IL:Object({0:Object({0:.06741678635990037,1:-.07126455098127105}),1:Object({0:.12255791489041999,1:.026828294874096548})}),IN:Object({0:Object({0:.11628921316161366,1:-.06233750266639437}),1:Object({0:.1584731318702939,1:.011344816802685509})}),IA:Object({0:Object({0:25684727085155748e-21,1:-.08595953278397395}),1:Object({0:.08348631590663506,1:-.031028350793453674})}),KS:Object({0:Object({0:-.07525546626824667,1:-.02544216571243041}),1:Object({0:.027176075171766748,1:.029844439012791213})}),KY:Object({0:Object({0:.09946869144860353,1:-.016534465628329942}),1:Object({0:.19970028203911677,1:.03570177067537439})}),LA:Object({0:Object({0:.036576599461854105,1:.09858033028130753}),1:Object({0:.11469382045306753,1:.16671975988855325})}),ME:Object({0:Object({0:.3103370760821277,1:-.1996470502955554}),1:Object({0:.3612513098653094,1:-.11911388734646455})}),MD:Object({0:Object({0:.22671211078374817,1:-.04644617488999914}),1:Object({0:.28942351474619066,1:-.014936064680884042})}),MA:Object({0:Object({0:.29467346976793807,1:-.11553459571235858}),1:Object({0:.34044245772184334,1:-.09124290624808395})}),MI:Object({0:Object({0:.0752971116627323,1:-.16927648919791372}),1:Object({0:.1800239976324344,1:-.05955244104499857})}),MN:Object({0:Object({0:-.006144233203130395,1:-.1867961062090624}),1:Object({0:.0831919818981112,1:-.08445561347273123})}),MS:Object({0:Object({0:.07292917481232862,1:.060753476673936824}),1:Object({0:.12229942119962929,1:.1464305450473693})}),MO:Object({0:Object({0:.0111700897700214,1:-.034948452328809276}),1:Object({0:.1028102610099469,1:.04531270962209688})}),MT:Object({0:Object({0:-.2263492264839051,1:-.20458979821520829}),1:Object({0:-.08509163392048602,1:-.11479028301552852})}),NE:Object({0:Object({0:-.09696075551508154,1:-.08003190099559054}),1:Object({0:.01728034307195559,1:-.022920975977374525})}),NV:Object({0:Object({0:-.3109191325302651,1:-.0968169871932536}),1:Object({0:-.22290032626399248,1:.03936854949492097})}),NH:Object({0:Object({0:.3023760984199619,1:-.15580614008748483}),1:Object({0:.32516853150257435,1:-.10788319535222812})}),NJ:Object({0:Object({0:.27817997852175175,1:-.07774051340149146}),1:Object({0:.2966461736138643,1:-.03683231259379349})}),NM:Object({0:Object({0:-.1851048166554131,1:.01764782235813489}),1:Object({0:-.08848048158821295,1:.11803616279934603})}),NY:Object({0:Object({0:.21540461088826493,1:-.1440306309339372}),1:Object({0:.31707706062056495,1:-.06598161725474183})}),NC:Object({0:Object({0:.17313623726121283,1:.008397373267847508}),1:Object({0:.29084402788841107,1:.06242424961416848})}),ND:Object({0:Object({0:-.08957589950004675,1:-.18411013928776843}),1:Object({0:.0012562510748158869,1:-.1269975621889372})}),OH:Object({0:Object({0:.15251806706581328,1:-.0738799389774043}),1:Object({0:.21045094399146888,1:-.007893904701617771})}),OK:Object({0:Object({0:-.089126412220319,1:.026424233457524204}),1:Object({0:.030230185297256948,1:.08899068067903282})}),OR:Object({0:Object({0:-.3510648235919569,1:-.18061883670584056}),1:Object({0:-.23985992491082472,1:-.08794086984574201})}),PA:Object({0:Object({0:.20663078766468995,1:-.08685035300050026}),1:Object({0:.2861281437137403,1:-.03469534487575321})}),RI:Object({0:Object({0:.31639072557100745,1:-.09919247630940076}),1:Object({0:.32715940543841626,1:-.08579438985087973})}),SC:Object({0:Object({0:.1877656292965427,1:.046001933940012174}),1:Object({0:.2578645934861985,1:.09971444144164221})}),SD:Object({0:Object({0:-.09398446186902153,1:-.13127330942376636}),1:Object({0:.002570535011614245,1:-.06665450776626547})}),TN:Object({0:Object({0:.08869924690305836,1:.022256911659459755}),1:Object({0:.20614486483140043,1:.0628730131907631})}),TX:Object({0:Object({0:-.14855296064749263,1:.03513767437218984}),1:Object({0:.04502228082352992,1:.22423042543288374})}),UT:Object({0:Object({0:-.23956626121463295,1:-.07998934972475125}),1:Object({0:-.1618204759246344,1:.01764782235813489})}),VT:Object({0:Object({0:.28461958129758447,1:-.14960270477946325}),1:Object({0:.3081353208726827,1:-.1056514903840109})}),VA:Object({0:Object({0:.17868339681194248,1:-.03528307475632331}),1:Object({0:.28843487912737786,1:.025969926702942736})}),WA:Object({0:Object({0:-.326054518196007,1:-.22353850659994334}),1:Object({0:-.23378158512218086,1:-.155817989156116})}),WV:Object({0:Object({0:.18898620203703476,1:-.05063217087161376}),1:Object({0:.2510973259963455,1:.011569810652628965})}),WI:Object({0:Object({0:.046166541509009715,1:-.14646687939678116}),1:Object({0:.11812103107316933,1:-.0689471402557571})}),WY:Object({0:Object({0:-.18767740210913744,1:-.12536680374645393}),1:Object({0:-.09108951811586176,1:-.04498358680896164})})})[this.state],a=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=.9/Math.max(a/this.width,i/this.height),s=[(this.width-o*(n[1][0]+n[0][0]))/2,(this.height-o*(n[1][1]+n[0][1]))/2];return t.scale(o).translate(s),this.chartEl.select("path.feature").datum(this.state_map).attr("d",e).style("stroke","url(#gradient_".concat(this.state,")")),this}},{key:"_updateStateName",value:function(){var t=D.states.abbrs[this.state];if(this.state.match(/\d/)){var e=this.state.match(/([A-Z]+)(\d)/),n=e[1],r=D.states.abbrs[n],a=D.formatting.ordinal(+e[2]);t="".concat(r,"’s ").concat(a," District")}else"ME"!==this.state&&"NE"!==this.state||(t+=" (statewide)");var i=".".concat(this.state.split("").map((function(t){return t.charCodeAt(0)})).join("")),o=(40*+i-20)*(+i[2]%2==0?-1:1),s="translate(".concat(this.width/2,", ").concat(this.height/2,") rotate (").concat(o," 0 0)");return this.chartEl.selectAll(".state-label").attr("transform",s).text(t),this.chartEl.selectAll(".ec-label").attr("transform",s),this}},{key:"updateState",value:function(t){this.state=t,this._processData()._updateDefs()._updateStateName()._updateMap()}}])&&S(n.prototype,a),i&&S(n,i),s}(a.a),T=n(34);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=n(22)(n(16),n(11)),z=n(21),W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(s,t);var e,n,a,i,o=(e=s,function(){var t,n=U(e);if(H()){var r=U(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return V(this,t)});function s(){return L(this,s),o.apply(this,arguments)}return n=s,(a=[{key:"init",value:function(){var t=this;I(U(s.prototype),"init",this).call(this),this.data=null,this.chart=null,this.buttonSelected="margin";var e=this.isMobile?"ec-margins-points-mobile":"ec-margins-points";Promise.all([this.appData.fetch("".concat(staticUrl,"/state_summary.json")),this.appData.fetch("".concat(staticUrl,"/states_electoral_votes.json")),this.appData.fetch("".concat(staticUrl,"/").concat(e,".json")),this.appData.fetch("".concat(staticUrl,"/us_states.json"))]).then((function(e){var n=R(e,4),a=n[0],i=n[1],o=n[2],c=n[3];z.each(a,(function(t){z.each(t.states,(function(t){t.ecVotes=z.find(i,(function(e){return e.state===t.state})).votes}))}));var l=r.a.select("#ec-margins").select(".btn-container");l.select("button#margin-mean").on("click",(function(){"margin"!==t.buttonSelected&&(t.buttonSelected="margin",t.chart.handleMarginButton())})),l.select("button#tipping").on("click",(function(){"tipping"!==t.buttonSelected&&(t.buttonSelected="tipping",t.chart.handleTippingButton(!0))})),t.data=a,t.points=o,t.mapData=c,t._drawChart(),I(U(s.prototype),"initEnd",t).call(t)}))}},{key:"onModelChange",value:function(t){I(U(s.prototype),"onModelChange",this).call(this,t),this.initialized&&(this._drawChart(),"tipping"===this.buttonSelected&&this.chart.handleTippingButton(!1),I(U(s.prototype),"onModelChangeEnd",this).call(this))}},{key:"_drawChart",value:function(){this.screenshot?this.tooltipChart=null:(r.a.select("#ec-margins-tooltip-map").style("height","120px"),this.tooltipChart=new C(this.data,"#ec-margins-tooltip-map",this.model,{state:"WV"},this.mapData),this.tooltipChart.init()),r.a.select("#ec-margins-legend").html("<img src=".concat(G.imgSrc("snake-legend.svg")," alt='snake legend', class='legend-img' />")),r.a.select("#ec-margins-chart").html(null),this.chart=new x(this.data,"#ec-margins-chart",this.model,{points:this.points,tooltip:this.tooltipChart}),this.chart.init()}}])&&B(n.prototype,a),i&&B(n,i),s}(T.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var r=n(34),a=n(0),i=n(28);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=n(21),v=n(16),m=n(74),y=n(27),g=n(77),b=n(73),w=new URLSearchParams(window.location.search),_=w.get("video"),x=w.get("mobile"),k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,t);var e,n=(e=r,function(){var t,n=d(e);if(f()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function r(t,e,a,i,o,c){var l;return s(this,r),(l=n.call(this,t,e,a)).states=i,l.simulationData=o,l.margin=a.margin,l.currRow=c,l.height=a.height||200,l.width=a.width||100,l.winner=l.simulationData.winner,l}return l(r,[{key:"init",value:function(){this._drawChartFrame()._drawMap()}},{key:"_colorMap",value:function(t,e){var n=this.simulationData.states[t];return e===n.winner||"no majority"===e?v.slugify(n.winner):"other"}},{key:"_drawMap",value:function(){var t=this;return this.svgEl.style("margin-top","".concat(-this.height/15,"px")),this.miniMap=this.chartEl.append("g").attr("class","map").attr("foo",this.winner),this.miniMap.append("g").attr("class","map").selectAll("path").data(this.states.features).enter().append("path").attr("d",(function(t){return t.properties.path})).attr("class",(function(e){return"US"===e.properties.name?"outline":t._colorMap(e.properties.name,t.winner)})),this.mapBounds=document.querySelector("g .map").getBBox(),this._drawWinnerText(this.winner),this}},{key:"_drawWinnerText",value:function(t){return this.parentEl.append("div").attr("class","map-text ".concat(v.slugify(t))).style("text-align","center").style("margin-top",this.isMobile?"-5px":"-15px").text("no majority"===t?"No majority!":"A ".concat(t," win!")),this}}]),r}(i.a),S=function(){function t(e,n,r,a,i){var o=this;s(this,t),this.data=e,this.parentEl=n,this.model=r,this.opts=a,this.mapData=i,this.margin=a.margin,this.isMobile=a.isMobile,this.video=_,this.mobileVideoParam=x,this.mobileVideo="1"===this.video&&"1"===this.mobileVideoParam,this.mapMarginVertical=this.isMobile?5:10,this.mapMarginHorizontal=this.isMobile?5:10,this.timeseries=a.timeseries,this.mapCurrentIndex=0,this._generateRotations(),window.addEventListener("resize",(function(){o.init()}))}return l(t,[{key:"init",value:function(){this.isMobile=window.innerWidth<767,this.numRows=this.mobileVideo?8:this.isMobile?3:4,this.numCols=this.mobileVideo||this.isMobile?3:6,this._processData()._setMapDimensions()._setProjection()._drawMultiples()._drawFivey()}},{key:"_updateChart",value:function(t){return this.model=t,this._drawMultiples(),this}},{key:"_generateRotations",value:function(){var t=this;return this.rotations={},p.pluck(this.data,"type").forEach((function(e){t.rotations[e]=p.map(p.range(25),(function(e){var n=t.isMobile&&[2,5].indexOf(e)>=0||!t.isMobile&&[5,9,15,21].indexOf(e)>=0,r=t.isMobile?t.numRows+5:t.numRows+(n?0:5),a=Math.random()*r;return a*=1===Math.floor(2*Math.random())?1:-1}))})),this}},{key:"_processData",value:function(){var t=this;this.chart_data=p.indexBy(this.data,"type");var e=this.isMobile?6:22;return Object.keys(this.chart_data).forEach((function(n){t.chart_data[n].chartSimulations=t.chart_data[n].simulations.slice(0,e).sort((function(t,e){return t.evs.Trump>e.evs.Trump?-1:t.evs.Trump<e.evs.Trump?1:0})).concat(t.chart_data[n].simulations.slice(e))})),this.latest={},this.timeseries.forEach((function(e){e.candidates.sort((function(t,e){return t.dates[0].winprob>e.dates[0].winprob?-1:1}));var n=e.candidates[0].candidate,r=e.candidates[0].dates[0].winprob;t.latest[e.type]={leader:n,winprob:r}})),this}},{key:"_setMapDimensions",value:function(){return this.mapHeight=document.querySelector("#lede").clientHeight/this.numRows-2*this.mapMarginHorizontal,this.mapWidth=document.querySelector("#lede").clientWidth/this.numCols-2*this.mapMarginVertical,this}},{key:"_setProjection",value:function(){this.states=m.feature(this.mapData,"states");var t=a.a.geoAlbersUsa().scale(1).translate([0,0]),e=a.a.geoPath().projection(t);this.path=e;var n=Object({0:Object({0:-.418743197681691,1:-.22353850659994334}),1:Object({0:.3612513098653094,1:.23003135990302526})}),r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=1/Math.max(r/this.mapWidth,i/this.mapHeight),s=[(this.mapWidth-o*(n[1][0]+n[0][0]))/2,(this.mapHeight-o*(n[1][1]+n[0][1]))/2];return t.scale(o).translate(s),this.states.features=this.states.features.map((function(t){return t.properties.path=e(t),t})),this}},{key:"_drawMap",value:function(t,e){this.currSimulationData=this.chart_data[this.model].chartSimulations[this.mapCurrentIndex];var n="map-".concat(this.mapCurrentIndex);this.rowEl.append("div").attr("id",n).attr("class","map-div").style("height","".concat(this.mapHeight,"px")).style("width","".concat(this.mapWidth,"px")),new k(this.data,"#".concat(n),{margin:{left:0,right:0,bottom:0,top:0},width:this.mapWidth,height:this.mapHeight},this.states,this.currSimulationData,e).init(),a.a.select("#".concat(n)).style("transform","rotate("+t+"deg)")}},{key:"_drawMultiples",value:function(){if(this.mapCurrentIndex=0,a.a.selectAll(".map-row").remove(),this.isMobile)for(var t=0;t<this.numRows;t++){var e="map-row-".concat(t);a.a.select(this.parentEl).append("div").attr("id",e).attr("class","map-row"),this.rowEl=a.a.select("#".concat(e));for(var n=0;n<this.numCols;n++)if(1===t&&0===n)this._drawHed();else{if(1===t)continue;this._drawMap(this.rotations[this.model][this.mapCurrentIndex],t),this.mapCurrentIndex++}}else for(var r=0;r<this.numRows;r++){var i="map-row-".concat(r);a.a.select(this.parentEl).append("div").attr("id",i).attr("class","map-row"),this.rowEl=a.a.select("#".concat(i));for(var o=this.mobileVideo?1:2,s=this.mobileVideo?3:1,c=this.mobileVideo?4:1,l=0;l<this.numCols;l++)if(l===o&&r===s)this._drawHed();else if(this.mobileVideo&&l===o&&r===c)this.rowEl.append("div").attr("class","hed-wrap").style("height","".concat(this.mapHeight,"px")).style("width","".concat(this.mapWidth,"px"));else{if(!this.mobileVideo&&3===l&&1===r)continue;this._drawMap(this.rotations[this.model][this.mapCurrentIndex],r),this.mapCurrentIndex++}this.mobileVideo&&r>=c&&this.rowEl.style("transform","translateY(-".concat(this.mapHeight,"px)"))}return this}},{key:"_getTimestampText",value:function(){var t=g.updated;return!isNaN(new Date(t).getTime())?new Date(t).getTime():parseInt(t,10)}},{key:"_drawHed",value:function(){a.a.select(".hed-wrap").remove(),a.a.select("#hed").remove(),this.hedWrap=this.rowEl.append("div").attr("class","hed-wrap").style("height","".concat(this.mobileVideo?2*this.mapHeight:this.mapHeight+(this.isMobile?5:0),"px")).style("width","".concat(this.mobileVideo?this.mapWidth:this.isMobile?3*this.mapWidth:2*this.mapWidth,"px")),this.hedDiv=this.hedWrap.append("div").attr("class","hed-div").style("width","".concat(this.mobileVideo?this.mapWidth:this.isMobile?3*this.mapWidth/1.6:2*this.mapWidth,"px")),this.hed=this.hedDiv.append("h1").attr("id","hed");var t=v.formatting.formatLeaderLabel(this.latest[this.model].winprob);return this.hed.append("span").attr("id","lede-cand").text("".concat(this.latest[this.model].leader," is ")).style("display","50"===t.type?"none":"inline"),this.hed.append("span").attr("id","lede-chance").attr("class","50"===t.type?"tossup":v.slugify(this.latest[this.model].leader)).text(t.value+" "),"50"!==t.type&&this.hed.append("span").attr("id","lede-end").text(y.lede.sentence),this.hedDiv.append("div").attr("id","hed-timestamp").text("Updated "+b().ago(this._getTimestampText())),this}},{key:"_drawFivey",value:function(){if(!this.isMobile&&!this.mobileVideo){this.fiveyDiv=14,this.fiveyParentDiv=a.a.select("#map-".concat(this.fiveyDiv));var t="waving left peek lede";return this.fiveyWrap=this.fiveyParentDiv.append("div").attr("class","fivey-wrap ".concat(t)),this.fiveyWrap.append("div").attr("class","fivey ".concat(t)),this.fiveyParentDiv.append("div").attr("class","fivey-wrap fivey-text-wrap ".concat(t)).append("div").attr("class","fivey-text ".concat(t)).text(y.clippy.lede),a.a.select(this.fiveyParentDiv.node().parentNode).style("z-index","2"),this}}}]),t}();function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=T(e);if(C()){var r=T(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return D(this,t)});function o(){return j(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){var t=this;E(T(o.prototype),"init",this).call(this),Promise.all([this.appData.fetch("".concat(staticUrl,"/us_simulations.json")),this.appData.fetch("".concat(staticUrl,"/us_map.json")),this.appData.fetch("".concat(staticUrl,"/us_timeseries.json"))]).then((function(e){var n={top:0,left:t.isMobile?10:40,bottom:t.isMobile?0:80,right:10};!t.isMobile&&document.body.clientWidth<=768&&(n={top:0,left:40,bottom:0,right:10});var r=e[0],a=e[1],i=e[2];t.data=r,t.mapData=a,t.ledeChart=new S(t.data,"#lede-chart",t.model,{x:{},y:{},margin:n,timeseries:i,isMobile:t.isMobile},t.mapData),t.ledeChart.init(),E(T(o.prototype),"initEnd",t).call(t)}))}},{key:"onModelChange",value:function(t){E(T(o.prototype),"onModelChange",this).call(this,t),this.initialized&&(this.ledeChart._updateChart(t),E(T(o.prototype),"onModelChangeEnd",this).call(this))}}])&&M(n.prototype,r),a&&M(n,a),o}(r.a)},function(t,e,n){var r=n(65);t.exports=function(t){var e,n="",a=t||{};return function(t,a,i,o){n=n+'\n<h2 class="tooltip-content-header"><span>'+(null==(e=t.ec_margins.tooltip.metric)?"":e)+'</span></h2>\n<div class="cand-val-container">',function(){var t=a;if("number"==typeof t.length)for(var i=0,s=t.length;i<s;i++){var c=t[i];const s=`width:${100/a.length}%`;n=n+"\n  <div"+(r.attr("class",r.classes(["cand-val",o.slugify(c.candidate)],[!1,!0]),!1,!0)+r.attr("style",r.style(s),!0,!0))+">\n    <p"+r.attr("class",r.classes(["cand",o.slugify(c.candidate)],[!1,!0]),!1,!0)+">"+(null==(e=c.candidate)?"":e)+"</p>\n    <p"+r.attr("class",r.classes(["val",o.slugify(c.candidate)],[!1,!0]),!1,!0)+">"+(null==(e=o.formatting.formatPercentage(c.voteshare.mean,1))?"":e)+"</p>\n  </div>"}else{s=0;for(var i in t){s++;c=t[i];const l=`width:${100/a.length}%`;n=n+"\n  <div"+(r.attr("class",r.classes(["cand-val",o.slugify(c.candidate)],[!1,!0]),!1,!0)+r.attr("style",r.style(l),!0,!0))+">\n    <p"+r.attr("class",r.classes(["cand",o.slugify(c.candidate)],[!1,!0]),!1,!0)+">"+(null==(e=c.candidate)?"":e)+"</p>\n    <p"+r.attr("class",r.classes(["val",o.slugify(c.candidate)],[!1,!0]),!1,!0)+">"+(null==(e=o.formatting.formatPercentage(c.voteshare.mean,1))?"":e)+"</p>\n  </div>"}}}.call(this);const s=""===i?"hidden":"";n=(n+="\n</div>")+"\n<div"+r.attr("class",r.classes(["footnote-cont",s],[!1,!0]),!1,!0)+'>\n  <p class="footnote">'+(null==(e=i)?"":e)+"</p>\n</div>"}.call(this,"archie"in a?a.archie:"undefined"!=typeof archie?archie:void 0,"cands"in a?a.cands:"undefined"!=typeof cands?cands:void 0,"footnote"in a?a.footnote:"undefined"!=typeof footnote?footnote:void 0,"utils"in a?a.utils:"undefined"!=typeof utils?utils:void 0),n}},,,function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i=/^https:\/\/github.com\/([\w-]+)\/([\w-]+)(?:\/(tree|blob)\/([\w-]+)\/(.*))?$/;function o(t){var e,n=r(t.match(i),6),a=(n[0],n[1]),o=n[2],s=n[3],c=n[4],l=n[5];if(c=c||"master",l=l?l.replace(/\/+$/,""):null)if("blob"===s)e="file";else{if("tree"!==s)throw new Error("error parsing url: ".concat(t));e="folder"}else e="repo";return{author:a,repo:o,branch:c,path:l,type:e}}function s(t){t.author,t.repo,t.branch;var e=function(t){var e=t.split("/");return decodeURI(e[e.length-1])}(t.path);c("https://projects.fivethirtyeight.com/data-webpage-data/datasets/".concat(e,".zip"))}function c(t){var e=document.createElement("a");e.href=t,e.download=t.substr(t.lastIndexOf("/")+1),document.body.appendChild(e),e.click()}t.exports={download:function(t){var e=o(t),n=e.author,r=e.repo,a=e.branch,i=e.path,l=e.type;switch(l){case"repo":return function(t){var e=t.author,n=t.repo,r=t.branch;c("https://github.com/".concat(e,"/").concat(n,"/archive/").concat(r,".zip"))}({author:n,repo:r,branch:a});case"folder":return s({author:n,repo:r,branch:a,path:i});default:throw new Error("download not implemented for type ".concat(l))}},parse:o}},function(t,e,n){var r=n(65);t.exports=function(t){var e,n="",a=t||{};return function(t,a,i,o,s,c,l,u){if(n=n+'\n<div class="header-cont">\n  <h2 class="state">'+(null==(e=u)?"":e)+"</h2>\n  <p"+r.attr("class",r.classes(["lean",s,o],[!1,!0,!0]),!1,!0)+">"+(null==(e=c)?"":e)+'</p>\n</div>\n<div class="tooltip-content">',a){n=n+'\n  <table>\n    <tr>\n      <th class="cand">'+(null==(e=t.table.cand_header)?"":e)+'</th>\n      <th class="winprob">'+(null==(e=t.table.winprob_header)?"":e)+"</th>\n    </tr>",function(){var t=a;if("number"==typeof t.length)for(var o=0,s=t.length;o<s;o++){var c=t[o];n=n+'\n    <tr>\n      <td class="cand"><span'+r.attr("class",r.classes(["incumb",c.party,c.candidate,c.incumb],[!1,!0,!0,!0]),!1,!0)+">i</span>"+(null==(e=c.fullname)?"":e),"O"!==c.party&&l.abbreviatePartyFromCode(c.party)&&(n=n+"<span"+r.attr("class",r.classes(["party",c.party,c.candidate],[!1,!0,!0]),!1,!0)+">("+(null==(e=l.abbreviatePartyFromCode(c.party))?"":e)+")</span>"),n=n+"\n      </td>\n      <td"+r.attr("class",r.classes(["winprob",c.party,c.candidate],[!1,!0,!0]),!1,!0)+">"+(null==(e=i.probToFrac(c.winprob))?"":e)+"</td>\n    </tr>"}else{s=0;for(var o in t){s++;c=t[o];n=n+'\n    <tr>\n      <td class="cand"><span'+r.attr("class",r.classes(["incumb",c.party,c.candidate,c.incumb],[!1,!0,!0,!0]),!1,!0)+">i</span>"+(null==(e=c.fullname)?"":e),"O"!==c.party&&l.abbreviatePartyFromCode(c.party)&&(n=n+"<span"+r.attr("class",r.classes(["party",c.party,c.candidate],[!1,!0,!0]),!1,!0)+">("+(null==(e=l.abbreviatePartyFromCode(c.party))?"":e)+")</span>"),n=n+"\n      </td>\n      <td"+r.attr("class",r.classes(["winprob",c.party,c.candidate],[!1,!0,!0]),!1,!0)+">"+(null==(e=i.probToFrac(c.winprob))?"":e)+"</td>\n    </tr>"}}}.call(this),n=n+'\n  </table>\n  <div class="voteshare-viz-cont">\n    <h2>'+(null==(e=t.voteshare_header)?"":e)+'</h2>\n    <div class="voteshare-viz">',function(){var t=a;if("number"==typeof t.length)for(var o=0,s=t.length;o<s;o++){var c=t[o];n+='\n      <div class="voteshare-row">';const a=c.voteshare.lo+"%",s=+c.voteshare.hi-+c.voteshare.lo+"%",l=c.voteshare.mean+"%";if(n=n+"\n        <div"+(r.attr("class",r.classes(["voteshare-shape","voteshare-margin",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:a,width:s}),!0,!0))+">&nbsp;</div>\n        <div"+(r.attr("class",r.classes(["voteshare-shape","voteshare-mean",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:l}),!0,!0))+">&nbsp;</div>",c.voteshare.hi<80){const t=+c.voteshare.hi+1+"%";n=n+"\n        <div"+(r.attr("class",r.classes(["voteshare-text","bg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:t}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>\n        <div"+(r.attr("class",r.classes(["voteshare-text","fg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:t}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>"}else{const t=+c.voteshare.lo-1+"%";n=n+"\n        <div"+(r.attr("class",r.classes(["voteshare-text","bg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({width:t,"text-align":"right"}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>\n        <div"+(r.attr("class",r.classes(["voteshare-text","fg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({width:t,"text-align":"right"}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>"}n+="\n      </div>"}else{s=0;for(var o in t){s++;c=t[o];n+='\n      <div class="voteshare-row">';const a=c.voteshare.lo+"%",l=+c.voteshare.hi-+c.voteshare.lo+"%",u=c.voteshare.mean+"%";if(n=n+"\n        <div"+(r.attr("class",r.classes(["voteshare-shape","voteshare-margin",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:a,width:l}),!0,!0))+">&nbsp;</div>\n        <div"+(r.attr("class",r.classes(["voteshare-shape","voteshare-mean",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:u}),!0,!0))+">&nbsp;</div>",c.voteshare.hi<80){const t=+c.voteshare.hi+1+"%";n=n+"\n        <div"+(r.attr("class",r.classes(["voteshare-text","bg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:t}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>\n        <div"+(r.attr("class",r.classes(["voteshare-text","fg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({left:t}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>"}else{const t=+c.voteshare.lo-1+"%";n=n+"\n        <div"+(r.attr("class",r.classes(["voteshare-text","bg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({width:t,"text-align":"right"}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>\n        <div"+(r.attr("class",r.classes(["voteshare-text","fg",c.party,c.candidate],[!1,!1,!0,!0]),!1,!0)+r.attr("style",r.style({width:t,"text-align":"right"}),!0,!0))+">"+(null==(e=i.formatPercentage(c.voteshare.mean,1))?"":e)+"</div>"}n+="\n      </div>"}}}.call(this);const o=22*a.length+"px";n=n+'\n      <div class="voteshare-row axis"'+r.attr("style",r.style({height:o}),!0,!0)+'>\n        <div class="axis-tick"></div>\n        <div class="axis-tick"></div>\n        <div class="axis-tick"></div>\n        <div class="axis-tick"></div>\n        <div class="axis-tick"></div>\n      </div>\n      <div class="voteshare-row axis-ticks">\n        <div class="axis-tick center">20</div>\n        <div class="axis-tick center">40</div>\n        <div class="axis-tick center">60</div>\n        <div class="axis-tick center">80</div>\n        <div class="axis-tick">100</div>\n        <div class="axis-tick absolute">0%</div>\n      </div>\n    </div>\n  </div>'}n+="\n</div>"}.call(this,"archie"in a?a.archie:"undefined"!=typeof archie?archie:void 0,"candidates"in a?a.candidates:"undefined"!=typeof candidates?candidates:void 0,"formatting"in a?a.formatting:"undefined"!=typeof formatting?formatting:void 0,"leader"in a?a.leader:"undefined"!=typeof leader?leader:void 0,"leanClass"in a?a.leanClass:"undefined"!=typeof leanClass?leanClass:void 0,"leanText"in a?a.leanText:"undefined"!=typeof leanText?leanText:void 0,"parties"in a?a.parties:"undefined"!=typeof parties?parties:void 0,"state"in a?a.state:"undefined"!=typeof state?state:void 0),n}},function(t){t.exports=JSON.parse('{"shortname":"2020-general-forecast","publishtime":"2020-08-12 06:30","title":"2020 Election Forecast","description":"Latest forecast of the 2020 presidential election between President Donald Trump and Joe Biden by Nate Silver’s FiveThirtyEight","author":"Nate Silver","authorurl":"https://fivethirtyeight.com/contributors/nate-silver/","twittertext":"Who will win the 2020 election? FiveThirtyEight\'s latest presidential forecast: ","twittercreator":"NateSilver538","twittercreatorid":"16017475","shareimage":"https://fivethirtyeight.com/wp-content/uploads/2020/08/2020-FTE-PresPromo-16x9-sized.jpg","wordpressid":"277084","wordpresssection":"politics","primarytag":"politics","newskeywords":"","url":"https://projects.fivethirtyeight.com/2020-election-forecast/","shorturl":"","recircgroup":"","recircimage":"","recirccustomtitle":"","seogoals":"2020 Election, Election Forecasts, Joe Biden, Donald Trump, Nate Silver"}')},function(t){t.exports=JSON.parse('{"a":"2020-general-forecast"}')},function(t,e,n){t.exports=n(139)},function(t,e,n){var r=n(65);t.exports=function(t){var e,n="",a=t||{};return function(t,a,i,o,s){n+='\n<table>\n  <tr class="axis">\n    <td class="special"></td>\n    <td class="state"></td>\n    <td class="header-legend" colspan="4">',"senate"==i&&(n=n+'\n      <div class="races-legend-container special-container"> <img class="special"'+r.attr("src",s.imgSrc("special-star.svg"),!0,!0)+' alt="Special Election Legend">\n        <div class="legend-label">'+(null==(e=a.race_list.special)?"":e)+"</div>\n      </div>"),n=n+'\n      <div class="races-legend-container incumbent-container"> <img class="incumb"'+r.attr("src",s.imgSrc("race-list-joint-legend.svg"),!0,!0)+' alt="Incumbent Legend">\n        <div class="legend-label">Incumbent candidate/controlling party</div>\n      </div>\n    </td>\n    <td class="margin-chart"></td>\n    <td class="odds"></td>\n  </tr>',function(){var a=o;if("number"==typeof a.length)for(var c=0,l=a.length;c<l;c++){var u=a[c];n=n+"\n  <tr"+(r.attr("data-race",u.race,!0,!0)+r.attr("data-special",!0===u.special?"special":"",!0,!0))+">";const[o,l]=u.race.split("-"),h=t.max(t.pluck(u.race_list_runoff_candidates,"incumbent")),f=h?"hide-desktop":"",d=h?"i":"&nbsp;",p=1===u.race_list_runoff_candidates.length&&"D"===u.race_list_runoff_candidates[0].party;n+='\n    <td class="special"> ',!0===u.special&&(n=n+'<img class="special special-race-icon"'+r.attr("src",s.imgSrc("special-star.svg"),!0,!0)+' alt="icon indicating race is a special election">'),n=n+"<span"+r.attr("class",r.classes(["incumbent",u.special?"with-special":"",f,u.incumbParty],[!1,!0,!0,!0]),!1,!0)+">"+(null==(e=d)?"":e)+"</span>\n    </td>\n    <td"+r.attr("class",r.classes(["house"===i?"district":"state",u.incumbParty],[!0,!0]),!1,!0)+">"+r.escape(null==(e=o)?"":e),"house"===i&&(n+=r.escape(null==(e=s.states.atLarge[o]?"":"-"+l)?"":e)),n+='\n    </td>\n    <td class="candidate">',u.race_list_runoff_candidates[0]&&!p&&(n=n+"<span"+r.attr("class",r.classes([["candidate-name",u.race_list_runoff_candidates[0].party]],[!0]),!1,!0)+">"+r.escape(null==(e=u.race_list_runoff_candidates[0].short)?"":e)+"</span>"),n+='\n    </td>\n    <td class="candidate"> ',p?n=n+"<span"+r.attr("class",r.classes([["candidate-name",u.race_list_runoff_candidates[0].party]],[!0]),!1,!0)+">"+r.escape(null==(e=u.race_list_runoff_candidates[0].short)?"":e)+"</span>":u.race_list_runoff_candidates[1]&&(n=n+"<span"+r.attr("class",r.classes([["candidate-name",u.race_list_runoff_candidates[1].party]],[!0]),!1,!0)+">"+r.escape(null==(e=u.race_list_runoff_candidates[1].short)?"":e)+"</span>"),n=n+'\n    </td>\n    <td class="margin-chart"'+r.attr("data-margin-mean",u.margin.mean,!0,!0)+r.attr("data-margin-hi",u.margin.hi,!0,!0)+r.attr("data-margin-lo",u.margin.lo,!0,!0)+'> </td>\n    <td class="odds">';const v=u.race_list_runoff_candidates.sort((t,e)=>t.winprob>e.winprob?-1:1),m=s.house.topTwoSameParty(v);n=n+"<span"+r.attr("class",r.classes([["candidate-odds",v[0].party]],[!0]),!1,!0)+">"+r.escape(null==(e=m?"100 in 100":s.formatting.probToFrac(v[0].winprob))?"":e)+"</span>\n    </td>\n  </tr>"}else{l=0;for(var c in a){l++;u=a[c];n=n+"\n  <tr"+(r.attr("data-race",u.race,!0,!0)+r.attr("data-special",!0===u.special?"special":"",!0,!0))+">";const[o,h]=u.race.split("-"),f=t.max(t.pluck(u.race_list_runoff_candidates,"incumbent")),d=f?"hide-desktop":"",p=f?"i":"&nbsp;",v=1===u.race_list_runoff_candidates.length&&"D"===u.race_list_runoff_candidates[0].party;n+='\n    <td class="special"> ',!0===u.special&&(n=n+'<img class="special special-race-icon"'+r.attr("src",s.imgSrc("special-star.svg"),!0,!0)+' alt="icon indicating race is a special election">'),n=n+"<span"+r.attr("class",r.classes(["incumbent",u.special?"with-special":"",d,u.incumbParty],[!1,!0,!0,!0]),!1,!0)+">"+(null==(e=p)?"":e)+"</span>\n    </td>\n    <td"+r.attr("class",r.classes(["house"===i?"district":"state",u.incumbParty],[!0,!0]),!1,!0)+">"+r.escape(null==(e=o)?"":e),"house"===i&&(n+=r.escape(null==(e=s.states.atLarge[o]?"":"-"+h)?"":e)),n+='\n    </td>\n    <td class="candidate">',u.race_list_runoff_candidates[0]&&!v&&(n=n+"<span"+r.attr("class",r.classes([["candidate-name",u.race_list_runoff_candidates[0].party]],[!0]),!1,!0)+">"+r.escape(null==(e=u.race_list_runoff_candidates[0].short)?"":e)+"</span>"),n+='\n    </td>\n    <td class="candidate"> ',v?n=n+"<span"+r.attr("class",r.classes([["candidate-name",u.race_list_runoff_candidates[0].party]],[!0]),!1,!0)+">"+r.escape(null==(e=u.race_list_runoff_candidates[0].short)?"":e)+"</span>":u.race_list_runoff_candidates[1]&&(n=n+"<span"+r.attr("class",r.classes([["candidate-name",u.race_list_runoff_candidates[1].party]],[!0]),!1,!0)+">"+r.escape(null==(e=u.race_list_runoff_candidates[1].short)?"":e)+"</span>"),n=n+'\n    </td>\n    <td class="margin-chart"'+r.attr("data-margin-mean",u.margin.mean,!0,!0)+r.attr("data-margin-hi",u.margin.hi,!0,!0)+r.attr("data-margin-lo",u.margin.lo,!0,!0)+'> </td>\n    <td class="odds">';const m=u.race_list_runoff_candidates.sort((t,e)=>t.winprob>e.winprob?-1:1),y=s.house.topTwoSameParty(m);n=n+"<span"+r.attr("class",r.classes([["candidate-odds",m[0].party]],[!0]),!1,!0)+">"+r.escape(null==(e=y?"100 in 100":s.formatting.probToFrac(m[0].winprob))?"":e)+"</span>\n    </td>\n  </tr>"}}}.call(this),n+="\n</table>"}.call(this,"_"in a?a._:"undefined"!=typeof _?_:void 0,"archie"in a?a.archie:"undefined"!=typeof archie?archie:void 0,"chamber"in a?a.chamber:"undefined"!=typeof chamber?chamber:void 0,"races"in a?a.races:"undefined"!=typeof races?races:void 0,"utils"in a?a.utils:"undefined"!=typeof utils?utils:void 0),n}},function(t,e,n){n(65);t.exports=function(t){var e,n="",r=t||{};return function(t,r,a){n=n+'\n<p class="state-chamber-nav-title"><span>'+(null==(e=r)?"":e)+'</span></p>\n<p class="text">'+(null==(e=a)?"":e)+'</p>\n<button class="border-gradient btn-cta">'+(null==(e=t)?"":e)+"</button>"}.call(this,"button"in r?r.button:"undefined"!=typeof button?button:void 0,"hed"in r?r.hed:"undefined"!=typeof hed?hed:void 0,"p"in r?r.p:"undefined"!=typeof p?p:void 0),n}},function(t,e,n){var r=n(93),a=n(94),i={source:[],items:8,menu:'<ul class="typeahead hidden"></ul>',item:'<li><a href="#"></a></li>',minLength:1,autoselect:!0},o=function t(e,n){if(!(this instanceof t))return new t(e,n);this.element=a(e),this.options=r({},i,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.menu=a(this.options.menu),a(document.body).append(this.menu),this.source=this.options.source,this.shown=!1,this.listen()},s=o.prototype;s.constructor=o,s.select=function(){var t=this.menu.find(".active").attr("data-value");return this.element.value(this.updater(t)).emit("change"),this.hide()},s.updater=function(t){return t},s.show=function(){for(var t=this.element.offset(),e=r({},t,{height:this.element.outerHeight()}),n=0,a=this.element[0];a=a.parentElement;){var i=a.tagName.toLowerCase();"html"!==i&&"body"!==i&&(n+=a.scrollTop)}var o=e.top+e.height-n+"px",s="auto",c=e.left+"px";return"above"===this.options.position?(o="auto",s=document.body.clientHeight-e.top+3):"right"===this.options.position&&(o=parseInt(o.split("px")[0],10)-this.element.outerHeight()+"px",c=parseInt(c.split("px")[0],10)+this.element.outerWidth()+"px"),this.menu.css({top:o,bottom:s,left:c}),this.menu.removeClass("hidden"),this.shown=!0,this},s.hide=function(){return this.menu.addClass("hidden"),this.shown=!1,this},s.lookup=function(t){return this.query=this.element.value(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(this.source instanceof Function?this.source(this.query,this.process.bind(this)):this.process(this.source),this)},s.process=function(t){return t=t.filter(this.matcher.bind(this)),(t=this.sorter(t)).length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},s.matcher=function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},s.sorter=function(t){for(var e,n=[],r=[],a=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?r.push(e):a.push(e):n.push(e);return n.concat(r,a)},s.highlighter=function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),(function(t,e){return"<strong>"+e+"</strong>"}))},s.render=function(t){var e=this;return t=t.map((function(t){var n=a(e.options.item);return n.attr("data-value",t).find("a").html(e.highlighter(t)),n})),e.options.autoselect&&t[0].addClass("active"),e.menu.empty(),t.forEach((function(t){e.menu.append(t)})),this},s.next=function(t){var e=this.menu.find(".active").removeClass("active").next();e.length||(e=this.menu.find("li").first()),e.addClass("active")},s.prev=function(t){var e=this.menu.find(".active").removeClass("active").prev();e.length||(e=this.menu.find("li").last()),e.addClass("active")},s.listen=function(){this.element.on("blur",this.blur.bind(this)).on("keypress",this.keypress.bind(this)).on("keyup",this.keyup.bind(this)).on("keydown",this.keydown.bind(this)),this.menu.on("click",this.click.bind(this)).on("mouseenter","li",this.mouseenter.bind(this))},s.move=function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},s.keydown=function(t){this.suppressKeyPressRepeat=[40,38,9,13,27].indexOf(t.keyCode)>=0,this.move(t)},s.keypress=function(t){this.suppressKeyPressRepeat||this.move(t)},s.keyup=function(t){switch(t.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},s.blur=function(t){var e=this;setTimeout((function(){e.hide()}),150)},s.click=function(t){t.stopPropagation(),t.preventDefault(),this.select()},s.mouseenter=function(t){this.menu.find(".active").removeClass("active"),a(t.currentTarget).addClass("active")},t.exports=o},function(t,e){t.exports=function(t){for(var e=1;e<arguments.length;e++)for(var n=arguments[e],r=Object.keys(n),a=0;a<r.length;a++){var i=r[a];t[i]=n[i]}return t}},function(t,e,n){var r=n(95),a=n(96),i=n(97),o=n(98),s=n(101);function c(t,e){if(!t)throw new Error("no selector specified");if(Array.isArray(t))return new l(t);var n=e;if(n?n instanceof l&&(n=e[0]):n=document,t instanceof NodeList){for(var a=[],i=0;i<t.length;++i)a.push(t[i]);return new l(a,t)}return t instanceof l?t:t.nodeName?new l([t]):("string"==typeof t&&(t=t.trim()),"<"==t.charAt(0)?c(r(t)):"string"==typeof t?c(n.querySelectorAll(t),t):void 0)}function l(t,e){Array.prototype.push.apply(this,t),this.selector=e}(t.exports=c).List=l;var u=l.prototype;u.attr=function(t,e){return void 0===e?this[0].getAttribute(t):(this[0].setAttribute(t,e),this)},u.removeAttr=function(t){return this[0].removeAttribute(t),this},u.data=function(t,e){return this.attr("data-"+t,e)},u.clone=function(){for(var t=[],e=0,n=this.length;e<n;++e)t.push(this[e].cloneNode(!0));return new l(t)},u.at=function(t){return new l([this[t]],this.selector)},u.first=function(){return new l([this[0]],this.selector)},u.last=function(){return new l([this[this.length-1]],this.selector)},u.length=function(){return this.length},u.text=function(t){if(t)return this[0].textContent=t,this;for(var e="",n=0;n<this.length;++n)e+=this[n].textContent;return e},u.html=function(t){var e=this[0];if(t){if("string"!=typeof t)throw new Error(".html() requires a string");return e.innerHTML=t,this}return e.innerHTML},u.hide=function(){return this.forEach((function(t){var e=t.style.display;e&&t.setAttribute("data-olddisplay",e),t.style.display="none"})),this},u.show=function(){return this.forEach((function(t){var e=t.getAttribute("data-olddisplay");t.removeAttribute("data-olddisplay"),e&&"none"!==e||(e=""),t.style.display=e})),this},u.on=function(t,e,n,r){if("string"==typeof e){var a=this[0],s=function(t){var r=t.target;do{if(i(r,e)){var o=new function(t){for(var e in t)this[e]=t[e]}(t);return o.currentTarget=r,n.call(r,o)}r=r.parentElement}while(r&&r!==a)};"mouseenter"===t&&(t="mouseover");for(var c=0;c<this.length;++c)n._delegate=s,o.bind(this[c],t,s,r);return this}r=n,n=e;for(c=0;c<this.length;++c)o.bind(this[c],t,n,r);return this},u.off=function(t,e,n,r){if("string"==typeof e){for(var a=0;a<this.length;++a)delegate.unbind(this[a],t,n._delegate,r);return this}r=n,n=e;for(a=0;a<this.length;++a)o.unbind(this[a],t,n,r);return this},u.each=function(t){for(var e=0;e<this.length;++e)t(new l([this[e]],this.selector),e);return this},u.forEach=function(t){return Array.prototype.forEach.call(this,t),this},u.map=function(t){return Array.prototype.map.call(this,t)},u.select=function(){for(var t=0;t<this.length;++t){this[t].select()}return this},u.filter=function(t){var e=Array.prototype.filter.call(this,(function(e){return t(new l([e],this.selector))}));return new l(e,this.selector)},u.value=function(t){var e=this[0];return t?(e.value=t,this):e.value},u.offset=function(){var t=this[0],e=0,n=0;if(t.offsetParent)do{e+=t.offsetLeft,n+=t.offsetTop}while(t=t.offsetParent);return{left:e,top:n}},u.position=function(){var t=this[0];return{top:t.offsetTop,left:t.offsetLeft}},u.outerHeight=function(){return this[0].offsetHeight},u.innerHeight=function(){return this[0].clientHeight},u.contentHeight=function(){var t=window.getComputedStyle(this[0],null),e=t.getPropertyValue("padding-top").replace("px","")-0,n=t.getPropertyValue("padding-bottom").replace("px","")-0;return this.innerHeight()-e-n},u.scrollHeight=function(){return this[0].scrollHeight},u.outerWidth=function(){return this[0].offsetWidth},u.innerWidth=function(){return this[0].clientWidth},u.contentWidth=function(){var t=window.getComputedStyle(this[0],null),e=t.getPropertyValue("padding-left").replace("px","")-0,n=t.getPropertyValue("padding-right").replace("px","")-0;return this.innerWidth()-e-n},u.scrollWidth=function(){return this[0].scrollWidth},u.addClass=function(t){for(var e,n=0;n<this.length;++n)(e=this[n])._classes=e._classes||a(e),e._classes.add(t);return this},u.removeClass=function(t){for(var e,n=0;n<this.length;++n)(e=this[n])._classes=e._classes||a(e),e._classes.remove(t);return this},u.toggleClass=function(t){for(var e,n=0;n<this.length;++n)(e=this[n])._classes=e._classes||a(e),e._classes.toggle(t);return this},u.hasClass=function(t){for(var e,n=0;n<this.length;++n)if((e=this[n])._classes=e._classes||a(e),e._classes.has(t))return!0;return!1},u.css=function(t,e){if(t instanceof Object)for(var n in t)this.setStyle(n,t[n]);return 2==arguments.length?this.setStyle(t,e):this.getStyle(t)},u.setStyle=function(t,e){for(var n=0;n<this.length;++n)this[n].style[t]=e;return this},u.getStyle=function(t){var e=this[0];if(e)return e.style[t]},u.find=function(t){return c(t,this)},u.next=function(){for(var t=[],e=0;e<this.length;++e){var n=this[e].nextElementSibling;n&&t.push(n)}return new l(t)},u.prev=function(){for(var t=[],e=0;e<this.length;++e){var n=this[e].previousElementSibling;n&&t.push(n)}return new l(t)},u.emit=function(t,e){return o.emit(this[0],t,e),this},u.parent=function(){for(var t=[],e=0;e<this.length;++e)t.push(this[e].parentNode);return new l(t)},u.prepend=function(t){for(var e=0;e<this.length;++e)s.prepend(this[e],c(t));return this},u.append=function(t){for(var e=0;e<this.length;++e)s.append(this[e],c(t));return this},u.before=function(t){for(var e=0;e<this.length;++e)s.before(this[e],c(t));return this},u.after=function(t){for(var e=0;e<this.length;++e)s.after(this[e],c(t));return this},u.remove=function(){for(var t=0;t<this.length;++t)s.remove(this[t])},u.replace=function(t){for(var e=0;e<this.length;++e)s.replace(this[e],c(t));return this},u.empty=function(){for(var t=0;t<this.length;++t)s.empty(this[t]);return this}},function(t,e){var n={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],colgroup:[1,"<table>","</table>"],caption:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};t.exports=function(t){if("string"!=typeof t)throw new TypeError("String expected");var e=/<([\w:]+)/.exec(t);if(!e)throw new Error("No elements were generated.");var r=e[1];if("body"==r)return(a=document.createElement("html")).innerHTML=t,[a.removeChild(a.lastChild)];var a,i=n[r]||n._default,o=i[0],s=i[1],c=i[2];for((a=document.createElement("div")).innerHTML=s+t+c;o--;)a=a.lastChild;var l=[],u=a.firstChild;do{l.push(u)}while(u=u.nextElementSibling);for(var h=0;h<l.length;++h)a.removeChild(l[h]);return l}},function(t,e){var n=/\s+/;function r(t){this.el=t,this.list=t.classList}t.exports=function(t){return new r(t)},r.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~e.indexOf(t)||e.push(t),this.el.className=e.join(" "),this},r.prototype.remove=function(t){if(this.list)return this.list.remove(t),this;var e=this.array(),n=e.indexOf(t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},r.prototype.toggle=function(t){return this.list?(this.list.toggle(t),this):this.has(t)?this.remove(t):this.add(t)},r.prototype.array=function(){var t=this.el.className.split(n);return""===t[0]&&t.pop(),t},r.prototype.has=function(t){return this.list?this.list.contains(t):!!~this.array().indexOf(t)}},function(t,e){var n=Element.prototype,r=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;t.exports=function(t,e){if(r)return r.call(t,e);for(var n=t.parentNode.querySelectorAll(e),a=0;a<n.length;++a)if(n[a]==t)return!0;return!1}},function(t,e,n){e.bind=function(t,e,n,r){return t.addEventListener?t.addEventListener(e,n,r||!1):t.attachEvent("on"+e,n),n},e.unbind=function(t,e,n,r){return t.removeEventListener?t.removeEventListener(e,n,r||!1):t.detachEvent("on"+e,n),n},e.emit=function(t,e,n){n=n||{};var a=i(e),o=document.createEvent(a+"s"),s="function"==typeof o["init"+a]?"init"+a:"initEvent",c=r[s],l=[],u={};n.type=e;for(var h=0;h<c.length;++h){var f=n[d=c[h]];void 0===f&&(f=o[d]),l.push(f)}for(var d in o[s].apply(o,l),n)u[d]||(o[d]=n[d]);return t.dispatchEvent(o)};var r=n(99),a=n(100),i=function(){var t={};for(var e in a)for(var n=a[e],r=0;r<n.length;r++)t[n[r]]=e;return function(e){return t[e]||"Event"}}()},function(t){t.exports=JSON.parse('{"initEvent":["type","bubbles","cancelable"],"initUIEvent":["type","bubbles","cancelable","view","detail"],"initMouseEvent":["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],"initMutationEvent":["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],"initKeyEvent":["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}')},function(t){t.exports=JSON.parse('{"MouseEvent":["click","mousedown","mouseup","mouseover","mousemove","mouseout"],"KeyEvent":["keydown","keyup","keypress"],"MutationEvent":["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],"HTMLEvent":["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],"UIEvent":["DOMFocusIn","DOMFocusOut","DOMActivate"]}')},function(t,e){function n(t){for(var e=document.createDocumentFragment(),n=0;n<t.length;++n)e.appendChild(t[n]);return e}t.exports.remove=function(t){if(t.parentNode)return t.parentNode.removeChild(t)},t.exports.replace=function(t,e){if(t.parentNode)return t.parentNode.replaceChild(n(e),t)},t.exports.prepend=function(t,e){return t.insertBefore(n(e),t.firstChild)},t.exports.append=function(t,e){document.createDocumentFragment();return t.appendChild(n(e))},t.exports.after=function(t,e){if(t.parentNode)return t.nextSilbling?t.parentNode.insertBefore(n(e),t.nextSilbling):t.parentNode.appendChild(n(e))},t.exports.before=function(t,e){if(t.parentNode)return t.parentNode.insertBefore(n(e),t)},t.exports.empty=function(t){t.innerHTML=""}},function(t){t.exports=JSON.parse('{"frozen":true}')},function(t){t.exports=JSON.parse('{"editorial_recirc":{"title":"Latest news","timestamp":"2020-11-03","p":"Our 2020 forecasts — presidential, Senate, House — are all now officially frozen, meaning we won’t be ingesting any new polls or updating the odds in any race. Instead, follow along <a href=\\"https://fivethirtyeight.com/live-blog/2020-election-results-coverage/\\">on our Election Day Live blog</a> as we track results in real-time. At the end of a loooooong campaign, here’s where we stand: <a href=\\"https://fivethirtyeight.com/features/final-2020-presidential-election-forecast/\\">Joe Biden is favored to beat President Trump</a> (though Trump still has a 1-in-10 chance); <a href=\\"https://fivethirtyeight.com/features/final-2020-senate-forecast/\\">Democrats have a 3-in-4 shot at taking back the Senate</a>; and the <a href=\\"https://fivethirtyeight.com/features/final-2020-house-forecast/\\">House will most likely remain under Democratic control</a> (Democrats might even expand their majority by a few seats). The big picture is clear: The <a href=\\"https://projects.fivethirtyeight.com/congress-generic-ballot-polls/\\">overall electoral environment favors Democrats</a>, which is one reason they have decent odds of controlling the presidency, Senate and House (a 72 percent chance, according to our forecast). Of course, there’s always the chance of a polling error, which tends to be <a href=\\"https://fivethirtyeight.com/features/why-fivethirtyeight-gave-trump-a-better-chance-than-almost-anyone-else/\\">correlated from state to state</a> when it happens. Trump <a href=\\"https://fivethirtyeight.com/features/trump-can-still-win-but-the-polls-would-have-to-be-off-by-way-more-than-in-2016/\\">needs a bigger-than-normal error</a> in his favor, but the real possibility that polls are underestimating Trump’s support is why he still has <a href=\\"https://fivethirtyeight.com/features/im-here-to-remind-you-that-trump-can-still-win/\\">a path to win reelection</a>. A 10 percent chance of winning is not a zero percent chance. In fact, that is roughly the same odds that it’s raining in downtown Los Angeles. And it <i>does</i> rain there. (Downtown L.A. has <a href=\\"https://weather.com/science/weather-explainers/news/los-angeles-rain-why-its-a-big-deal\\">about 36 rainy days per year</a>, or about a 1-in-10 shot of a rainy day.)","ul":["According to our final presidential forecast, Pennsylvania is the most likely tipping-point state, and a lot of Biden’s chances in the Electoral College hinge on what happens in the Keystone State. He leads Trump there <a href=\\"https://projects.fivethirtyeight.com/polls/president-general/pennsylvania/\\">by about 5 points in our polling average</a>, but it’s not as large a margin as Biden might like. Last week, we gamed out what would happen <a href=\\"https://fivethirtyeight.com/features/is-joe-biden-toast-if-he-loses-pennsylvania/\\">if Biden lost Pennsylvania but won other Midwestern states like Wisconsin</a>. (TL;DR there’s no clear Plan B for Biden.) Want to run through your own hypothetical scenarios? You now can with our <a href=\\"https://projects.fivethirtyeight.com/trump-biden-election-map/\\">interactive forecast</a> that lets you explore the ways each candidate could win. We’re hoping to use this tool ourselves on election night to better understand Biden and Trump’s paths to victory, especially if the outstanding vote takes a while to be counted.","Unless Trump or Biden has a <i>really</i> good night on Nov. 3, it’s pretty unlikely, though, that either of them <a href=\\"https://fivethirtyeight.com/features/both-candidates-might-fall-short-of-270-electoral-votes-on-election-night-but-how-close-might-they-get/\\">will hit the 270 electoral votes needed to win</a> by the end of the night. That doesn’t necessarily mean, though, that we won’t have a pretty good idea of who won. It’s all going to come down to how close some of the key battleground races are and whether a representative share of the vote can be reported, which won’t always be possible given the challenges of the pandemic. We’re tracking when <a href=\\"https://projects.fivethirtyeight.com/election-results-timing/\\">we expect results in every state</a>."],"recirc_title":"2020 Election Coverage","article_links":[{"title":"How To Vote In The 2020 Election","author":"Nathaniel Rakich, Maya Sweedler and Julia Wolfe","link":"https://projects.fivethirtyeight.com/how-to-vote-2020/"},{"title":"When To Expect The Results In Every State","author":"Nathaniel Rakich and Elena Mejía","link":"https://projects.fivethirtyeight.com/election-results-timing/"}]}}')},function(t,e,n){var r=n(65);t.exports=function(t){var e,n="",a={},i=t||{};return function(t,i,o,s,c,l,u,h,f){var d=[];if("president"===l)if("us"==h){if(a["editorial-recirc"]=e=function(t,a,i){this&&this.block,this&&this.attributes;n+="\n",n=(n+=d.join(""))+'<div class="editorial-recirc-element"><a'+r.attr("href",i,!0,!0)+">\n    ",n=(n+=d.join(""))+'<p class="article-title">'+(null==(e=t)?"":e)+"</p>\n    ",n=(n+=d.join(""))+'<p class="author">By '+(null==(e=a)?"":e)+"</p></a></div>"},n=n+'\n<div class="module-fivey-cont">\n  <div class="module editorial-recirc" id="editorial-recirc">\n    <div class="top-container">\n      <div class="title-container">\n        <h3>'+(null==(e=s.editorial_recirc.title)?"":e)+'</h3>\n        <p class="timestamp">'+(null==(e=f.dates.getFullDate(s.editorial_recirc.timestamp))?"":e)+'</p>\n      </div>\n      <p class="lede">'+(null==(e=s.editorial_recirc.p)?"":e)+"</p>",s.editorial_recirc.ul&&(n+='\n      <ul class="article-list">',function(){var t=s.editorial_recirc.ul;if("number"==typeof t.length)for(var r=0,a=t.length;r<a;r++){var i=t[r];n=n+"\n        <li>"+(null==(e=i)?"":e)+"</li>"}else{a=0;for(var r in t){a++;i=t[r];n=n+"\n        <li>"+(null==(e=i)?"":e)+"</li>"}}}.call(this),n+="\n      </ul>"),n=n+'\n    </div>\n    <p class="editorial-recirc-title"><span>'+(null==(e=s.editorial_recirc.recirc_title)?"":e)+'</span></p>\n    <div class="editorical-recirc-container">',function(){var t=s.editorial_recirc.article_links;if("number"==typeof t.length)for(var e=0,n=t.length;e<n;e++){var r=t[e];d.push("      "),a["editorial-recirc"](r.title,r.author,r.link),d.pop()}else{n=0;for(var e in t){n++;r=t[e];d.push("      "),a["editorial-recirc"](r.title,r.author,r.link),d.pop()}}}.call(this),n+="\n    </div>\n  </div>","us"===u){var p="left podcast peek",v=i.clippy["editorial-recirc"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont" id="topline-module-fivey-cont">\n  <div class="module border-gradient viz-module" id="topline">\n    <h2>&nbsp;</h2>\n    <p class="intro">'+(null==(e=i.topline.dek)?"":e)+'</p>\n    <div class="chart-tooltip-container" id="topline-chart-tooltip">\n      <div class="chart-container" id="topline-chart"></div>\n      <div class="tooltip-container" id="topline-tooltip-container">\n        <div class="tooltip" id="topline-tooltip">\n          <div class="tooltip-chart-container" id="topline-tooltip-map"></div>\n          <div class="tooltip-content"></div>\n        </div>\n      </div>\n    </div>\n    <div class="legend-wrap">',n="us"===u?n+'\n      <div class="legend-container national">\n        <div class="dot win-dot trump"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_trumpwin)?"":e)+'</div>\n        <div class="dot win-dot biden"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_bidenwin)?"":e)+'</div><br>\n        <div class="dot lead-dot"></div>\n        <div class="legend-label lead-label">'+(null==(e=i.topline.legend_nomajority)?"":e)+"</div>\n      </div>":n+'\n      <div class="legend-container state">\n        <div class="candidate">\n          <div class="dot state trump"></div>\n          <div class="legend-label" id="rep-label"></div>\n        </div>\n        <div class="candidate">\n          <div class="dot state biden"></div>\n          <div class="legend-label" id="dem-label"></div>\n        </div>\n      </div>\n      <div class="legend-container runoff hidden" id="runoff-legend-container">\n        <div class="legend-label" id="runoff-label">'+(null==(e=i.topline.legend_runoff)?"":e)+'</div>\n      </div>\n      <div class="legend-container runoff-leader hidden" id="runoff-leader-legend-container">\n        <div class="legend-label" id="runoff-leader-label"></div>\n      </div>',n+='\n    </div>\n    <div class="footnote statewide-footnote hidden" id="statewide-footnote"></div>\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n    <div class="footnote mn-footnote hidden" id="mn-footnote"></div>\n  </div>',"us"===u){p="left peek jar bottom",v=i.clippy.topline;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont" id="ec-distributions-module-fivey-cont">\n  <div class="module border-gradient viz-module bottom-card" id="ec-distributions">\n    <h2>'+(null==(e=i.ec_distributions.hed)?"":e)+"</h2>\n    <p>"+(null==(e=i.ec_distributions.dek)?"":e)+'</p>\n    <div class="ec-distributions-charts-container">\n      <div class="chart-container ec-distributions-chart" id="ec-distributions-chart-trump"></div>\n      <div class="chart-container ec-distributions-chart" id="ec-distributions-chart-biden"></div>\n    </div>\n  </div>',"us"===u){p="right peek calculator bottom",v=i.clippy["ec-distributions"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="ec-margins">\n    <h2>'+(null==(e=i.ec_margins.hed)?"":e)+"</h2>\n    <p>"+(null==(e=i.ec_margins.dek)?"":e)+'</p>\n    <div class="btn-container ec-margins">\n      <button class="btn-cta btn-ec-margins btn-margin border-gradient active" id="margin-mean">'+(null==(e=i.ec_margins.margin_button)?"":e)+'</button>\n      <button class="btn-cta btn-ec-margins btn-tipping border-gradient" id="tipping">'+(null==(e=i.ec_margins.tipping_button)?"":e)+'</button>\n      <div class="legend-container" id="ec-margins-legend"></div>\n    </div>\n    <div class="chart-tooltip-container" id="ec-margins-chart-tooltip">\n      <div class="chart-container" id="ec-margins-chart"></div>\n      <div class="tooltip-container" id="ec-margins-tooltip-container">\n        <div class="tooltip" id="ec-margins-tooltip">\n          <div class="tooltip-chart-container" id="ec-margins-tooltip-map"></div>\n          <div class="tooltip-content"></div>\n        </div>\n      </div>\n    </div>\n    <div id="ec-margins-footnote">'+(null==(e=i.ec_margins.footnote)?"":e)+"</div>\n  </div>","us"===u){p="left peek professor ec-margins",v=i.clippy["ec-margins"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module state-chamber-nav" id="state-chamber-nav">\n  <div class="state-chamber-nav-container"></div>\n</div>\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="change">\n    <h2>'+(null==(e=i.change.hed)?"":e)+"</h2>\n    <p>"+(null==(e=i.change.dek)?"":e)+'</p>\n    <div class="btn-container">\n      <button class="btn-cta btn-change border-gradient active" id="winprob">'+(null==(e=i.change.btn.win)?"":e)+"</button>","us"===u&&(n=n+'\n      <button class="btn-cta btn-change border-gradient" id="evs">'+(null==(e=i.change.btn.ev)?"":e)+"</button>"),n=n+'\n      <button class="btn-cta btn-change border-gradient" id="voteshare">'+(null==(e=i.change.btn.vote)?"":e)+'</button>\n    </div>\n    <div class="btn-container btn-container-mobile">\n      <button class="btn-cta btn-change border-gradient active" id="winprob">'+(null==(e=i.change.btn_mobile.win)?"":e)+"</button>","us"===u&&(n=n+'\n      <button class="btn-cta btn-change border-gradient" id="evs">'+(null==(e=i.change.btn_mobile.ev)?"":e)+"</button>"),n=n+'\n      <button class="btn-cta btn-change border-gradient" id="voteshare">'+(null==(e=i.change.btn_mobile.vote)?"":e)+'</button>\n    </div>\n    <div class="chart-container" id="change-chart"></div>\n  </div>',"us"===h){p="left peek shrugging",v=i.clippy.change;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module border-gradient viz-module" id="scenarios">\n  <h2>'+(null==(e=i.scenarios.hed)?"":e)+"</h2>\n  <p>"+(null==(e=i.scenarios.dek)?"":e)+'</p>\n  <table>\n    <tbody></tbody>\n  </table>\n</div>\n<div class="module latest-polls" id="national-polls">\n  <h2 class="lead">'+(null==(e=i.latest_polls.national_title)?"":e)+'</h2>\n  <p class="polls-dek">'+(null==(e=i.latest_polls.national_p)?"":e)+'</p>\n  <div class="polls-link national"><a href="https://projects.fivethirtyeight.com/polls/president-general/national/">'+(null==(e=i.latest_polls.national_link)?"":e)+"</a><img"+r.attr("src",f.imgSrc("carrot-usa.svg"),!0,!0)+' aria-hidden="true"></div>\n</div>\n<div class="module-fivey-cont">\n  <div class="module border-gradient state-recirc" id="state-recirc">\n    <h2>\n      <select class="metric-dropdown" id="state-recirc-metric-dropdown" aria-label="change visible state links">',function(){var t=i.state_recirc.dropdown;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=(c=t[a]).metric;n=n+"\n        <option"+r.attr("value",s,!0,!0)+">"+(null==(e=i.state_recirc.title)?"":e)+" "+(null==(e=c.display)?"":e)+"</option>"}else{o=0;for(var a in t){o++;var c;s=(c=t[a]).metric;n=n+"\n        <option"+r.attr("value",s,!0,!0)+">"+(null==(e=i.state_recirc.title)?"":e)+" "+(null==(e=c.display)?"":e)+"</option>"}}}.call(this),n=n+'\n      </select>\n    </h2>\n    <div class="recirc-container" id="state-recirc-container"></div>\n    <div>\n      <select class="state-dropdown" id="state-recirc-state-dropdown" aria-label=" ">\n        <option>'+(null==(e=i.state_recirc.state_dropdown_display)?"":e)+"</option>",function(){var a=t.filter(t.sortBy(t.keys(f.states.dropdownContests),t=>f.states.dropdownContests[t]),t=>t!==f.states.slugToAbbr(h));if("number"==typeof a.length)for(var i=0,o=a.length;i<o;i++){var s=a[i];n=n+"\n        <option"+r.attr("value",f.states.abbrToSlug(s),!0,!0)+">"+(null==(e=f.states.dropdownContests[s])?"":e)+"</option>"}else{o=0;for(var i in a){o++;s=a[i];n=n+"\n        <option"+r.attr("value",f.states.abbrToSlug(s),!0,!0)+">"+(null==(e=f.states.dropdownContests[s])?"":e)+"</option>"}}}.call(this),n+="\n      </select>\n    </div>\n  </div>","us"===u){p="right peek foam-finger",v=i.clippy["state-recirc"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont">\n  <div class="module byline" id="byline">\n    <div class="top-container">\n      <div class="title-container">\n        <h2>'+(null==(e=i.byline.title)?"":e)+'</h2>\n      </div>\n    </div>\n    <div class="byline-container">',function(){var t=i.byline.credit_categories;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n=n+'\n      <div class="byline-group">\n        <p class="category">'+(null==(e=s.category)?"":e)+"</p>",function(){var t=s.credits;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}else{i=0;for(var a in t){i++;o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}}}.call(this),n+="\n      </div>"}else{o=0;for(var a in t){o++;s=t[a];n=n+'\n      <div class="byline-group">\n        <p class="category">'+(null==(e=s.category)?"":e)+"</p>",function(){var t=s.credits;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}else{i=0;for(var a in t){i++;o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}}}.call(this),n+="\n      </div>"}}}.call(this),n=n+'\n    </div>\n    <div class="byline-footer">\n      <p class="noteb">'+(null==(e=i.byline.download_text)?"":e),function(){var t=i.byline.download_links;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n=n+'<a class="footer download-link"'+r.attr("dataset-url",s.github_url,!0,!0)+">"+(null==(e=s.text)?"":e)+"</a>"}else{o=0;for(var a in t){o++;s=t[a];n=n+'<a class="footer download-link"'+r.attr("dataset-url",s.github_url,!0,!0)+">"+(null==(e=s.text)?"":e)+"</a>"}}}.call(this),n=n+'\n      </p>\n    </div>\n    <div class="byline-footer">\n      <p class="noteb">'+(null==(e=i.byline.bugs)?"":e)+'<a class="footer" href="mailto:polls@fivethirtyeight.com">'+(null==(e=i.byline.email)?"":e)+"</a></p>\n    </div>\n  </div>","us"===u){if("senate"===l)p="right peek star-struck narrow",v=i.clippy["senate-byline"];if("house"===l)p="right grad-jump narrow",v=i.clippy["house-byline"];else p="right peek star-struck narrow",v=i.clippy.byline;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}n+="\n</div>"}else{if(n=n+'\n<div class="timestamp-container">\n  <p class="timestamp" id="js-timestamp">&nbsp;</p>\n</div>\n<div class="module-fivey-cont" id="topline-module-fivey-cont">\n  <div class="module border-gradient viz-module" id="topline">\n    <h2>&nbsp;</h2>\n    <p class="intro">'+(null==(e=i.topline.dek)?"":e)+'</p>\n    <div class="chart-tooltip-container" id="topline-chart-tooltip">\n      <div class="chart-container" id="topline-chart"></div>\n      <div class="tooltip-container" id="topline-tooltip-container">\n        <div class="tooltip" id="topline-tooltip">\n          <div class="tooltip-chart-container" id="topline-tooltip-map"></div>\n          <div class="tooltip-content"></div>\n        </div>\n      </div>\n    </div>\n    <div class="legend-wrap">',n="us"===u?n+'\n      <div class="legend-container national">\n        <div class="dot win-dot trump"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_trumpwin)?"":e)+'</div>\n        <div class="dot win-dot biden"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_bidenwin)?"":e)+'</div><br>\n        <div class="dot lead-dot"></div>\n        <div class="legend-label lead-label">'+(null==(e=i.topline.legend_nomajority)?"":e)+"</div>\n      </div>":n+'\n      <div class="legend-container state">\n        <div class="candidate">\n          <div class="dot state trump"></div>\n          <div class="legend-label" id="rep-label"></div>\n        </div>\n        <div class="candidate">\n          <div class="dot state biden"></div>\n          <div class="legend-label" id="dem-label"></div>\n        </div>\n      </div>\n      <div class="legend-container runoff hidden" id="runoff-legend-container">\n        <div class="legend-label" id="runoff-label">'+(null==(e=i.topline.legend_runoff)?"":e)+'</div>\n      </div>\n      <div class="legend-container runoff-leader hidden" id="runoff-leader-legend-container">\n        <div class="legend-label" id="runoff-leader-label"></div>\n      </div>',n+='\n    </div>\n    <div class="footnote statewide-footnote hidden" id="statewide-footnote"></div>\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n    <div class="footnote mn-footnote hidden" id="mn-footnote"></div>\n  </div>',"us"===u){p="left peek jar bottom",v=i.clippy.topline;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module state-chamber-nav" id="state-chamber-nav">\n  <div class="state-chamber-nav-container"></div>\n</div>\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="change">\n    <h2>'+(null==(e=i.change.hed)?"":e)+"</h2>\n    <p>"+(null==(e=i.change.dek)?"":e)+'</p>\n    <div class="btn-container">\n      <button class="btn-cta btn-change border-gradient active" id="winprob">'+(null==(e=i.change.btn.win)?"":e)+"</button>","us"===u&&(n=n+'\n      <button class="btn-cta btn-change border-gradient" id="evs">'+(null==(e=i.change.btn.ev)?"":e)+"</button>"),n=n+'\n      <button class="btn-cta btn-change border-gradient" id="voteshare">'+(null==(e=i.change.btn.vote)?"":e)+'</button>\n    </div>\n    <div class="btn-container btn-container-mobile">\n      <button class="btn-cta btn-change border-gradient active" id="winprob">'+(null==(e=i.change.btn_mobile.win)?"":e)+"</button>","us"===u&&(n=n+'\n      <button class="btn-cta btn-change border-gradient" id="evs">'+(null==(e=i.change.btn_mobile.ev)?"":e)+"</button>"),n=n+'\n      <button class="btn-cta btn-change border-gradient" id="voteshare">'+(null==(e=i.change.btn_mobile.vote)?"":e)+'</button>\n    </div>\n    <div class="chart-container" id="change-chart"></div>\n  </div>',"us"===h){p="left peek shrugging",v=i.clippy.change;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}n+='\n</div>\n<div class="module latest-polls lazy-load-hide" id="latest-polls">';let a=u;if("president"===l&&h.match(/\d/)){const t=h.match(/([a-z]+)-(\d)/),e=t[1],n=f.states.toAbbrs[e];a=`${f.states.abbrs[n]}’s ${f.formatting.ordinal(+t[2])} District`}else if("house"===l){const t=h.split("-"),e=t.slice(0,t.length-1).join("-"),n=f.states.toAbbrs[e],r=t.slice(-1)[0];a=`${a}’s ${f.states.atLarge[n]?"at-large district":f.formatting.ordinal(r)+" District"}`}if(n=n+'\n  <h2 class="lead">'+(null==(e=i.latest_polls.title_dynamic.replace("{STATE}",a))?"":e)+'</h2>\n  <p class="polls-dek"></p>\n  <table'+r.attr("class",r.classes([l],[!0]),!1,!0)+'>\n    <thead class="d">\n      <tr>\n        <th class="pollster">'+(null==(e=i.latest_polls.table.pollster)?"":e)+'</th>\n        <th class="rating">'+(null==(e=i.latest_polls.table.rating)?"":e)+'</th>\n        <th class="dates">'+(null==(e=i.latest_polls.table.dates)?"":e)+'</th>\n      </tr>\n    </thead>\n    <tbody class="d"></tbody>\n    <thead class="m">\n      <tr>\n        <th class="pollster">'+(null==(e=i.latest_polls.table.pollster)?"":e)+'</th>\n        <th class="leader">'+(null==(e=i.latest_polls.table.leader)?"":e)+'</th>\n      </tr>\n    </thead>\n    <tbody class="m"></tbody>\n  </table>\n  <div class="polls-link"><a href="https://projects.fivethirtyeight.com/polls/"></a><img'+r.attr("src",f.imgSrc("carrot-usa.svg"),!0,!0)+' aria-hidden="true"></div>\n</div>\n<div class="module viz-module" id="polls-to-forecast">\n  <h2>'+(null==(e=i.polls_to_forecast.hed)?"":e)+'</h2>\n  <p class="dek"></p>\n  <table>\n    <thead>\n      <tr>\n        <th class="step"></th>\n        <th class="description"></th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>\n<div class="module-fivey-cont">\n  <div class="module border-gradient state-recirc" id="state-recirc">\n    <h2>\n      <select class="metric-dropdown" id="state-recirc-metric-dropdown" aria-label="change visible state links">',function(){var t=i.state_recirc.dropdown;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=(c=t[a]).metric;n=n+"\n        <option"+r.attr("value",s,!0,!0)+">"+(null==(e=i.state_recirc.title)?"":e)+" "+(null==(e=c.display)?"":e)+"</option>"}else{o=0;for(var a in t){o++;var c;s=(c=t[a]).metric;n=n+"\n        <option"+r.attr("value",s,!0,!0)+">"+(null==(e=i.state_recirc.title)?"":e)+" "+(null==(e=c.display)?"":e)+"</option>"}}}.call(this),n=n+'\n      </select>\n    </h2>\n    <div class="recirc-container" id="state-recirc-container"></div>\n    <div>\n      <select class="state-dropdown" id="state-recirc-state-dropdown" aria-label=" ">\n        <option>'+(null==(e=i.state_recirc.state_dropdown_display)?"":e)+"</option>",function(){var a=t.filter(t.sortBy(t.keys(f.states.dropdownContests),t=>f.states.dropdownContests[t]),t=>t!==f.states.slugToAbbr(h));if("number"==typeof a.length)for(var i=0,o=a.length;i<o;i++){var s=a[i];n=n+"\n        <option"+r.attr("value",f.states.abbrToSlug(s),!0,!0)+">"+(null==(e=f.states.dropdownContests[s])?"":e)+"</option>"}else{o=0;for(var i in a){o++;s=a[i];n=n+"\n        <option"+r.attr("value",f.states.abbrToSlug(s),!0,!0)+">"+(null==(e=f.states.dropdownContests[s])?"":e)+"</option>"}}}.call(this),n+="\n      </select>\n    </div>\n  </div>","us"===u){p="right peek foam-finger",v=i.clippy["state-recirc"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}n+="\n</div>"}if("senate"===l)if("us"==h){if(n=(n+='\n<div class="timestamp-container">\n  <p class="timestamp" id="js-timestamp">&nbsp;</p>\n</div>')+'\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="seat-distribution">\n    <h2>&nbsp;</h2>\n    <p>'+(null==(e=i[c="senate"==l?"seat_distribution":"house_seat_distribution"].dek.replace("{{ modelVersion }}",f.formatting.capitalize(i.model_picker.default)))?"":e)+'</p>\n    <div id="seat-distribution-chart">\n      <div class="seat-distribution-charts-container">\n        <div class="chart-container seat-distribution-chart main"></div>\n        <div class="small-charts">\n          <div class="chart-container seat-distribution-chart small" data-party="R"></div>\n          <div class="chart-container seat-distribution-chart small" data-party="D"></div>\n        </div>\n      </div>\n    </div>\n    <div id="distributions-footnote">'+(null==(e=i[c].footnote)?"":e)+"</div>\n  </div>","us"===u){p="right waving top";if("senate"===l)v=i.clippy["senate-topline"];if("house"===l)v=i.clippy["house-topline"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n+="\n</div>",a["editorial-recirc"]=e=function(t,a,i){this&&this.block,this&&this.attributes;n+="\n",n=(n+=d.join(""))+'<div class="editorial-recirc-element"><a'+r.attr("href",i,!0,!0)+">\n    ",n=(n+=d.join(""))+'<p class="article-title">'+(null==(e=t)?"":e)+"</p>\n    ",n=(n+=d.join(""))+'<p class="author">By '+(null==(e=a)?"":e)+"</p></a></div>"},n=n+'\n<div class="module-fivey-cont">\n  <div class="module editorial-recirc" id="editorial-recirc">\n    <p class="editorial-recirc-title house-senate"><span>'+(null==(e=s.editorial_recirc.recirc_title)?"":e)+'</span></p>\n    <div class="editorical-recirc-container">',function(){var t=s.editorial_recirc.article_links;if("number"==typeof t.length)for(var e=0,n=t.length;e<n;e++){var r=t[e];d.push("      "),a["editorial-recirc"](r.title,r.author,r.link),d.pop()}else{n=0;for(var e in t){n++;r=t[e];d.push("      "),a["editorial-recirc"](r.title,r.author,r.link),d.pop()}}}.call(this),n+="\n    </div>\n  </div>","us"===u&&"house"===l){p="left peek picker",v=i.clippy["house-recirc"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont"> \n  <div class="module border-gradient viz-module bottom-card" id="senate-map">\n    <h2>'+(null==(e=i.senate_map.hed)?"":e)+'</h2>\n    <p></p>\n    <div class="legend-container"> <img'+r.attr("src",f.imgSrc("senate-icon-legend.svg"),!0,!0)+' alt="Icon Legend">\n      <div class="map-legend"> \n        <div class="bucket-legend">\n          <div class="bucket-container">\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_solid_r)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="solid-r"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_solid_r_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_likely_r)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="likely-r"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_likely_r_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_lean_r)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="lean-r"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_lean_r_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_tossup)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="toss-up"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_tossup_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_lean_d)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="lean-d"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_lean_d_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_likely_d)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="likely-d"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_likely_d_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_solid_d)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="solid-d"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_solid_d_bucket)?"":e)+'</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="chart-tooltip-container" id="senate-map-chart-tooltip">\n      <div class="chart-container" id="senate-map-chart"></div>\n      <div class="tooltip-container" id="senate-map-tooltip-container">\n        <div class="tooltip" id="senate-map-tooltip"></div>\n      </div>\n    </div>\n    <div class="chart-container" id="senate-map-summary-chart"></div>\n    <div id="senate-map-footnote">'+(null==(e=i.senate_map.footnote)?"":e)+"</div>\n  </div>","us"===u){p="left professor long",v=i.clippy["senate-map"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=(n+="\n</div>")+'\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="change">\n    <h2>'+(null==(e=i[o="senate"==l?"house_senate_change":"house_change"].hed)?"":e)+"</h2>",n="us"===h?n+'\n    <p class="dek">'+(null==(e=i[o].dek)?"":e)+"</p>":n+'\n    <p class="dek">'+(null==(e=i.house_senate_change.race_dek)?"":e)+"</p>",n+='\n    <div class="chart-container change-chart" data-type="winprob"></div>',"us"===h?(n+='\n    <div class="chart-container change-chart" data-type="seats"></div>',"house"===l&&(n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>')):n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>',"senate"===l&&"us"===u&&(n=n+'\n    <div class="footnote senate-footnote" id="senate-change-footnote">'+(null==(e=i.house_senate_change.senate_footnote)?"":e)+"</div>"),n+='\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n  </div>',"us"===u){p="right peek shrugging-flipped";if("senate"===l)v=i.clippy["senate-change"];if("house"===l)v=i.clippy["house-change"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n+='\n</div>\n<div class="module state-chamber-nav" id="state-chamber-nav">\n  <div class="state-chamber-nav-container"></div>\n</div>',a.optgroup=e=function(){this&&this.block,this&&this.attributes;n+="\n",n=(n+=d.join(""))+"<optgroup"+r.attr("label",i.nav.all_states,!0,!0)+">",function(){var t=f.states.abbrs;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];"DC"!==a&&(n+="\n  ",n=(n+=d.join(""))+"<option"+r.attr("value",a,!0,!0)+">"+(null==(e=o)?"":e)+"</option>")}else{i=0;for(var a in t){i++;o=t[a];"DC"!==a&&(n+="\n  ",n=(n+=d.join(""))+"<option"+r.attr("value",a,!0,!0)+">"+(null==(e=o)?"":e)+"</option>")}}}.call(this),n+="\n",n+=d.join(""),n+="</optgroup>"},n+='\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module bottom-card" id="race-list">',"senate"==l?n=n+"\n    <h2>"+(null==(e=i.race_list.hed.senate)?"":e)+"</h2>\n    <p>"+(null==(e=i.race_list.dek.senate)?"":e)+"</p>":"house"==l&&(n=n+"\n    <h2>"+(null==(e=i.race_list.hed.house)?"":e)+"</h2>\n    <p>"+(null==(e=i.race_list.dek.house)?"":e)+"</p>"),n=n+'\n    <div class="legend-container"> <img'+r.attr("src",f.imgSrc("state-senate-legend.svg"),!0,!0)+' alt="Race Legend">\n      <div class="legend-label">'+(null==(e=i.race_list.legend)?"":e)+"</div>\n    </div>","senate"===l&&(n=n+'\n    <div class="btn-container race-list-btns" id="state-order">\n      <button class="btn-cta btn-race-list border-gradient active" id="tipping">'+(null==(e=i.race_list.sort.watch)?"":e)+'</button>\n      <button class="btn-cta btn-race-list border-gradient" id="alpha">'+(null==(e=i.race_list.sort.alpha)?"":e)+"</button>\n    </div>"),"house"===l&&(n=n+'\n    <div class="race-list-select">\n      <select aria-label="select a state">\n        <option value="competitive-races" selected>'+(null==(e=i.race_list.dropdown.competitive_races)?"":e)+"</option>",d.push("        "),a.optgroup(),d.pop(),n+="\n      </select>\n    </div>"),n=n+"\n    <div"+r.attr("class",r.classes(["legend-container","hide-desktop",l],[!1,!1,!0]),!1,!0)+">","senate"==l&&(n=n+'\n      <div class="races-legend-container special-container"> <img class="special"'+r.attr("src",f.imgSrc("special-star.svg"),!0,!0)+' alt="Special Election Legend">\n        <div class="legend-label">'+(null==(e=i.race_list.special)?"":e)+"</div>\n      </div>"),n=n+'\n      <div class="races-legend-container incumbent-container"> <img class="incumb"'+r.attr("src",f.imgSrc("race-list-joint-legend.svg"),!0,!0)+' alt="Incumbent Legend">\n        <div class="legend-label">Incumbent candidate/controlling party</div>\n      </div>\n    </div>\n    <div'+r.attr("class",r.classes(["label-container",l],[!1,!0]),!1,!0)+'>\n      <div class="label">'+(null==(e=i.race_list.label)?"":e)+'</div>\n    </div>\n    <div id="race-list-chart"></div>\n  </div>',"us"===u){p="left top foam-finger";if("house"===l)v=i.clippy["house-race-list"];else v=i.clippy["race-list"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont">\n  <div class="module byline" id="byline">\n    <div class="top-container">\n      <div class="title-container">\n        <h2>'+(null==(e=i.byline.title)?"":e)+'</h2>\n      </div>\n    </div>\n    <div class="byline-container">',function(){var t=i.byline.credit_categories;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n=n+'\n      <div class="byline-group">\n        <p class="category">'+(null==(e=s.category)?"":e)+"</p>",function(){var t=s.credits;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}else{i=0;for(var a in t){i++;o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}}}.call(this),n+="\n      </div>"}else{o=0;for(var a in t){o++;s=t[a];n=n+'\n      <div class="byline-group">\n        <p class="category">'+(null==(e=s.category)?"":e)+"</p>",function(){var t=s.credits;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}else{i=0;for(var a in t){i++;o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}}}.call(this),n+="\n      </div>"}}}.call(this),n=n+'\n    </div>\n    <div class="byline-footer">\n      <p class="noteb">'+(null==(e=i.byline.download_text)?"":e),function(){var t=i.byline.download_links;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n=n+'<a class="footer download-link"'+r.attr("dataset-url",s.github_url,!0,!0)+">"+(null==(e=s.text)?"":e)+"</a>"}else{o=0;for(var a in t){o++;s=t[a];n=n+'<a class="footer download-link"'+r.attr("dataset-url",s.github_url,!0,!0)+">"+(null==(e=s.text)?"":e)+"</a>"}}}.call(this),n=n+'\n      </p>\n    </div>\n    <div class="byline-footer">\n      <p class="noteb">'+(null==(e=i.byline.bugs)?"":e)+'<a class="footer" href="mailto:polls@fivethirtyeight.com">'+(null==(e=i.byline.email)?"":e)+"</a></p>\n    </div>\n  </div>","us"===u){if("senate"===l)p="right peek star-struck narrow",v=i.clippy["senate-byline"];if("house"===l)p="right grad-jump narrow",v=i.clippy["house-byline"];else p="right peek star-struck narrow",v=i.clippy.byline;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}n=n+'\n</div>\n<div id="model-picker">\n  <div class="picker-input-cont hide">\n    <p class="picker-title">'+(null==(e=i.model_picker.title)?"":e)+'</p>\n    <div class="model-inputs">',function(){var t=i.model_picker.models;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,o="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",o,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}else{o=0;for(var a in t){o++;s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,c="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",c,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}}}.call(this),n=n+'\n    </div>\n    <p class="close-button">+</p>\n  </div>\n  <div class="picker-tooltip">'+(null==(e=i.model_picker.tooltip)?"":e)+'</div>\n  <div class="model-picker-art"></div>\n</div>'}else{if(n=n+'\n<div class="timestamp-container">\n  <p class="timestamp" id="js-timestamp">&nbsp;</p>\n</div>\n<div class="module-fivey-cont" id="topline-module-fivey-cont">\n  <div class="module border-gradient viz-module" id="topline">\n    <h2>&nbsp;</h2>\n    <p class="intro">'+(null==(e=i.topline.dek)?"":e)+'</p>\n    <div class="chart-tooltip-container" id="topline-chart-tooltip">\n      <div class="chart-container" id="topline-chart"></div>\n      <div class="tooltip-container" id="topline-tooltip-container">\n        <div class="tooltip" id="topline-tooltip">\n          <div class="tooltip-chart-container" id="topline-tooltip-map"></div>\n          <div class="tooltip-content"></div>\n        </div>\n      </div>\n    </div>\n    <div class="legend-wrap">',n="us"===u?n+'\n      <div class="legend-container national">\n        <div class="dot win-dot trump"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_trumpwin)?"":e)+'</div>\n        <div class="dot win-dot biden"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_bidenwin)?"":e)+'</div><br>\n        <div class="dot lead-dot"></div>\n        <div class="legend-label lead-label">'+(null==(e=i.topline.legend_nomajority)?"":e)+"</div>\n      </div>":n+'\n      <div class="legend-container state">\n        <div class="candidate">\n          <div class="dot state trump"></div>\n          <div class="legend-label" id="rep-label"></div>\n        </div>\n        <div class="candidate">\n          <div class="dot state biden"></div>\n          <div class="legend-label" id="dem-label"></div>\n        </div>\n      </div>\n      <div class="legend-container runoff hidden" id="runoff-legend-container">\n        <div class="legend-label" id="runoff-label">'+(null==(e=i.topline.legend_runoff)?"":e)+'</div>\n      </div>\n      <div class="legend-container runoff-leader hidden" id="runoff-leader-legend-container">\n        <div class="legend-label" id="runoff-leader-label"></div>\n      </div>',n+='\n    </div>\n    <div class="footnote statewide-footnote hidden" id="statewide-footnote"></div>\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n    <div class="footnote mn-footnote hidden" id="mn-footnote"></div>\n  </div>',"us"===u){p="left peek jar bottom",v=i.clippy.topline;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=(n+='\n</div>\n<div class="module state-chamber-nav" id="state-chamber-nav">\n  <div class="state-chamber-nav-container"></div>\n</div>')+'\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="change">\n    <h2>'+(null==(e=i[o="senate"==l?"house_senate_change":"house_change"].hed)?"":e)+"</h2>",n="us"===h?n+'\n    <p class="dek">'+(null==(e=i[o].dek)?"":e)+"</p>":n+'\n    <p class="dek">'+(null==(e=i.house_senate_change.race_dek)?"":e)+"</p>",n+='\n    <div class="chart-container change-chart" data-type="winprob"></div>',"us"===h?(n+='\n    <div class="chart-container change-chart" data-type="seats"></div>',"house"===l&&(n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>')):n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>',"senate"===l&&"us"===u&&(n=n+'\n    <div class="footnote senate-footnote" id="senate-change-footnote">'+(null==(e=i.house_senate_change.senate_footnote)?"":e)+"</div>"),n+='\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n  </div>',"us"===u){p="right peek shrugging-flipped";if("senate"===l)v=i.clippy["senate-change"];if("house"===l)v=i.clippy["house-change"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}n+='\n</div>\n<div class="module latest-polls lazy-load-hide" id="latest-polls">';let t=u;if("president"===l&&h.match(/\d/)){const e=h.match(/([a-z]+)-(\d)/),n=e[1],r=f.states.toAbbrs[n];t=`${f.states.abbrs[r]}’s ${f.formatting.ordinal(+e[2])} District`}else if("house"===l){const e=h.split("-"),n=e.slice(0,e.length-1).join("-"),r=f.states.toAbbrs[n],a=e.slice(-1)[0];t=`${t}’s ${f.states.atLarge[r]?"at-large district":f.formatting.ordinal(a)+" District"}`}n=n+'\n  <h2 class="lead">'+(null==(e=i.latest_polls.title_dynamic.replace("{STATE}",t))?"":e)+'</h2>\n  <p class="polls-dek"></p>\n  <table'+r.attr("class",r.classes([l],[!0]),!1,!0)+'>\n    <thead class="d">\n      <tr>\n        <th class="pollster">'+(null==(e=i.latest_polls.table.pollster)?"":e)+'</th>\n        <th class="rating">'+(null==(e=i.latest_polls.table.rating)?"":e)+'</th>\n        <th class="dates">'+(null==(e=i.latest_polls.table.dates)?"":e)+'</th>\n      </tr>\n    </thead>\n    <tbody class="d"></tbody>\n    <thead class="m">\n      <tr>\n        <th class="pollster">'+(null==(e=i.latest_polls.table.pollster)?"":e)+'</th>\n        <th class="leader">'+(null==(e=i.latest_polls.table.leader)?"":e)+'</th>\n      </tr>\n    </thead>\n    <tbody class="m"></tbody>\n  </table>\n  <div class="polls-link"><a href="https://projects.fivethirtyeight.com/polls/"></a><img'+r.attr("src",f.imgSrc("carrot-usa.svg"),!0,!0)+' aria-hidden="true"></div>\n</div>\n<div id="model-picker">\n  <div class="picker-input-cont hide">\n    <p class="picker-title">'+(null==(e=i.model_picker.title)?"":e)+'</p>\n    <div class="model-inputs">',function(){var t=i.model_picker.models;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,o="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",o,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}else{o=0;for(var a in t){o++;s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,c="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",c,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}}}.call(this),n=n+'\n    </div>\n    <p class="close-button">+</p>\n  </div>\n  <div class="picker-tooltip">'+(null==(e=i.model_picker.tooltip)?"":e)+'</div>\n  <div class="model-picker-art"></div>\n</div>'}if("house"===l)if("us"===h){if(n=(n+='\n<div class="timestamp-container">\n  <p class="timestamp" id="js-timestamp">&nbsp;</p>\n</div>')+'\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="seat-distribution">\n    <h2>&nbsp;</h2>\n    <p>'+(null==(e=i[c="senate"==l?"seat_distribution":"house_seat_distribution"].dek.replace("{{ modelVersion }}",f.formatting.capitalize(i.model_picker.default)))?"":e)+'</p>\n    <div id="seat-distribution-chart">\n      <div class="seat-distribution-charts-container">\n        <div class="chart-container seat-distribution-chart main"></div>\n        <div class="small-charts">\n          <div class="chart-container seat-distribution-chart small" data-party="R"></div>\n          <div class="chart-container seat-distribution-chart small" data-party="D"></div>\n        </div>\n      </div>\n    </div>\n    <div id="distributions-footnote">'+(null==(e=i[c].footnote)?"":e)+"</div>\n  </div>","us"===u){p="right waving top";if("senate"===l)v=i.clippy["senate-topline"];if("house"===l)v=i.clippy["house-topline"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n+="\n</div>",a["editorial-recirc"]=e=function(t,a,i){this&&this.block,this&&this.attributes;n+="\n",n=(n+=d.join(""))+'<div class="editorial-recirc-element"><a'+r.attr("href",i,!0,!0)+">\n    ",n=(n+=d.join(""))+'<p class="article-title">'+(null==(e=t)?"":e)+"</p>\n    ",n=(n+=d.join(""))+'<p class="author">By '+(null==(e=a)?"":e)+"</p></a></div>"},n=n+'\n<div class="module-fivey-cont">\n  <div class="module editorial-recirc" id="editorial-recirc">\n    <p class="editorial-recirc-title house-senate"><span>'+(null==(e=s.editorial_recirc.recirc_title)?"":e)+'</span></p>\n    <div class="editorical-recirc-container">',function(){var t=s.editorial_recirc.article_links;if("number"==typeof t.length)for(var e=0,n=t.length;e<n;e++){var r=t[e];d.push("      "),a["editorial-recirc"](r.title,r.author,r.link),d.pop()}else{n=0;for(var e in t){n++;r=t[e];d.push("      "),a["editorial-recirc"](r.title,r.author,r.link),d.pop()}}}.call(this),n+="\n    </div>\n  </div>","us"===u&&"house"===l){p="left peek picker",v=i.clippy["house-recirc"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="house-map">\n    <h2>'+(null==(e=i.house_map.hed)?"":e)+"</h2>\n    <p>"+(null==(e=i.house_map.dek)?"":e)+'</p>\n    <div class="legend-container"> \n      <div class="map-legend"> \n        <div class="bucket-legend">\n          <div class="bucket-container">\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_solid_r)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="solid-r"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_solid_r_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_likely_r)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="likely-r"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_likely_r_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_lean_r)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="lean-r"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_lean_r_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_tossup)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="toss-up"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_tossup_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_lean_d)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="lean-d"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_lean_d_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_likely_d)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="likely-d"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_likely_d_bucket)?"":e)+'</div>\n            </div>\n            <div class="bucket">\n              <div class="bucket-title"> \n                <div class="text">'+(null==(e=i.senate_map.legend_solid_d)?"":e)+'</div>\n              </div>\n              <div class="square-container">\n                <div class="square" id="solid-d"></div>\n              </div>\n              <div class="bucket-numbers">'+(null==(e=i.senate_map.legend_solid_d_bucket)?"":e)+'</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="chart-tooltip-container" id="house-map-chart-tooltip">\n      <div class="chart-container" id="house-map-chart"></div>\n      <div class="tooltip-container" id="house-map-tooltip-container">\n        <div class="tooltip" id="house-map-tooltip"></div>\n      </div>\n    </div>\n    <div class="chart-container" id="house-map-summary-chart"></div>\n    <div id="map-footnote">'+(null==(e=i.house_map.footenote)?"":e)+"</div>\n  </div>","us"===u){p="left professor long",v=i.clippy["house-map"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=(n+="\n</div>")+'\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="change">\n    <h2>'+(null==(e=i[o="senate"==l?"house_senate_change":"house_change"].hed)?"":e)+"</h2>",n="us"===h?n+'\n    <p class="dek">'+(null==(e=i[o].dek)?"":e)+"</p>":n+'\n    <p class="dek">'+(null==(e=i.house_senate_change.race_dek)?"":e)+"</p>",n+='\n    <div class="chart-container change-chart" data-type="winprob"></div>',"us"===h?(n+='\n    <div class="chart-container change-chart" data-type="seats"></div>',"house"===l&&(n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>')):n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>',"senate"===l&&"us"===u&&(n=n+'\n    <div class="footnote senate-footnote" id="senate-change-footnote">'+(null==(e=i.house_senate_change.senate_footnote)?"":e)+"</div>"),n+='\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n  </div>',"us"===u){p="right peek shrugging-flipped";if("senate"===l)v=i.clippy["senate-change"];if("house"===l)v=i.clippy["house-change"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n+='\n</div>\n<div class="module state-chamber-nav" id="state-chamber-nav">\n  <div class="state-chamber-nav-container"></div>\n</div>',a.optgroup=e=function(){this&&this.block,this&&this.attributes;n+="\n",n=(n+=d.join(""))+"<optgroup"+r.attr("label",i.nav.all_states,!0,!0)+">",function(){var t=f.states.abbrs;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];"DC"!==a&&(n+="\n  ",n=(n+=d.join(""))+"<option"+r.attr("value",a,!0,!0)+">"+(null==(e=o)?"":e)+"</option>")}else{i=0;for(var a in t){i++;o=t[a];"DC"!==a&&(n+="\n  ",n=(n+=d.join(""))+"<option"+r.attr("value",a,!0,!0)+">"+(null==(e=o)?"":e)+"</option>")}}}.call(this),n+="\n",n+=d.join(""),n+="</optgroup>"},n+='\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module bottom-card" id="race-list">',"senate"==l?n=n+"\n    <h2>"+(null==(e=i.race_list.hed.senate)?"":e)+"</h2>\n    <p>"+(null==(e=i.race_list.dek.senate)?"":e)+"</p>":"house"==l&&(n=n+"\n    <h2>"+(null==(e=i.race_list.hed.house)?"":e)+"</h2>\n    <p>"+(null==(e=i.race_list.dek.house)?"":e)+"</p>"),n=n+'\n    <div class="legend-container"> <img'+r.attr("src",f.imgSrc("state-senate-legend.svg"),!0,!0)+' alt="Race Legend">\n      <div class="legend-label">'+(null==(e=i.race_list.legend)?"":e)+"</div>\n    </div>","senate"===l&&(n=n+'\n    <div class="btn-container race-list-btns" id="state-order">\n      <button class="btn-cta btn-race-list border-gradient active" id="tipping">'+(null==(e=i.race_list.sort.watch)?"":e)+'</button>\n      <button class="btn-cta btn-race-list border-gradient" id="alpha">'+(null==(e=i.race_list.sort.alpha)?"":e)+"</button>\n    </div>"),"house"===l&&(n=n+'\n    <div class="race-list-select">\n      <select aria-label="select a state">\n        <option value="competitive-races" selected>'+(null==(e=i.race_list.dropdown.competitive_races)?"":e)+"</option>",d.push("        "),a.optgroup(),d.pop(),n+="\n      </select>\n    </div>"),n=n+"\n    <div"+r.attr("class",r.classes(["legend-container","hide-desktop",l],[!1,!1,!0]),!1,!0)+">","senate"==l&&(n=n+'\n      <div class="races-legend-container special-container"> <img class="special"'+r.attr("src",f.imgSrc("special-star.svg"),!0,!0)+' alt="Special Election Legend">\n        <div class="legend-label">'+(null==(e=i.race_list.special)?"":e)+"</div>\n      </div>"),n=n+'\n      <div class="races-legend-container incumbent-container"> <img class="incumb"'+r.attr("src",f.imgSrc("race-list-joint-legend.svg"),!0,!0)+' alt="Incumbent Legend">\n        <div class="legend-label">Incumbent candidate/controlling party</div>\n      </div>\n    </div>\n    <div'+r.attr("class",r.classes(["label-container",l],[!1,!0]),!1,!0)+'>\n      <div class="label">'+(null==(e=i.race_list.label)?"":e)+'</div>\n    </div>\n    <div id="race-list-chart"></div>\n  </div>',"us"===u){p="left top foam-finger";if("house"===l)v=i.clippy["house-race-list"];else v=i.clippy["race-list"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=n+'\n</div>\n<div class="module-fivey-cont">\n  <div class="module byline" id="byline">\n    <div class="top-container">\n      <div class="title-container">\n        <h2>'+(null==(e=i.byline.title)?"":e)+'</h2>\n      </div>\n    </div>\n    <div class="byline-container">',function(){var t=i.byline.credit_categories;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n=n+'\n      <div class="byline-group">\n        <p class="category">'+(null==(e=s.category)?"":e)+"</p>",function(){var t=s.credits;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}else{i=0;for(var a in t){i++;o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}}}.call(this),n+="\n      </div>"}else{o=0;for(var a in t){o++;s=t[a];n=n+'\n      <div class="byline-group">\n        <p class="category">'+(null==(e=s.category)?"":e)+"</p>",function(){var t=s.credits;if("number"==typeof t.length)for(var a=0,i=t.length;a<i;a++){var o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}else{i=0;for(var a in t){i++;o=t[a];n=n+"\n        <p><a"+r.attr("href",o.link,!0,!0)+">"+(null==(e=o.name)?"":e)+"</a></p>"}}}.call(this),n+="\n      </div>"}}}.call(this),n=n+'\n    </div>\n    <div class="byline-footer">\n      <p class="noteb">'+(null==(e=i.byline.download_text)?"":e),function(){var t=i.byline.download_links;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n=n+'<a class="footer download-link"'+r.attr("dataset-url",s.github_url,!0,!0)+">"+(null==(e=s.text)?"":e)+"</a>"}else{o=0;for(var a in t){o++;s=t[a];n=n+'<a class="footer download-link"'+r.attr("dataset-url",s.github_url,!0,!0)+">"+(null==(e=s.text)?"":e)+"</a>"}}}.call(this),n=n+'\n      </p>\n    </div>\n    <div class="byline-footer">\n      <p class="noteb">'+(null==(e=i.byline.bugs)?"":e)+'<a class="footer" href="mailto:polls@fivethirtyeight.com">'+(null==(e=i.byline.email)?"":e)+"</a></p>\n    </div>\n  </div>","us"===u){if("senate"===l)p="right peek star-struck narrow",v=i.clippy["senate-byline"];if("house"===l)p="right grad-jump narrow",v=i.clippy["house-byline"];else p="right peek star-struck narrow",v=i.clippy.byline;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}n=n+'\n</div>\n<div id="model-picker">\n  <div class="picker-input-cont hide">\n    <p class="picker-title">'+(null==(e=i.model_picker.title)?"":e)+'</p>\n    <div class="model-inputs">',function(){var t=i.model_picker.models;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,o="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",o,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}else{o=0;for(var a in t){o++;s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,c="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",c,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}}}.call(this),n=n+'\n    </div>\n    <p class="close-button">+</p>\n  </div>\n  <div class="picker-tooltip">'+(null==(e=i.model_picker.tooltip)?"":e)+'</div>\n  <div class="model-picker-art"></div>\n</div>'}else{if(n=n+'\n<div class="timestamp-container">\n  <p class="timestamp" id="js-timestamp">&nbsp;</p>\n</div>\n<div class="module-fivey-cont" id="topline-module-fivey-cont">\n  <div class="module border-gradient viz-module" id="topline">\n    <h2>&nbsp;</h2>\n    <p class="intro">'+(null==(e=i.topline.dek)?"":e)+'</p>\n    <div class="chart-tooltip-container" id="topline-chart-tooltip">\n      <div class="chart-container" id="topline-chart"></div>\n      <div class="tooltip-container" id="topline-tooltip-container">\n        <div class="tooltip" id="topline-tooltip">\n          <div class="tooltip-chart-container" id="topline-tooltip-map"></div>\n          <div class="tooltip-content"></div>\n        </div>\n      </div>\n    </div>\n    <div class="legend-wrap">',n="us"===u?n+'\n      <div class="legend-container national">\n        <div class="dot win-dot trump"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_trumpwin)?"":e)+'</div>\n        <div class="dot win-dot biden"></div>\n        <div class="legend-label">'+(null==(e=i.topline.legend_bidenwin)?"":e)+'</div><br>\n        <div class="dot lead-dot"></div>\n        <div class="legend-label lead-label">'+(null==(e=i.topline.legend_nomajority)?"":e)+"</div>\n      </div>":n+'\n      <div class="legend-container state">\n        <div class="candidate">\n          <div class="dot state trump"></div>\n          <div class="legend-label" id="rep-label"></div>\n        </div>\n        <div class="candidate">\n          <div class="dot state biden"></div>\n          <div class="legend-label" id="dem-label"></div>\n        </div>\n      </div>\n      <div class="legend-container runoff hidden" id="runoff-legend-container">\n        <div class="legend-label" id="runoff-label">'+(null==(e=i.topline.legend_runoff)?"":e)+'</div>\n      </div>\n      <div class="legend-container runoff-leader hidden" id="runoff-leader-legend-container">\n        <div class="legend-label" id="runoff-leader-label"></div>\n      </div>',n+='\n    </div>\n    <div class="footnote statewide-footnote hidden" id="statewide-footnote"></div>\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n    <div class="footnote mn-footnote hidden" id="mn-footnote"></div>\n  </div>',"us"===u){p="left peek jar bottom",v=i.clippy.topline;n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}if(n=(n+='\n</div>\n<div class="module state-chamber-nav" id="state-chamber-nav">\n  <div class="state-chamber-nav-container"></div>\n</div>')+'\n<div class="module-fivey-cont">\n  <div class="module border-gradient viz-module" id="change">\n    <h2>'+(null==(e=i[o="senate"==l?"house_senate_change":"house_change"].hed)?"":e)+"</h2>",n="us"===h?n+'\n    <p class="dek">'+(null==(e=i[o].dek)?"":e)+"</p>":n+'\n    <p class="dek">'+(null==(e=i.house_senate_change.race_dek)?"":e)+"</p>",n+='\n    <div class="chart-container change-chart" data-type="winprob"></div>',"us"===h?(n+='\n    <div class="chart-container change-chart" data-type="seats"></div>',"house"===l&&(n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>')):n+='\n    <div class="chart-container change-chart" data-type="voteshare"></div>',"senate"===l&&"us"===u&&(n=n+'\n    <div class="footnote senate-footnote" id="senate-change-footnote">'+(null==(e=i.house_senate_change.senate_footnote)?"":e)+"</div>"),n+='\n    <div class="footnote runoff-footnote hidden" id="runoff-footnote"></div>\n  </div>',"us"===u){p="right peek shrugging-flipped";if("senate"===l)v=i.clippy["senate-change"];if("house"===l)v=i.clippy["house-change"];n=n+"\n  <div"+r.attr("class",r.classes(["fivey-wrap",p],[!1,!0]),!1,!0)+">\n    <div"+r.attr("class",r.classes(["fivey",p],[!1,!0]),!1,!0)+"></div>\n    <div"+r.attr("class",r.classes(["fivey-text",p],[!1,!0]),!1,!0)+">"+(null==(e=v)?"":e)+"</div>\n  </div>"}n+='\n</div>\n<div class="module latest-polls lazy-load-hide" id="latest-polls">';let t=u;if("president"===l&&h.match(/\d/)){const e=h.match(/([a-z]+)-(\d)/),n=e[1],r=f.states.toAbbrs[n];t=`${f.states.abbrs[r]}’s ${f.formatting.ordinal(+e[2])} District`}else if("house"===l){const e=h.split("-"),n=e.slice(0,e.length-1).join("-"),r=f.states.toAbbrs[n],a=e.slice(-1)[0];t=`${t}’s ${f.states.atLarge[r]?"at-large district":f.formatting.ordinal(a)+" District"}`}n=n+'\n  <h2 class="lead">'+(null==(e=i.latest_polls.title_dynamic.replace("{STATE}",t))?"":e)+'</h2>\n  <p class="polls-dek"></p>\n  <table'+r.attr("class",r.classes([l],[!0]),!1,!0)+'>\n    <thead class="d">\n      <tr>\n        <th class="pollster">'+(null==(e=i.latest_polls.table.pollster)?"":e)+'</th>\n        <th class="rating">'+(null==(e=i.latest_polls.table.rating)?"":e)+'</th>\n        <th class="dates">'+(null==(e=i.latest_polls.table.dates)?"":e)+'</th>\n      </tr>\n    </thead>\n    <tbody class="d"></tbody>\n    <thead class="m">\n      <tr>\n        <th class="pollster">'+(null==(e=i.latest_polls.table.pollster)?"":e)+'</th>\n        <th class="leader">'+(null==(e=i.latest_polls.table.leader)?"":e)+'</th>\n      </tr>\n    </thead>\n    <tbody class="m"></tbody>\n  </table>\n  <div class="polls-link"><a href="https://projects.fivethirtyeight.com/polls/"></a><img'+r.attr("src",f.imgSrc("carrot-usa.svg"),!0,!0)+' aria-hidden="true"></div>\n</div>\n<div id="model-picker">\n  <div class="picker-input-cont hide">\n    <p class="picker-title">'+(null==(e=i.model_picker.title)?"":e)+'</p>\n    <div class="model-inputs">',function(){var t=i.model_picker.models;if("number"==typeof t.length)for(var a=0,o=t.length;a<o;a++){var s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,o="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",o,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}else{o=0;for(var a in t){o++;s=t[a];n+='\n      <div class="model-input-cont">';const i=s.id,c="true"===s.checked;n=n+'\n        <input type="radio"'+r.attr("id",i,!0,!0)+' name="model-picker"'+r.attr("value",i,!0,!0)+r.attr("checked",c,!0,!0)+">\n        <label"+r.attr("for",i,!0,!0)+'> <span class="model-name">'+(null==(e=s.name)?"":e)+'</span>\n          <p class="model-desc">'+(null==(e=s.desc)?"":e)+"</p>\n        </label>\n      </div>"}}}.call(this),n=n+'\n    </div>\n    <p class="close-button">+</p>\n  </div>\n  <div class="picker-tooltip">'+(null==(e=i.model_picker.tooltip)?"":e)+'</div>\n  <div class="model-picker-art"></div>\n</div>'}}.call(this,"_"in i?i._:"undefined"!=typeof _?_:void 0,"archie"in i?i.archie:"undefined"!=typeof archie?archie:void 0,"archieChangeKey"in i?i.archieChangeKey:"undefined"!=typeof archieChangeKey?archieChangeKey:void 0,"archieRecirc"in i?i.archieRecirc:"undefined"!=typeof archieRecirc?archieRecirc:void 0,"archieSeatKey"in i?i.archieSeatKey:"undefined"!=typeof archieSeatKey?archieSeatKey:void 0,"chamber"in i?i.chamber:"undefined"!=typeof chamber?chamber:void 0,"state"in i?i.state:"undefined"!=typeof state?state:void 0,"stateSlug"in i?i.stateSlug:"undefined"!=typeof stateSlug?stateSlug:void 0,"utils"in i?i.utils:"undefined"!=typeof utils?utils:void 0),n}},function(t,e,n){n(65);t.exports=function(t){var e="";return e+='\n<div class="module-fivey-cont">\n  <div id="lede">\n    <div id="lede-chart"></div>\n  </div>\n</div>'}},function(t,e,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(88),a=n(26),i=n(50),o=n(49);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adScriptLoaded=!1,window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],this.networkID=window.location.hostname.indexOf("qa.538.io")>=0?"21743558653":"21783347309",this.slot="/".concat(this.networkID,"/abc-news/fivethirtyeight.com/web/elections/election-forecast"),this.bannerBase="div-gpt-ad-1558036340566-",this.bannerIdx=0,this.videoBase="div-gpt-ad-1593456950439-",this.videoIdx=-1,this.sponsorshipBase="div-gpt-ad-2558036340566-",this.sponsorshipIdx=0,this.skipAds=window.location.hostname.indexOf("localhost")>=0||window.location.search.indexOf("skipads")>=0,this.createdSlots={},this.adSizes={"ad-0":{xl:[[1280,100],[970,250],[728,90]],l:[[970,66],[970,250],[728,90]],m:[[728,90]],s:[[300,50]]},"ad-1":{xl:[[728,90]],l:[[728,90]],m:[[728,90]],s:[[300,250]]},"ad-13":{xl:[[1,3]],l:[[1,3]],m:[[1,3]],s:[[1,3]]},"sponsorship-desktop":{xl:[[303,42]],l:[[303,42]],m:[[303,42]],s:[[303,42]]},"sponsorship-mobile":{xl:[[258,59]],l:[[258,59]],m:[[258,59]],s:[[258,59]]}},this.placeholderSizes={"ad-1":{xl:[680,90],l:[680,90],m:[680,90],s:[300,250]},"ad-13":{xl:[520,290],l:[520,290],m:[520,290],s:[300,160]}},this.adPlacements=[{id:"ad-1",idx:1},{id:"ad-13",idx:3}]}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=this;this.breakpoint=this.getCurrentBreakpoint(),this.loadedAds={},this.bannerPosIdx=0,this.videoPosIdx=-1;var e=document.querySelectorAll(".module");this.adPlacements.forEach((function(t){var n=document.createElement("div");n.id=t.id,n.classList="ad inline",e[t.idx].parentNode.insertBefore(n,e[t.idx].nextSibling)})),this.skipAds||(this.loadAds(),window.addEventListener("scroll",(function(e){t.loadAds()})))}},{key:"loadAds",value:function(){var t=this;document.querySelectorAll(".ad").forEach((function(e){"sponsorship-desktop"===e.id&&window.innerWidth<870||"sponsorship-mobile"===e.id&&window.innerWidth>=870||t.loadedAds[e.id]||(t.loadedAds[e.id]=!0,t.loadAd(e))}))}},{key:"loadAd",value:function(t){var e=this;this.adScriptLoaded?this.insertAd(t):this.getScript("https://www.googletagservices.com/tag/js/gpt.js",(function(){e.adScriptLoaded=!0,e.insertAd(t)}))}},{key:"insertAd",value:function(t){var e=this,n=t.id.indexOf("sponsorship")>=0,r="ad-13"===t.id;if(!this.createdSlots[t.id]||!n&&"ad-0"!==t.id){var a;t.innerHTML="",n?(this.incrementSponsorship(),a=this.sponsorshipId):"ad-0"===t.id?a="".concat(this.bannerBase,"0"):r?(this.incrementVideo(),a=this.videoId):(this.incrementBanner(),a=this.bannerId);var i=document.createElement("div");i.setAttribute("id",a),t.appendChild(i);var o="ad-0"===t.id?"banner0":n?"dailyshowforecast":r?"outstream"+this.videoPosIdx:"banner"+this.bannerPosIdx;this.createdSlots[t.id]&&googletag.destroySlots([this.createdSlots[t.id]]),googletag.cmd.push((function(){var n=e.adSizes[t.id][e.breakpoint];for(var r in e.createdSlots[t.id]=googletag.defineSlot(e.slot,n,a).addService(googletag.pubads()).setTargeting("pos",o),window.custParams)googletag.pubads().setTargeting(r,window.custParams[r]);googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()})),googletag.cmd.push((function(){googletag.display(a)})),this.renderCallbackDefined||(this.renderCallbackDefined=!0,googletag.cmd.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(t){if(!t.isEmpty){var e=document.querySelector("#"+t.slot.getSlotElementId()).parentNode;e.classList.contains("inline")&&(e.style["margin-bottom"]="35px")}}))})))}else googletag.pubads().refresh([this.createdSlots[t.id]])}},{key:"incrementBanner",value:function(){this.bannerIdx+=1,this.bannerId="".concat(this.bannerBase).concat(this.bannerIdx),this.bannerPosIdx+=1}},{key:"incrementVideo",value:function(){this.videoIdx+=1,this.videoId="".concat(this.videoBase).concat(this.videoIdx),this.videoPosIdx+=1}},{key:"incrementSponsorship",value:function(){this.sponsorshipIdx+=1,this.sponsorshipId="".concat(this.sponsorshipBase).concat(this.sponsorshipIdx)}},{key:"getScript",value:function(t,e){var n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.async=1,r.parentNode.insertBefore(n,r),n.onload=n.onreadystatechange=function(t,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n=void 0,r||e&&e())},n.src=t}},{key:"getCurrentBreakpoint",value:function(){var t=window,e="inner";"innerWidth"in window||(e="client",t=document.documentElement||document.body);var n=t[e+"Width"];return n>1280?"xl":n>1024?"l":n>768?"m":"s"}}])&&s(e.prototype,n),r&&s(e,r),t}(),l=n(71),u=n(34),h=n(0),f=n(28);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=n(21),w=n(16),_=n(27),x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=g(e);if(y()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m(this,t)});function o(t,e,n,r,a,s,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(l=i.call(this,t,e,c)).candidate=r,l.model=n,l.height=c.height||250,l.bar_width=2,l.chart_variable="distribution",l.display270Label=a,l.lastChart=s,l.x={domain:c.x.domain||[0,538],tickCount:(c.x.tickCount||l.isMobile,5),tickPadding:c.y.tickPadding||10,tickSize:0,tickFormat:w.time_tickFormat},l.y={domain:c.y.domain||[0,1.5],tickCount:c.y.tickCount||null,tickValues:c.y.tickValues||null,tickPadding:c.y.tickPadding||7,tickFormat:w.percentTickFormat},l}return n=o,(r=[{key:"init",value:function(){this._processData()._drawChartFrame()._calculateXScale()._calculateYScale()._calculatePathGenerators()._addDefs()._drawXAxis()._drawBars()._annotate270()._drawTrend()._annotateTrend()._annotateCandidate()._annotateProb()._addTitle()}},{key:"_updateChart",value:function(t){return this.model=t,this._processData()._drawBars()._drawTrend()._annotateTrend(),this}},{key:"_processData",value:function(){var t=this;return this.chart_data=b.find(this.data,(function(e){return e.type===t.model})).candidates,this.chart_data=b.find(this.chart_data,(function(e){return e.candidate===t.candidate})),this.trend_data=[],this.chart_data.distribution.forEach((function(e,n){var r="Trump"===t.candidate?n:t.chart_data.distribution.length-n-1;if(r%10==0||r===t.chart_data.distribution.length-1||0===r){var a=t.chart_data.distribution.slice(Math.max(0,n-5),n-5+10+1).map((function(t){return t.chance}));t.trend_data.push({evs:e.evs,chance:a.reduce((function(t,e){return t+e}),0)/a.length})}})),this.trend_data.push({evs:this.trend_data[this.trend_data.length-1].evs+1,chance:this.trend_data[this.trend_data.length-1].chance}),this}},{key:"_addDefs",value:function(){return this.svgEl.append("defs").append("mask").attr("id","mask-".concat(w.slugify(this.candidate))).selectAll("rect").data([{klass:"ec-loss",x:this.xScale(0)},{klass:"ec-win",x:this.xScale(271)}]).enter().append("rect").attr("class",(function(t){return"mask ".concat(t.klass)})).attr("x",(function(t){return t.x})).attr("y",0).attr("width",this.xScale(270)).attr("height",this.height),this}},{key:"_calculateXScale",value:function(){return this.xScale=h.a.scaleLinear().domain(this.x.domain).range([0,this.width-this.margin.left-this.margin.right]),this}},{key:"_calculateYScale",value:function(){return this.yScale=h.a.scaleLinear().domain(this.y.domain).range([this.height-this.margin.bottom-this.margin.top,0]),this}},{key:"_calculatePathGenerators",value:function(){var t=this;return this.lineGenerator=h.a.line().x((function(e){return t.xScale(e.evs)})).y((function(e){return t.yScale(e.chance)})).curve(h.a.curveBundle.beta(1)),this}},{key:"_drawBars",value:function(){var t=this;this.chartEl.selectAll(".bar-g").remove();var e=this.chart_data.distribution.map((function(e){return"M".concat(t.xScale(e.evs),",").concat(t.yScale(e.chance),"L").concat(t.xScale(e.evs),",").concat(t.yScale(0),"Z")})).join(" ");return this.chartEl.append("path").attr("class","data-g bar-g ".concat(w.slugify(this.candidate))).attr("d",e).style("mask","url(#mask-".concat(w.slugify(this.candidate),")")),this}},{key:"_drawTrend",value:function(){var t=this;return this.chartEl.selectAll(".trend").remove(),this.chartEl.append("g").selectAll("g.data-g").data([this.trend_data,this.trend_data]).enter().append("path").attr("class",(function(e,n){return"data-g trend line ".concat(0===n?"bg":w.slugify(t.candidate))})).attr("d",(function(e){return t.lineGenerator(e)})).style("mask","url(#mask-".concat(w.slugify(this.candidate),")")),this}},{key:"_annotateTrend",value:function(){if(!this.display270Label)return this;var t=this.trend_data[35];this.chartEl.select("g.annotation-trend").remove(),this.annotationTrend=this.chartEl.append("g").attr("class","annotation annotation-trend").attr("transform","translate(".concat(this.xScale(t.evs),",").concat(this.yScale(t.chance)-4,")"));var e=h.a.line().curve(h.a.curveBundle.beta(.5));return this.annotationTrend.append("path").attr("class","curve").attr("d",e([[0,0],[0,-30],[30,-30]])),this.annotationTrend.append("path").attr("class","arrow").attr("d","M".concat([[-2,-7],[0,0],[7,-6]].map((function(t){return t.join(",")})).join("L"))),this.annotationTrend.append("text").attr("transform","translate(35,-27)rotate(-8)").selectAll("tspan").data(["Smoothed","rolling","average"]).enter().append("tspan").attr("x",0).attr("y",(function(t,e){return 12*e})).text((function(t){return t})),this}},{key:"_annotate270",value:function(){return this.annotation270=this.chartEl.append("g").attr("class","annotation annotation270"),this.annotation270.append("line").attr("x1",this.xScale(270)).attr("x2",this.xScale(270)).attr("y1",this.display270Label?15:0).attr("y2",this.lastChart?this.yScale(0):this.height),this.display270Label&&this.annotation270.append("text").attr("x",this.xScale(270)).attr("y",5).text(_.ec_distributions.annotation270),this}},{key:"_annotateCandidate",value:function(){this.annotationCandWins=this.chartEl.append("g").attr("class","annotation cand-wins"),this.annotationCandWins.append("text").attr("class","bg").attr("x",this.xScale(this.isMobile?370:340)).attr("y",this.display270Label?this.yScale(1.2):this.yScale(1.4)).append("tspan").attr("class","".concat(w.slugify(this.chart_data.candidate)," ")).text("".concat(this.chart_data.candidate)),this.annotationCandWins.append("text").attr("x",this.xScale(this.isMobile?370:340)).attr("y",this.display270Label?this.yScale(1.2):this.yScale(1.4)).append("tspan").attr("class","".concat(w.slugify(this.chart_data.candidate)," ")).text("".concat(this.chart_data.candidate));var t=this.xScale(this.isMobile?376:346);this.annotationCandWins.append("text").attr("class","bg").attr("x",t).attr("y",this.display270Label?this.yScale(1.2):this.yScale(1.4)).text(_.ec_distributions.cand_wins),this.annotationCandWins.append("text").attr("x",t).attr("y",this.display270Label?this.yScale(1.2):this.yScale(1.4)).text(_.ec_distributions.cand_wins);var e=this.annotationCandWins.append("g").attr("transform","translate(".concat(t+40,",").concat(this.display270Label?this.yScale(1.23):this.yScale(1.43),")")).attr("class","arrow");return e.append("path").attr("transform","translate(15,0)rotate(90)").attr("d",(function(){return h.a.symbol().type(h.a.symbolTriangle).size(20)()})),e.append("line").attr("x1",0).attr("x2",15).attr("y1",0).attr("y2",0),this}},{key:"_annotateProb",value:function(){if(this.display270Label){var t=this.yScale.range().reduce((function(t,e){return t+e}),0)/2;this.annotateProb=this.chartEl.append("g").attr("class","annotation prob").attr("transform","translate(0, ".concat(t,")"));var e=this.annotateProb.append("g").attr("transform","translate(34, -7)").attr("class","arrow");e.append("path").attr("d",(function(){return h.a.symbol().type(h.a.symbolTriangle).size(20)()})),e.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",15),this.annotateProb.append("text").attr("class","bg").selectAll("tspan").data(_.ec_distributions.annotationUp.split(" ")).enter().append("tspan").attr("x",10).attr("y",(function(t,e){return 25+17*e})).text((function(t){return t})),this.annotateProb.append("text").selectAll("tspan").data(_.ec_distributions.annotationUp.split(" ")).enter().append("tspan").attr("x",10).attr("y",(function(t,e){return 25+17*e})).text((function(t){return t}))}return this}},{key:"_drawXAxis",value:function(){return this.x.axis=h.a.axisBottom(this.xScale).ticks(this.x.tickCount).tickSize(this.x.tickSize).tickSizeOuter(0).tickPadding(this.x.tickPadding).tickFormat(this.x.tickFormat),this.chartEl.append("g").attr("transform","translate(0,"+(this.height-this.margin.bottom-this.margin.top)+")").attr("class","axis axis-x").call(this.x.axis),this}},{key:"_addTitle",value:function(){var t=b.pluck(b.filter(this.chart_data.distribution,(function(t){return t.evs>=270})),"chance"),e=b.reduce(t,(function(t,e){return t+e}),0),n=b.template(_.ec_distributions.title,{interpolate:/\{\{(.+?)\}\}/g})({cand:this.chart_data.candidate,winningPerc:w.formatting.formatPercentage(e,1)});return this.svgEl.select("desc").html(n),this}}])&&p(n.prototype,r),a&&p(n,a),o}(f.a);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=D(e);if(A()){var r=D(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return E(this,t)});function o(){return S(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){var t=this;j(D(o.prototype),"init",this).call(this),this.appData.fetch("".concat(staticUrl,"/electoral_votes.json")).then((function(e){t.ecDistributionChartTrump=new x(e,"#ec-distributions-chart-trump",t.model,"Trump",!0,!1,{x:{},y:{},margin:{top:10,left:t.isMobile?10:40,bottom:30,right:t.isMobile?0:10}}),t.ecDistributionChartBiden=new x(e,"#ec-distributions-chart-biden",t.model,"Biden",!1,!0,{x:{},y:{},margin:{top:10,left:t.isMobile?10:40,bottom:30,right:t.isMobile?0:10}}),t.ecDistributionChartTrump.init(),t.ecDistributionChartBiden.init(),j(D(o.prototype),"initEnd",t).call(t)}))}},{key:"onModelChange",value:function(t){j(D(o.prototype),"onModelChange",this).call(this,t),this.initialized&&(this.model=t,this.ecDistributionChartTrump._updateChart(this.model),this.ecDistributionChartBiden._updateChart(this.model),j(D(o.prototype),"onModelChangeEnd",this).call(this))}}])&&O(n.prototype,r),a&&O(n,a),o}(u.a),T=n(80),P=n(64);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z=n(21),W=n(16),Y=n(27),q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=G(e);if(U()){var r=G(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return H(this,t)});function o(){return B(this,o),i.apply(this,arguments)}return n=o,a=[{key:"formatDateSpan",value:function(t,e){if(t.getMonth()===e.getMonth()){var n=W.dates.months[t.getMonth()],r=t.getDate()===e.getDate()?t.getDate():"".concat(t.getDate(),"-").concat(e.getDate());return"".concat(n," ").concat(r)}var a=W.dates.months[t.getMonth()],i=W.dates.months[e.getMonth()];return"".concat(a," ").concat(t.getDate(),"-").concat(i," ").concat(e.getDate())}}],(r=[{key:"init",value:function(){var t=this;if(F(G(o.prototype),"init",this).call(this),this.rootEl=h.a.select("#latest-polls"),this.tableEl=this.rootEl.select("table"),this.tableBodyDesktop=this.tableEl.select("tbody.d"),this.pollsLink=this.rootEl.select(".polls-link a"),this.tableBodyMobile=this.tableEl.select("tbody.m"),this.CANDIDATE_ORDER=["Trump","Biden"],this.stateName=W.states.abbrs[W.states.toAbbrs[this.state]],this.linkNameTemplate=z.template(Y.latest_polls.link_updated,{interpolate:/\{\{(.+?)\}\}/g}),this.pTemplate=z.template(Y.latest_polls.p,{interpolate:/\{\{(.+?)\}\}/g}),"president"===this.chamber&&this.state.match(/-\d/)){var e=this.state.match(/([a-z]+)-(\d)/),n=e[1],r=W.states.toAbbrs[n],a=W.states.abbrs[r],i=W.formatting.ordinal(+e[2]);this.stateName="".concat(a,"’s ").concat(i," District")}else if("senate"===this.chamber){var s=this.state.match(/-S(\d)/),c=this.state.replace(/-S(\d)/,""),l=W.states.toAbbrs[c],u=W.states.abbrs[l];this.stateName=u,this.stateLookup="".concat(l).concat(s[0])}else if("house"===this.chamber){var f=this.state.split("-"),d=f.slice(0,f.length-1).join("-"),p=W.states.toAbbrs[d],v=f.slice(-1)[0];this.stateName=W.states.abbrs[p],this.stateLookup="".concat(p,"-").concat(v)}Promise.all([this.appData.fetch("".concat(staticUrl,"/").concat("president"!==this.chamber?"".concat(this.chamber,"_"):"").concat(this.state,"_polls.json")),this.appData.fetch("".concat(staticUrl,"/senate_candidates.json")),this.appData.fetch("".concat(staticUrl,"/house_candidates.json"))]).then((function(e){var n=N(e,3),r=n[0],a=n[1],i=n[2];t.data=r;var s=[];if(z.each(z.flatten(z.pluck(t.data.polls,"answers")),(function(t){-1===z.indexOf(s,t.candidate)&&t.pct>0&&s.push(t.candidate)})),"senate"===t.chamber||"house"===t.chamber){t.candidates=("senate"===t.chamber?a:i)[t.stateLookup];var c=["R","D","I"];t.candidates=z.filter(t.candidates,(function(t){return z.indexOf(s,t.name)>-1})),t.candidates=z.chain(t.candidates).sortBy((function(t){return t.party_order})).sortBy((function(t){return z.indexOf(c,t.party)})).value(),t.CANDIDATE_ORDER=z.pluck(t.candidates,"name"),t.topTwoSameParty=W.house.topTwoSameParty(t.candidates)}t.data.total>0&&(t.rootEl.classed("lazy-load-hide",!1),t._drawTable(),t._setLink(),t._setDek(),t._setCandidates(),t._updateHedSpecial()),F(G(o.prototype),"initEnd",t).call(t)}))}},{key:"_drawTable",value:function(){var t=this;this.data.polls.forEach((function(e){var n=t.tableBodyDesktop.append("tr"),r=z.sortBy(e.answers,"pct").reverse(),a={},i=null,s=null;z.each(r,(function(t,e){a[t.candidate]=t.pct,0===e?i=t.candidate:1===e&&(s=Math.round(a[i]-t.pct)),0===s&&(i="Even")}));var c=e.grade.replace("-","").replace("+","").replace("/","-");n.append("td").attr("class","pollster").html(e.pollster);var l=n.append("td").attr("class","rating");e.grade&&l.html('<div class="grade '.concat(c,'"><div class="grade-text">').concat(e.grade,"</div></div>")),n.append("td").attr("class","dates").text(o.formatDateSpan(new Date(e.start+"T12:00:00.000Z"),new Date(e.end+"T12:00:00.000Z"))),z.each(t.CANDIDATE_ORDER,(function(e){var r=z.find(t.candidates,(function(t){return t.name===e})),i="";if("president"===t.chamber)i="trump"===W.slugify(e)?"border-right":"";else{var o=z.max(z.pluck(z.filter(t.candidates,(function(t){return"R"===t.party})),"party_order"));if(i="R"===r.party&&r.party_order===o?"border-right":"",z.uniq(z.pluck(t.candidates,"party")).length>2){var s=z.max(z.pluck(z.filter(t.candidates,(function(t){return"D"===t.party})),"party_order"));"D"===r.party&&r.party_order===s&&(i="border-right")}}var c=i;"president"!==t.chamber&&(c+=" ".concat(r.party),t.topTwoSameParty&&(c+=r.party_order)),n.append("td").attr("class","candidate ".concat(W.slugify(e)," ").concat(c)).text(void 0===a[e]?"":"".concat(Math.round(a[e]),"%"))}));var u="",h="";if("president"===t.chamber||"Even"===i)u=W.slugify(i),h=i;else{var f=z.find(t.candidates,(function(t){return t.name===i}));u=f.party,h=f.short}n.append("td").attr("class","leader ".concat(u)).text(h),n.append("td").attr("class","leader ".concat(u)).text("+".concat(s));var d=t.tableBodyMobile.append("tr"),p=d.append("td").attr("class","pollster m");e.grade?p.html('<div class="pollster-text">'.concat(e.pollster,'<span class="grade ').concat(c,' m">').concat(e.grade,"</span></div>")):p.html("".concat(e.pollster)),d.append("td").attr("class","leader ".concat(u," m")).text("".concat(h," +").concat(s))}))}},{key:"_setDek",value:function(){if("president"!==this.chamber)return this.rootEl.select(".polls-dek").html(Y.latest_polls.p_house_senate),this;var t=this.pTemplate({state:this.stateName,polls:Math.round(this.data.weights.polls),nonpolls:Math.round(this.data.weights.nonpolls)});this.rootEl.select(".polls-dek").html(t)}},{key:"_setCandidates",value:function(){var t=this,e=this.tableEl.select("thead").select("tr");if(z.each(this.CANDIDATE_ORDER,(function(t){e.append("th").attr("class","candidate").text(t)})),e.append("th").attr("class","leader").text(Y.latest_polls.table.leader),e.append("th").attr("class","margin").text(Y.latest_polls.table.margin),"president"===this.chamber)return this;this.tableEl.select("thead").selectAll("th.candidate").each((function(e,n,r){h.a.select(r[n]).classed("th-rotate",!0).html("<div><span class='t-cand-last'>".concat(z.find(t.candidates,(function(e){return e.name===t.CANDIDATE_ORDER[n]})).short,"</span></div>"))}))}},{key:"_setLink",value:function(){var t=N(this.state.match(/\d$/)?this.state.split("-"):[this.state,null],2),e=t[0],n=t[1],r="https://projects.fivethirtyeight.com/polls/";"president"===this.chamber?r+="president-general/".concat(e,"/").concat(n?"".concat(n,"/"):""):r+="".concat(this.chamber,"/").concat(W.slugify(this.stateName),"/");var a=this.stateName.replace(/’s/,"");"senate"===this.chamber?a+=" Senate":"house"===this.chamber&&(a+=" House"),this.pollsLink.attr("href",r).html(this.linkNameTemplate({state:a}))}},{key:"_updateHedSpecial",value:function(){if(!this.state.match(/-S3/))return this;var t=this.chamber;this.rootEl.select("h2").html((function(){return h.a.select(this).html().replace("?","'s special ".concat(W.formatting.capitalize(t)," election?"))}))}}])&&I(n.prototype,r),a&&I(n,a),o}(u.a);function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e,n){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=et(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nt=n(21),rt=n(22)(n(16),n(11)),at=n(27),it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=et(e);if(tt()){var r=et(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Q(this,t)});function o(){return $(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){var t=this;K(et(o.prototype),"init",this).call(this),this.appData.fetch("".concat(staticUrl,"/").concat(this.state,"_steps.json")).then((function(e){if(t.data=e[0],t.steps=t.data.steps,t.cands=nt.uniq(nt.flatten(nt.map(t.steps,(function(t){return nt.pluck(t.candidates,"candidate")})))),t.rootEl=h.a.select("#polls-to-forecast"),t.tableEl=t.rootEl.select("table"),t.dekTemplate=nt.template(at.polls_to_forecast.dek,{interpolate:/\{\{(.+?)\}\}/g}),t.descriptions=at.polls_to_forecast.descriptions,t.formats=function(t,e){return{1:rt.formatting.formatPercentage(e,1),2:"".concat(e>0?"+":"").concat(rt.fixedRound(e,1)),3:rt.formatting.formatPercentage(e,1),4:"".concat(e>0?"+":"").concat(rt.fixedRound(e,1)),5:rt.formatting.formatPercentage(e,1),6:rt.formatting.formatPercentage(e,1),7:rt.formatting.formatPercentage(e,1),8:rt.formatting.formatPercentage(e,1),9:rt.formatting.formatPercentage(e,1),10:rt.formatting.formatPercentage(100*e,1)}[t]},t.highlight=[],t.number=[1,3,5,7,9],t.bold=t.number,t.underline=[3,5,7,9],t.remove=[10],t.addWeights={7:at.polls_to_forecast.dem_weight_sent,9:at.polls_to_forecast.econ_weight_sent},t.smallMobile=window.innerWidth<375,t.stateName=rt.states.abbrs[rt.states.slugToAbbr(t.state)],t.state.match(/-\d/)){var n=t.state.match(/([a-z]+)-(\d)/),r=n[1],a=rt.states.toAbbrs[r],i=rt.states.abbrs[a],s=rt.formatting.ordinal(+n[2]);t.stateName="".concat(i,"’s ").concat(s," District")}t._drawTable(),t._updateDek(),K(et(o.prototype),"initEnd",t).call(t)}))}},{key:"_updateDek",value:function(){this.rootEl.select("p.dek").html(this.dekTemplate({state:this.stateName}))}},{key:"_drawMobileHeaders",value:function(){this.tableEl.select("thead").select("tr").append("th").attr("class","cand")}},{key:"_drawDesktopHeaders",value:function(){var t=this;nt.each(this.cands,(function(e){t.tableEl.select("thead").select("tr").append("th").attr("class","cand ".concat(rt.slugify(e))).text(e)}))}},{key:"_drawMobileCandCols",value:function(t,e,n,r,a){if(r){var i=nt.sortBy(t.candidates,(function(t){return-1*t.value})),o=i[0].candidate,s=i[0].value-i[1].value;n.append("td").attr("class","value ".concat(e?"highlight":""," ").concat(r?"bold "+rt.slugify(o):""," ").concat(a?"underline":"")).text(r?"".concat(o," +").concat(rt.fixedRound(s,1)):"")}}},{key:"_drawDesktopCandCols",value:function(t,e,n,r,a){var i=this,o=r?nt.sortBy(t.candidates,(function(t){return-1*t.value}))[0].candidate:null;nt.each(t.candidates,(function(s){n.append("td").attr("class","value ".concat(e?"highlight":""," ").concat(r?"bold":""," ").concat(a?"underline":""," ").concat(s.candidate===o&&s.value>0?rt.slugify(s.candidate):"")).text(0===s.value?"--":i.formats(t.step,s.value))}))}},{key:"_drawTable",value:function(){var t=this;this.smallMobile?this._drawMobileHeaders():this._drawDesktopHeaders(),nt.each(this.steps,(function(e){if(-1===nt.indexOf(t.remove,e.step)){var n=nt.indexOf(t.highlight,e.step)>-1,r=nt.indexOf(t.bold,e.step)>-1,a=nt.indexOf(t.underline,e.step)>-1,i=t.tableEl.select("tbody").append("tr");i.append("td").attr("class","step ".concat(n?"highlight":""," ").concat(r?"bold":""," ").concat(a?"underline":"")).text("".concat(nt.indexOf(t.number,e.step)>-1?nt.indexOf(t.number,e.step)+1+".":""));var o=nt.indexOf(nt.keys(t.addWeights),"".concat(e.step))>-1,s=t.descriptions[e.step]||e.description;if(o){var c=nt.find(t.steps,(function(t){return t.step===e.step-1})).weight,l=1-c,u=nt.template(t.addWeights[e.step],{interpolate:/\{\{(.+?)\}\}/g});s+="<p class=weight>".concat(u({perc:rt.fixedRound(100*c,0),polls:rt.fixedRound(100*l,0),state:t.stateName}),"</p>")}i.append("td").attr("class","description ".concat(r?"bold":""," ").concat(n?"highlight":""," ").concat(a?"underline":"")).html(s),t.smallMobile?t._drawMobileCandCols(e,n,i,r,a):t._drawDesktopCandCols(e,n,i,r,a)}}))}},{key:"onModelChange",value:function(t){K(et(o.prototype),"onModelChange",this).call(this,t),this.initialized&&(console.log("polls-to-forecast model change"),K(et(o.prototype),"onModelChangeEnd",this).call(this))}}])&&J(n.prototype,r),a&&J(n,a),o}(u.a);function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ft=n(21),dt=n(16),pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=ht(e);if(ut()){var r=ht(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return lt(this,t)});function o(t,e,n,r,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(s=i.call(this,t,e,r)).model=n,s.state=r.state,s.mapData=a,s}return n=o,(r=[{key:"init",value:function(){this._drawChartFrame()._processData()._addDefs()._drawMap()._drawStateName()}},{key:"_processData",value:function(){var t=this;return this.chart_data=ft.find(this.data,(function(e){return e.type===t.model})),this.state_data=ft.find(this.chart_data.states,(function(e){return e.state===t.state})),this.states_map=this.mapData,this.state_map={type:"FeatureCollection",features:ft.filter(this.states_map.features,(function(e){return e.properties.name===t.state}))},this}},{key:"_addDefs",value:function(){this.defs=this.svgEl.append("defs"),this.gradient=this.defs.append("linearGradient").attr("id","gradient_".concat(this.state)),this.gradient.append("stop").attr("class","stop-left").attr("offset",0);var t=(50-this.state_data.margin.mean/2)/100;return this.gradient.append("stop").attr("class","stop-left").attr("offset",t-.1),this.gradient.append("stop").attr("stop-color","rgb(169, 97, 126)").attr("offset",t),this.gradient.append("stop").attr("class","stop-right").attr("offset",t+.1),this.gradient.append("stop").attr("class","stop-right").attr("offset",1),this}},{key:"_drawMap",value:function(){var t=h.a.geoAlbersUsa().scale(1).translate([0,0]),e=h.a.geoPath().projection(t),n=Object({US:Object({0:Object({0:-.418743197681691,1:-.22353850659994334}),1:Object({0:.3612513098653094,1:.23003135990302526})}),AL:Object({0:Object({0:.11852084049901104,1:.05744876562023449}),1:Object({0:.17170251780985146,1:.1431255841968082})}),AK:Object({0:Object({0:-.418743197681691,1:.12275783223673714}),1:Object({0:-.21892589040227195,1:.23003135990302526})}),AZ:Object({0:Object({0:-.2655734417430158,1:.006397675869633135}),1:Object({0:-.17139893846361295,1:.11638540065642289})}),AR:Object({0:Object({0:.027303705767189893,1:.036365661725364706}),1:Object({0:.09575796601033812,1:.09975623080108309})}),CA:Object({0:Object({0:-.3607938250764278,1:-.1116363375662901}),1:Object({0:-.249770235100916,1:.07849522685885724})}),CO:Object({0:Object({0:-.17139893846361295,1:-.052158885264004695}),1:Object({0:-.0709529112883588,1:.027440399473106947})}),CT:Object({0:Object({0:.29512928263436167,1:-.09793164182914293}),1:Object({0:.3190001571472974,1:-.07442705348385092})}),DE:Object({0:Object({0:.27491366646067833,1:-.04891891136778659}),1:Object({0:.28942351474619066,1:-.025060702940925994})}),DC:Object({0:Object({0:.26031918383092373,1:-.030519045951874935}),1:Object({0:.2632373572865921,1:-.02697972840344276})}),FL:Object({0:Object({0:.13290524432963657,1:.12299992158080242}),1:Object({0:.2586624347992543,1:.21899936967511402})}),GA:Object({0:Object({0:.15518165365817904,1:.05280303553017962}),1:Object({0:.22970171163243697,1:.13161768994915635})}),HI:Object({0:Object({0:-.20075181095160238,1:.1716964859084762}),1:Object({0:-.11942576922279577,1:.22882264313203415})}),ID:Object({0:Object({0:-.2605150698321949,1:-.2070367504469659}),1:Object({0:-.17805287623179894,1:-.07341427210597029})}),IL:Object({0:Object({0:.06741678635990037,1:-.07126455098127105}),1:Object({0:.12255791489041999,1:.026828294874096548})}),IN:Object({0:Object({0:.11628921316161366,1:-.06233750266639437}),1:Object({0:.1584731318702939,1:.011344816802685509})}),IA:Object({0:Object({0:25684727085155748e-21,1:-.08595953278397395}),1:Object({0:.08348631590663506,1:-.031028350793453674})}),KS:Object({0:Object({0:-.07525546626824667,1:-.02544216571243041}),1:Object({0:.027176075171766748,1:.029844439012791213})}),KY:Object({0:Object({0:.09946869144860353,1:-.016534465628329942}),1:Object({0:.19970028203911677,1:.03570177067537439})}),LA:Object({0:Object({0:.036576599461854105,1:.09858033028130753}),1:Object({0:.11469382045306753,1:.16671975988855325})}),ME:Object({0:Object({0:.3103370760821277,1:-.1996470502955554}),1:Object({0:.3612513098653094,1:-.11911388734646455})}),MD:Object({0:Object({0:.22671211078374817,1:-.04644617488999914}),1:Object({0:.28942351474619066,1:-.014936064680884042})}),MA:Object({0:Object({0:.29467346976793807,1:-.11553459571235858}),1:Object({0:.34044245772184334,1:-.09124290624808395})}),MI:Object({0:Object({0:.0752971116627323,1:-.16927648919791372}),1:Object({0:.1800239976324344,1:-.05955244104499857})}),MN:Object({0:Object({0:-.006144233203130395,1:-.1867961062090624}),1:Object({0:.0831919818981112,1:-.08445561347273123})}),MS:Object({0:Object({0:.07292917481232862,1:.060753476673936824}),1:Object({0:.12229942119962929,1:.1464305450473693})}),MO:Object({0:Object({0:.0111700897700214,1:-.034948452328809276}),1:Object({0:.1028102610099469,1:.04531270962209688})}),MT:Object({0:Object({0:-.2263492264839051,1:-.20458979821520829}),1:Object({0:-.08509163392048602,1:-.11479028301552852})}),NE:Object({0:Object({0:-.09696075551508154,1:-.08003190099559054}),1:Object({0:.01728034307195559,1:-.022920975977374525})}),NV:Object({0:Object({0:-.3109191325302651,1:-.0968169871932536}),1:Object({0:-.22290032626399248,1:.03936854949492097})}),NH:Object({0:Object({0:.3023760984199619,1:-.15580614008748483}),1:Object({0:.32516853150257435,1:-.10788319535222812})}),NJ:Object({0:Object({0:.27817997852175175,1:-.07774051340149146}),1:Object({0:.2966461736138643,1:-.03683231259379349})}),NM:Object({0:Object({0:-.1851048166554131,1:.01764782235813489}),1:Object({0:-.08848048158821295,1:.11803616279934603})}),NY:Object({0:Object({0:.21540461088826493,1:-.1440306309339372}),1:Object({0:.31707706062056495,1:-.06598161725474183})}),NC:Object({0:Object({0:.17313623726121283,1:.008397373267847508}),1:Object({0:.29084402788841107,1:.06242424961416848})}),ND:Object({0:Object({0:-.08957589950004675,1:-.18411013928776843}),1:Object({0:.0012562510748158869,1:-.1269975621889372})}),OH:Object({0:Object({0:.15251806706581328,1:-.0738799389774043}),1:Object({0:.21045094399146888,1:-.007893904701617771})}),OK:Object({0:Object({0:-.089126412220319,1:.026424233457524204}),1:Object({0:.030230185297256948,1:.08899068067903282})}),OR:Object({0:Object({0:-.3510648235919569,1:-.18061883670584056}),1:Object({0:-.23985992491082472,1:-.08794086984574201})}),PA:Object({0:Object({0:.20663078766468995,1:-.08685035300050026}),1:Object({0:.2861281437137403,1:-.03469534487575321})}),RI:Object({0:Object({0:.31639072557100745,1:-.09919247630940076}),1:Object({0:.32715940543841626,1:-.08579438985087973})}),SC:Object({0:Object({0:.1877656292965427,1:.046001933940012174}),1:Object({0:.2578645934861985,1:.09971444144164221})}),SD:Object({0:Object({0:-.09398446186902153,1:-.13127330942376636}),1:Object({0:.002570535011614245,1:-.06665450776626547})}),TN:Object({0:Object({0:.08869924690305836,1:.022256911659459755}),1:Object({0:.20614486483140043,1:.0628730131907631})}),TX:Object({0:Object({0:-.14855296064749263,1:.03513767437218984}),1:Object({0:.04502228082352992,1:.22423042543288374})}),UT:Object({0:Object({0:-.23956626121463295,1:-.07998934972475125}),1:Object({0:-.1618204759246344,1:.01764782235813489})}),VT:Object({0:Object({0:.28461958129758447,1:-.14960270477946325}),1:Object({0:.3081353208726827,1:-.1056514903840109})}),VA:Object({0:Object({0:.17868339681194248,1:-.03528307475632331}),1:Object({0:.28843487912737786,1:.025969926702942736})}),WA:Object({0:Object({0:-.326054518196007,1:-.22353850659994334}),1:Object({0:-.23378158512218086,1:-.155817989156116})}),WV:Object({0:Object({0:.18898620203703476,1:-.05063217087161376}),1:Object({0:.2510973259963455,1:.011569810652628965})}),WI:Object({0:Object({0:.046166541509009715,1:-.14646687939678116}),1:Object({0:.11812103107316933,1:-.0689471402557571})}),WY:Object({0:Object({0:-.18767740210913744,1:-.12536680374645393}),1:Object({0:-.09108951811586176,1:-.04498358680896164})})})[this.state],r=n[1][0]-n[0][0],a=n[1][1]-n[0][1],i=.9/Math.max(r/this.width,a/this.height),o=[(this.width-i*(n[1][0]+n[0][0]))/2,(this.height-i*(n[1][1]+n[0][1]))/2];return t.scale(i).translate(o),this.chartEl.append("path").datum(this.state_map).attr("class","feature").attr("d",e).style("stroke","url(#gradient_".concat(this.state,")")),this}},{key:"_drawStateName",value:function(){var t=dt.states.abbrs[this.state],e=".".concat(this.state.split("").map((function(t){return t.charCodeAt(0)})).join("")),n=(40*+e-20)*(+e[2]%2==0?-1:1),r="translate(".concat(this.width/2,", ").concat(this.height/2,") rotate (").concat(n," 0 0)");return this.chartEl.append("text").attr("class","state-label bg").attr("x",0).attr("y",0).attr("transform",r).text(t),this.chartEl.append("text").attr("class","state-label").attr("x",0).attr("y",0).attr("transform",r).text(t),this}}])&&st(n.prototype,r),a&&st(n,a),o}(f.a);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e,n){return(gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xt(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wt(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kt=n(21),St=n(16),Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=xt(e);if(_t()){var r=xt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return wt(this,t)});function o(){return mt(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){var t=this;gt(xt(o.prototype),"init",this).call(this),Promise.all([this.appData.fetch("".concat(staticUrl,"/state_summary.json")),this.appData.fetch("".concat(staticUrl,"/us_states.json")),this.appData.fetch("".concat(staticUrl,"/states_electoral_votes.json"))]).then((function(e){t.data=e[0],t.mapData=e[1],t.ecVotesData=e[2],kt.each(t.data,(function(e){kt.each(e.states,(function(e){e.ecVotes=kt.find(t.ecVotesData,(function(t){return t.state===e.state})).votes}))})),t.parentEl="#state-recirc-container",t.numberOfStates=t.isMobile?4:9,t._resizeDropdowns(),t._getCurrentDropdownMetric(),t.states=t._findStates(t.numberOfStates,t.metric),kt.each(t.states,(function(e){t._stateInit(e)})),h.a.select("#state-recirc-metric-dropdown").on("change",(function(){return t._handleMetricDropdownChange()})),h.a.select("#state-recirc-state-dropdown").on("change",t._handleStateDropdownChange),gt(xt(o.prototype),"initEnd",t).call(t)}))}},{key:"_findStates",value:function(t,e){var n=this,r={tipping:function(t){return-1*t.tipping},margin:function(t){return Math.abs(t.margin.mean)},random:function(t){return Math.random()}}[e],a=t||3,i=kt.find(this.data,(function(t){return t.type===n.model})).states,o=kt.filter(i,(function(t){return 2===t.state.length&&t.state!==St.states.toAbbrs[n.state]})),s=kt.sortBy(o,r);return kt.pluck(s,"state").slice(0,a)}},{key:"_getCurrentDropdownMetric",value:function(){var t=document.getElementById("state-recirc-metric-dropdown");this.metric=t.options[t.selectedIndex].value}},{key:"_handleMetricDropdownChange",value:function(){var t=this;this._resizeDropdowns(),this._getCurrentDropdownMetric(),h.a.select(this.parentEl).html(""),this.states=this._findStates(this.numberOfStates,this.metric),kt.each(this.states,(function(e){t._stateInit(e)}))}},{key:"_handleStateDropdownChange",value:function(){var t=this.options[this.selectedIndex].value;window.forecastNavigator.navigateToState(t,interactivePage.chamber)}},{key:"_stateInit",value:function(t){var e=St.slugify(St.states.abbrs[t]);this.stateLink=h.a.select(this.parentEl).append("div").attr("class","state-recirc-link state-recirc-link-".concat(t)).attr("tabindex","0").attr("role","link").attr("aria-label",St.states.abbrs[t]),this.stateLink.on("click",(function(){window.forecastNavigator.navigateToState(e,interactivePage.chamber)})),this.stateLink.append("div").attr("class","recirc").attr("id","recirc-".concat(t)),this["chart_".concat(t)]=new pt(this.data,"#recirc-".concat(t),this.model,{state:t},this.mapData),this["chart_".concat(t)].init()}},{key:"_resizeDropdowns",value:function(){St.dom.resizeSelect(document.getElementById("state-recirc-metric-dropdown")),St.dom.resizeSelect(document.getElementById("state-recirc-state-dropdown"),15)}},{key:"onModelChange",value:function(t){gt(xt(o.prototype),"onModelChange",this).call(this,t),this.initialized&&(this._handleMetricDropdownChange(),gt(xt(o.prototype),"onModelChangeEnd",this).call(this))}}])&&yt(n.prototype,r),a&&yt(n,a),o}(u.a),jt=n(81);function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dt(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pt=n(21),Rt=n(16),Nt=n(27),Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=Tt(e);if(Ct()){var r=Tt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Dt(this,t)});function o(t,e,n,r,a){var s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(s=i.call(this,t,e,a)).model=n,s.chamber=r,s.dataByModel=Pt.indexBy(s.data,(function(t){return t.type})),s.seats="senate"===s.chamber?100:435,s.majority=s.seats/2,s.party=a.party;var c=s.isMobile?Nt.seat_distribution.hed_mobile:Nt.seat_distribution.hed;return s.template=Pt.template(c,{interpolate:/\{\{(.+?)\}\}/g}),s.templateTossup=Pt.template(Nt.seat_distribution.hed_tossup,{interpolate:/\{\{(.+?)\}\}/g}),s.templateDek=Pt.template(Nt["senate"===s.chamber?"seat_distribution":"house_seat_distribution"].dek,{interpolate:/\{\{(.+?)\}\}/g}),s.takeawayPartyTemplate=Pt.template(Nt.seat_distribution.takeaway_party,{interpolate:/\{\{(.+?)\}\}/g}),s.takeawayTemplate=Pt.template(Nt.seat_distribution.takeaway,{interpolate:/\{\{(.+?)\}\}/g}),s.probsTemplate=Pt.template(Nt.seat_distribution.probsSentence,{interpolate:/\{\{(.+?)\}\}/g}),s}return n=o,(r=[{key:"init",value:function(){this._drawChartFrame(),this._calculateScales(),this._processData(),this._annotate(),this._drawBars(),this._drawAxes(),this._drawHoverShapes(),this._addHover(),this._updateHedAndDek()}},{key:"_processData",value:function(){if(this.chartData=this.dataByModel[this.model],!this.party){var t={};this.chartData.distribution.forEach((function(e){t[e.seats]=!0}));for(var e=this.minSeats;e<=this.maxSeats;e++)t[e]||this.chartData.distribution.push({party:"D",seats:e,chance:0,control:0})}this.chartData.distribution=Pt.chain(this.chartData.distribution).sortBy((function(t){return t.seats})).sortBy((function(t){return"R"===t.party?1:2})).value(),this.repMean=Pt.find(this.chartData.latest,(function(t){return"Republicans"===t.candidate})).seats.mean,this.demMean=Pt.find(this.chartData.latest,(function(t){return"Democrats"===t.candidate})).seats.mean,this.avgGain=Math.max(this.repMean,this.demMean),this.leadingParty=this.avgGain===this.repMean?"R":"D"}},{key:"_updateChart",value:function(t){this.model=t,this._processData(),this.party||(this._drawAverage(),this._drawCI()),this._drawBars(),this._drawProbs(),this._updateHedAndDek(),this._addHover(),this.party||(this.xAxis.raise(),this.hoverG.raise())}},{key:"_calculateScales",value:function(){var t=this;this.minSeats={senate:100,house:435}[this.chamber],this.maxSeats=0;var e=0;Object.values(this.dataByModel).forEach((function(n){n.distribution.forEach((function(n){0!==(n.chance||n.control)&&(n.seats>t.maxSeats&&(t.maxSeats=n.seats),n.seats<t.minSeats&&(t.minSeats=n.seats),(n.control||n.chance)>e&&(e=n.chance||n.control))}))})),this.xScale=h.a.scaleLinear().domain([this.minSeats,this.maxSeats+1]).range([0,this.width-(this.isMobile?this.margin.right+this.margin.left:20)]),this.barWidth=Math.max(1,this.xScale(this.xScale.domain()[0]+1)-2),this.barWidthHover=Math.max(1,this.xScale(this.xScale.domain()[0]+1)),this.yScale=h.a.scaleLinear().domain([0,e]).range([0,this.height-this.margin.bottom-this.margin.top])}},{key:"_drawBars",value:function(){var t=this;this.chartEl.selectAll("g.bar").remove();var e=this.chartEl.selectAll("g.bar").data(this.chartData.distribution).enter().append("g").attr("class","bar").attr("transform",(function(e,n){return"translate(".concat(t.xScale(e.seats),",0)")})),n=function(e,n){if("senate"===t.chamber){if(!(50!==e.seats||t.party&&t.party!==e.party))return e.party;if(50===e.seats&&(!t.party||t.party!==e.party))return null}return e.seats>=t.majority&&("D"===t.party||!t.party)?"D":e.seats<t.majority&&("R"===t.party||!t.party)?"R":void 0},r=function(e,n){return"senate"===t.chamber&&"D"===e.party&&50===e.seats?t.height-t.yScale(e.chance):t.height-t.yScale(e.control)};e.append("rect").attr("class",(function(t,e){return n(t)})).attr("x",0).attr("y",(function(t,e){return r(t)})).attr("width",this.barWidth).attr("height",(function(e,n){return t.yScale(e.control)})),this.party||e.append("rect").attr("class",(function(t,e){return"".concat(n(t)," hover")})).attr("x",0).attr("y",(function(t,e){return 0})).attr("width",this.barWidthHover).attr("height",(function(e,n){return t.yScale(e.control)+r(e)}))}},{key:"_annotate",value:function(){this.party||(this._drawAverage(),this._drawCI(),this._drawProbDescription()),this._drawProbs()}},{key:"_drawCI",value:function(){var t=this;this.chartEl.selectAll("g.ci").remove();var e=Pt.find(this.chartData.latest,(function(e){return e.candidate.charAt(0)===t.leadingParty})),n="D"===this.leadingParty?"R":"D",r=e.seats.hi,a=e.seats.lo,i="D"===this.leadingParty?[a,r]:[r,a];this.ciG=this.chartEl.append("g").attr("class","ci"),this.ciG.append("rect").attr("x",this.xScale(a)).attr("y",this.margin.top-10).attr("width",this.xScale(r+1)-this.xScale(a)).attr("height",this.height-2),this._drawMajority(),this.ciG.selectAll("text.ci-seats").data([a,r+1]).enter().append("text").attr("class","ci-seats").attr("x",(function(e,n){return t.xScale(e)})).attr("y",-2),this.ciG.selectAll("text.ci-seats").data(i).attr("class",(function(e){var r=e>t.majority?" ".concat(t.leadingParty):" ".concat(n);return e===t.majority&&(r=""),"ci-seats ".concat(r)})).text((function(e,r){var a=e>t.majority?" ".concat(t.leadingParty):" ".concat(n);e===t.majority&&(a="");var i=e<t.majority?t.seats-e:e;return"".concat(i).concat(a," ").concat("")})),this.ciG.selectAll("path.ci-arrows").data([a,r+1]).enter().append("path").attr("class","ci-arrows").attr("transform",(function(e,n){return"translate(".concat(t.xScale(e),",4)rotate(180)")})).attr("d",h.a.symbol().type(h.a.symbolTriangle).size(20)()),this.ciG.append("text").attr("class","ci-description bg").selectAll("tspan").data(["80% of","outcomes fall","in this range"]).enter().append("tspan").attr("x",this.xScale(r+1)).attr("y",(function(e,n){return(t.isMobile?25:30)+12*n})).text((function(t){return t})),this.ciG.append("text").attr("class","ci-description").selectAll("tspan").data(["80% of","outcomes fall","in this range"]).enter().append("tspan").attr("x",this.xScale(r+1)).attr("y",(function(e,n){return(t.isMobile?25:30)+12*n})).text((function(t){return t}))}},{key:"_drawAverage",value:function(){var t=this.avgGain===this.repMean?100-this.repMean:this.demMean;t<=51&&t>=49&&(t+=.5-t%1/2),this.averageOutcome?this.averageOutcome.html(""):this.averageOutcome=this.chartEl.append("g").attr("class","averageOutcome"),this.averageOutcome.append("line").attr("class",this.leadingParty).attr("x1",this.xScale(t)).attr("x2",this.xScale(t)).attr("y1",this.height).attr("y2",this.height+26),this.averageOutcome.append("text").attr("class",this.leadingParty).attr("x",this.xScale(t)+48).attr("y",this.height+40).text("Average: ".concat(Rt.fixedRound(this.avgGain,1)))}},{key:"_drawProbDescription",value:function(){var t=this.chartEl.append("g").attr("class","chart-description").attr("transform","translate(40, ".concat(this.yScale(this.yScale.domain()[1]/1),")")),e=t.append("g").attr("transform","translate(1, -10)").attr("class","arrow");e.append("path").attr("class","arrow-line").attr("d",(function(){return h.a.symbol().type(h.a.symbolTriangle).size(20)()})),e.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",15),t.append("text").selectAll("tspan").data(["More","likely"]).enter().append("tspan").attr("x",0).attr("y",(function(t,e){return 20+16*e})).text((function(t){return t}))}},{key:"_drawMajority",value:function(){if("house"!==this.chamber)return this;this.ciG.select("g.majority").remove();var t=this.ciG.append("g").attr("class","majority").attr("transform","translate(".concat(this.xScale(this.majority+.25),",0)"));t.append("line").attr("x1",0).attr("y1",5).attr("x2",0).attr("y2",this.height+this.margin.bottom),t.append("text").attr("class","text bg").attr("y",this.height+this.margin.bottom).text("Majority"),t.append("text").attr("y",this.height+this.margin.bottom).text("Majority")}},{key:"_drawAxes",value:function(){var t=this,e=[];if(this.isMobile)for(var n=5*Math.ceil(this.minSeats/5),r=5*Math.floor(this.maxSeats+.2),a=n;a<=r;a+=5)e.push(a);var i=h.a.axisBottom(this.xScale).tickPadding(10).tickSizeOuter(0).tickSize(0);this.party?i.ticks(0):this.isMobile?i.ticks(5):i.ticks(null),this.xAxis=this.chartEl.append("g").attr("transform","translate(0, ".concat(this.height,")")).attr("class","axis axis-x").call(i),this.xAxis.selectAll("g.tick").each((function(t,e,n){var r=h.a.select(n[e]),a=r.select("text");r.append("text").attr("fill",a.attr("fill")).attr("y",a.attr("y")).attr("dy",a.attr("dy")).attr("text-anchor",a.attr("text-anchor")).attr("transform",a.attr("transform")).attr("class","".concat(a.attr("class")," fg")).attr("aria-hidden",a.attr("aria-hidden")).attr("tabindex",a.attr("tabindex")).text(a.text()),a.classed("bg",!0)})),this.xAxis.selectAll("g.tick").selectAll("text").attr("text-anchor","middle").attr("transform","translate(".concat(this.xScale(this.xScale.domain()[0]+.5),", 0)")),this.party||this.chartEl.selectAll("g.axis-x g.tick text").each((function(e,n,r){e<t.majority?h.a.select(r[n]).classed("R",!0).text(t.seats-e):e>t.majority&&h.a.select(r[n]).classed("D",!0)}))}},{key:"_drawProbs",value:function(){var t=this,e="";if(this.party){var n=Pt.find(this.chartData.latest,(function(e){return e.candidate[0]===t.party}));e=this.takeawayPartyTemplate({party:n.candidate,odds:'<span class="'.concat(this.party,'">').concat(Rt.formatting.probToFrac(n.winprob),"</span>")})}else{var r=this.chartData.latest.sort((function(t,e){return t.winprob>e.winprob?-1:1}))[0],a=Pt.sortBy(this.chartData.latest,(function(t){return-1*t.winprob}))[0].candidate,i=r.seats.lo,o=r.seats.hi;e=this.probsTemplate({candidate:a,leaderSeatsLo:i,leaderSeatsHi:o})}this.parentEl.select(".winprob-sentence").remove(),this.parentEl.append("div").attr("class","winprob-sentence").html(e)}},{key:"_updateHedAndDek",value:function(){var t=this,e=Pt.sortBy(this.chartData.latest,(function(t){return-1*t.winprob}))[0],n=h.a.select("#seat-distribution").select("h2"),r=Rt.formatting.capitalize(this.chamber),a=e.candidate,i=Rt.formatting.formatLeaderLabel(e.winprob),o=("50"===i.type?this.templateTossup:this.template)({candidate:a,leaderLabel:i.value,state:r});n.html("<span>".concat(o,"</span>"));var s=h.a.select("#seat-distribution").select("p"),c=Pt.find(Nt.model_picker.models,(function(e){return e.id===t.model})).name;return s.html(this.templateDek({modelVersion:c})),this}},{key:"_drawHoverShapes",value:function(){if(this.party)return this;this.hoverG=this.chartEl.append("g").attr("class","hover-g hidden"),this.hoverAxis=this.hoverG.append("text").attr("class","hover-axis"),this.hoverAnno=this.hoverG.append("text").attr("class","hover-anno bg").attr("text-anchor","middle"),this.hoverAnnoBg=this.hoverG.append("text").attr("class","hover-anno").attr("text-anchor","middle")}},{key:"_addHover",value:function(){var t=this;if(this.party)return this;this.chartEl.selectAll("g.bar").select("rect.hover").on("mouseover",(function(e,n,r){return t._handleMouseOver(e,n,r)})).on("mouseout",(function(e,n,r){return t._handleMouseOut(e,n,r)}))}},{key:"_handleMouseOver",value:function(t,e,n){var r=h.a.select(n[e]),a=h.a.select(r.node().parentNode),i=r.attr("class").replace(" hover",""),o="R"===i?this.seats-t.seats:t.seats,s=Rt.formatting.formatPercentage(t.control,1),c=a.attr("transform"),l=Rt.dom.translateX(c),u=l/this.width,f="center";u>=.85?f="right":u<=.15&&(f="left");var d={x:{right:+r.attr("width")/2,center:0,left:-1*+r.attr("width")/2},textAnchor:{right:"end",center:"middle",left:"start"}};this.hoverG.classed("hidden",!1),this.chartEl.selectAll("g.bar").select("rect").classed("unhighlight",!0),this.chartEl.select("g.ci").classed("unhighlight",!0),a.selectAll("rect").classed("unhighlight",!1),this.xAxis.selectAll("text").classed("hidden",!0),this.chartEl.select("g.chart-description").classed("unhighlight",!0),this.parentEl.select(".winprob-sentence").classed("unhighlight",!0),this.chartEl.select("g.averageOutcome").classed("unhighlight",!0),this.chartEl.select("g.majority").classed("hidden",!0);var p=this.xScale(this.xScale.domain()[0]+.5)+d.x[f];this.hoverG.select("text.hover-axis").classed("D",!1).classed("R",!1).classed(i,!0).attr("text-anchor",d.textAnchor[f]).attr("x",p).attr("y",10).attr("dy","0.71em").attr("transform","translate(".concat(l,", ").concat(Rt.dom.translateY(this.xAxis.attr("transform")),")")).text("".concat(o," ").concat(i," seats")),this.hoverG.selectAll("text.hover-anno").classed("D",!1).classed("R",!1).classed(i,!0).attr("text-anchor",d.textAnchor[f]).attr("x",p).attr("y",r.attr("y")-8).attr("transform","translate(".concat(l,", ").concat(a.select("rect").attr("y"),")")).text("".concat(s," chance"))}},{key:"_handleMouseOut",value:function(t,e,n){this.hoverG.classed("hidden",!0),this.chartEl.selectAll("g.bar").select("rect").classed("unhighlight",!1),this.chartEl.select("g.ci").classed("unhighlight",!1),this.xAxis.selectAll("text").classed("hidden",!1),this.chartEl.select("g.chart-description").classed("unhighlight",!1),this.parentEl.select(".winprob-sentence").classed("unhighlight",!1),this.chartEl.select("g.averageOutcome").classed("unhighlight",!1),this.chartEl.select("g.majority").classed("hidden",!1)}}])&&Et(n.prototype,r),a&&Et(n,a),o}(f.a);function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ft(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ut(t,e,n){return(Ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Gt(t,e){return(Gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zt(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qt=n(21),Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gt(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=Yt(e);if(Wt()){var r=Yt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return zt(this,t)});function o(){return Vt(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){var t=this;Ut(Yt(o.prototype),"init",this).call(this),Promise.all([this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_seats.json")),this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_us_latest.json"))]).then((function(e){var n=It(e,2),r=n[0],a=n[1];a=qt.indexBy(a,"type"),r=r.map((function(t){return t.latest=a[t.type].candidates,t})),t.data=r,t._drawCharts(),Ut(Yt(o.prototype),"initEnd",t).call(t)}))}},{key:"onModelChange",value:function(t){var e=this;Ut(Yt(o.prototype),"onModelChange",this).call(this,t),this.initialized&&(this.model=t,this.charts.forEach((function(t){return t._updateChart(e.model)})),Ut(Yt(o.prototype),"onModelChangeEnd",this).call(this))}},{key:"_drawCharts",value:function(){var t={top:22,right:10,bottom:50,left:10};this.charts=[new Lt(this.data,".seat-distribution-chart.main",this.model,this.chamber,{margin:t}),new Lt(this.data,'.seat-distribution-chart[data-party="R"]',this.model,this.chamber,{party:"R",margin:qt.extend(t,{bottom:10,top:0})}),new Lt(this.data,'.seat-distribution-chart[data-party="D"]',this.model,this.chamber,{party:"D",margin:qt.extend(t,{bottom:10,top:0})})],this.charts.forEach((function(t){return t.init()}))}}])&&Ht(n.prototype,r),a&&Ht(n,a),o}(u.a),$t=n(75);function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t){return function(t){if(Array.isArray(t))return te(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Qt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||Qt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(t,e){if(t){if("string"==typeof t)return te(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(t,e):void 0}}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function re(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=n(74),se=n(21),ce=n(16),le=n(27),ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(s,t);var e,r,a,i,o=(e=s,function(){var t,n=ie(e);if(ae()){var r=ie(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return re(this,t)});function s(t,e,r,a,i,c,l){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(u=o.call(this,t,r,l)).model=a,u.incumbents=c,u.chamber=i,u.dataByModel=se.indexBy(u.data,(function(t){return t.type})),u.mapData=e,u.rectWidth=6,u.rectHeight=12,u.linkedCharts=[],u.tooltipCont=h.a.select("#senate-map-tooltip-container"),u.tooltipEl=h.a.select("#senate-map-tooltip"),u.tooltipTemplate=n(86),u}return r=s,(a=[{key:"init",value:function(){this._processData(),this._updateDek(),this._drawChartFrame(),this._drawMap(),this._drawRaces(),this._addHoverAndClick()}},{key:"_processData",value:function(){this.raceData=this.dataByModel[this.model]}},{key:"_updateDek",value:function(){var t=this.raceData.races.length,e=h.a.select("#senate-map").select("p"),n=se.template(le.senate_map.dek,{interpolate:/\{\{(.+?)\}\}/g})({num:t,chamber:ce.formatting.capitalize(this.chamber)});e.html(n)}},{key:"_drawMap",value:function(){var t=oe.feature(this.mapData,"states").features.filter((function(t){return"US"!==t.properties.name}));this.proj=h.a.geoAlbersUsa().scale(1).translate([0,0]);var e=h.a.geoPath().projection(this.proj),n=Object({0:Object({0:-.418743197681691,1:-.22353850659994334}),1:Object({0:.3612513098653094,1:.23003135990302526})}),r=n[1][0]-n[0][0],a=n[1][1]-n[0][1],i=1/Math.max(r/this.width,a/this.height),o=[(this.width-i*(n[1][0]+n[0][0]))/2,(this.height-i*(n[1][1]+n[0][1]))/2];this.proj.scale(i).translate(o),this.mapG=this.chartEl.append("g").attr("class","map"),this.mapG.append("g").attr("class","states").selectAll("path.state").data(t).enter().append("path").attr("class","state").attr("d",e)}},{key:"_drawRaces",value:function(){var t=this,e={CT:[0,-10],DE:[15,10],FL:[15,-5],KY:[10,-5],LA:[-8,-5],MA:[20,-10],MD:[0,-10],ME:[10,-20],MI:[10,5],MN:[-3,0],MT:[0,-5],ND:[0,-5],NH:[0,-20],NJ:[5,-3],NY:[-10,-15],PA:[0,-10],RI:[10,15],TN:[0,-5],TX:[5,0],VA:[5,-5],VT:[-5,-10],WI:[5,0]};this.racesByState=se.groupBy(this.raceData.races,(function(t){return t.race.split("-")[0]}));var n=se.groupBy(this.incumbents.filter((function(t){return!t.up})),(function(t){return t.race.split("-")[0]}));this.chartEl.selectAll("g.map path.state").each((function(r,a,i){if("DC"!==r.properties.name){var o=se.sortBy(t.racesByState[r.properties.name],(function(t){return t.special?2:1}))||[];o.length>0&&h.a.select(i[a]).classed("hover-cursor",!0);var s=Zt(h.a.geoPath().projection(t.proj).centroid(r),2),c=s[0],l=s[1],u=e[r.properties.name];u&&(c+=u[0],l+=u[1]),t.stateG=t.mapG.append("g").attr("class","state ".concat(r.properties.name)),t.stateG.append("text").attr("class",(function(t,e){return"bg state-label ".concat(o.length>0?"has-race":""," hide")})).attr("x",c).attr("y",l-4).text(r.properties.name),t.stateG.append("text").attr("class",(function(t,e){return"state-label ".concat(o.length>0?"has-race":"")})).attr("x",c).attr("y",l-4).text(r.properties.name),t.stateG.selectAll("rect").data(o).enter().append("rect").attr("class",(function(t){var e=se.sortBy(t.candidates,(function(t){return-1*t.winprob}))[0],n=ce.senate.lean(Math.round(e.winprob));return ce.senate.isBlanket(t.race,!0)&&(n=ce.senate.lean(Math.round(ce.senate.getRunoffLean(t.candidates).winprob))),"".concat(t.race," ").concat(n," ").concat(e.party)})).attr("x",(function(t,e){return c+(0===e?-7:2)})).attr("y",l+4).attr("width",t.rectWidth).attr("height",t.rectHeight);var f=n[r.properties.name]||[];t.stateG.selectAll("circle").data(f).enter().append("circle").attr("class",(function(t,e){return se.indexOf(["VT-S1","ME-S1"],t.race)>-1?"D":t.party})).attr("cx",(function(t,e){return 0===e&&2===f.length?c-3:0===e&&1===f.length||1===e?c+4:void 0})).attr("cy",l+6).attr("r",3)}}))}},{key:"_addHoverAndClick",value:function(){var t=this;this.mapG.select("g.states").selectAll("path.state").on("mouseover",(function(e){return t._handleStateHover(e.properties.name)})).on("mouseout",(function(){return t._handleMouseOut()})).on("click",(function(e){return t._handleStateClick(e.properties.name)})),this.mapG.selectAll("g.state").selectAll("text.state-label").on("mouseover",(function(e,n,r){var a=h.a.select(r[n]).text();t._handleStateHover(a)})).on("mouseout",(function(){return t._handleMouseOut()})).on("click",(function(e,n,r){var a=h.a.select(r[n]).text();t._handleStateClick(a)})),this.mapG.selectAll("g.state").selectAll("rect").on("click",(function(t,e){var n;(n=window.forecastNavigator).navigateToState.apply(n,Kt(ce.senate.clickRace(t)))})).on("mouseover",(function(e){return t._handleRaceHover(e)})).on("mouseout",(function(){return t._handleMouseOut()}))}},{key:"_handleStateClick",value:function(t){var e,n=this.racesByState[t]||[],r=this._getMainElection(n);r&&(e=window.forecastNavigator).navigateToState.apply(e,Kt(ce.senate.clickRace(r)))}},{key:"_handleStateHover",value:function(t){this._highlightState(t);var e=this.racesByState[t]||[],n=this._getMainElection(e);n&&(this.highlightRace(n.race),this.linkedCharts.forEach((function(t){t.highlightRace(n.race)}))),this._showTooltip(t,n)}},{key:"_handleRaceHover",value:function(t){var e=t.race.split("-")[0];this._showTooltip(e,t),this.highlightRace(t.race),this.linkedCharts.forEach((function(e){e.highlightRace(t.race)}))}},{key:"_handleMouseOut",value:function(){this.unhighlightAll(),this._hideTooltip(),this.linkedCharts.forEach((function(t){t.unhighlightAll()}))}},{key:"_getMainElection",value:function(t){return t.length>1?se.find(t,(function(t){return!t.special})):t[0]}},{key:"_highlightState",value:function(t){this.mapG.selectAll("path.state").classed("highlighted",(function(e,n,r){return t&&e.properties.name===t&&h.a.select(r[n]).raise(),e.properties.name===t})),this.mapG.select("g.state.".concat(t)).select("text.bg").classed("hide",!1)}},{key:"_showTooltip",value:function(t,e){this.tooltipCont.style("opacity",1);var n={};if(e){var r=se.sortBy(e.candidates,(function(t){return-1*t.winprob})),a=r[0],i=ce.senate.lean(Math.round(a.winprob)),o=a.party;if(ce.senate.isBlanket(e.race,!0)){var s=ce.senate.getRunoffLean(e.candidates);i=ce.senate.lean(Math.round(s.winprob)),o=s.party}var c="".concat(ce.formatting.capitalize(i)," ").concat("toss-up"===i?"":o),l=se.map(r,(function(t){return{candidate:t.candidate,fullname:t.party?t.fullname:"All others",party:t.party?t.party:"O",voteshare:t.voteshare,winprob:t.winprob,incumb:t.incumbent}}));n.state="".concat(ce.states.abbrs[t]).concat(e.special?" Special":""),n.leader=l[0].candidate,n.leanText=c,n.leanClass=ce.slugify(c),n.candidates=l,n.formatting=ce.formatting,n.parties=ce.parties,n.archie=le.senate_map.tooltip;var u=h.a.select("rect.".concat(e.race)),f=+u.attr("x")+this.rectWidth/2,d=+u.attr("y")+this.rectHeight/2;this._moveTooltip(f,d)}else{n.leanText="No Races",n.leanClass="none",n.state=ce.states.abbrs[t];var p=h.a.select("g.state.".concat(t)).select("text.state-label"),v=+p.attr("x"),m=+p.attr("y")+5;this._moveTooltip(v,m)}this.tooltipEl.html(this.tooltipTemplate(n))}},{key:"_hideTooltip",value:function(){this.tooltipCont.style("opacity",0)}},{key:"_moveTooltip",value:function(t,e){this.tooltipCont.style("left","".concat(t+this.margin.left,"px")).style("top","".concat(e+this.margin.top,"px")),this.tooltipEl.classed("tooltip-position-left",!1),this.tooltipEl.classed("tooltip-position-right",!1),t<this.width/4?this.tooltipEl.classed("tooltip-position-left",!0):t>this.width-this.width/4&&this.tooltipEl.classed("tooltip-position-right",!0)}},{key:"highlightRace",value:function(t){h.a.select("rect.".concat(t)).classed("highlighted",!0),this._highlightState(t.split("-")[0])}},{key:"unhighlightAll",value:function(){this.mapG.selectAll("g.state").selectAll("rect").classed("highlighted",!1),this._highlightState(null),h.a.selectAll("text.bg").classed("hide",!0)}},{key:"unhighlightRace",value:function(t){h.a.select("rect.".concat(t)).classed("highlighted",!1),this._highlightState(null),h.a.selectAll("text.bg").classed("hide",!0)}}])&&ee(r.prototype,a),i&&ee(r,i),s}(f.a);function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t){return function(t){if(Array.isArray(t))return de(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return de(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t,e){return!e||"object"!==he(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var be=n(21),we=n(16),_e=n(27),xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=ge(e);if(ye()){var r=ge(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return me(this,t)});function o(t,e,n,r,a,s){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(c=i.call(this,t,n,s)).model=r,c.incumbents=e,c.dataByModel=be.indexBy(c.data,(function(t){return t.type})),c.spaceBuffer=.5,c.linkedCharts=[],c.currentY=25,c.forecastY=100,c.sectionHeight=25,c.rectHeight=20,c.runoffRaces=["GA-S3","LA-S2"],c}return n=o,(r=[{key:"init",value:function(){this._processData()._calculateScales()._drawChartFrame()._drawGroups()._drawText()._drawChart()._addHover()}},{key:"_processData",value:function(){var t=this,e=["R-false","R-true","D-true","D-false"];this.currentSenateData=be.groupBy(this.incumbents,(function(t){return"".concat("I"===t.party?"D":t.party,"-").concat(t.up)})),this.currentSenateData=be.map(this.currentSenateData,(function(t,e){return{key:e,party:"I"===t[0].party?"D":t[0].party,number:t.length,races:t}})),this.currentSenateData=be.sortBy(this.currentSenateData,(function(t){return be.indexOf(e,t.key)}));var n=0;return be.each(this.currentSenateData,(function(e,r){e.cumu=n,n+=e.number,0!==r&&2!==r||(n+=t.spaceBuffer)})),this.raceData=this.dataByModel[this.model],this.races=be.sortBy(this.raceData.races,(function(e){var n=e.candidates,r=be.sortBy(n,(function(t){return-1*t.winprob}))[0],a=r.winprob,i=r.party;if(be.indexOf(t.runoffRaces,e.race)>-1){var o=we.senate.getRunoffLean(e.candidates);a=o.winprob,i=o.party}return("R"===i?-1:1)*+a})),this}},{key:"_calculateScales",value:function(){return this.scaleX=h.a.scaleLinear().domain([0,100+2*this.spaceBuffer]).range([0,this.width]),this}},{key:"_drawGroups",value:function(){return this.annoG=this.chartEl.append("g").attr("class","line-anno-g"),this.currentG=this.chartEl.append("g").attr("class","current-senate-g senate-g"),this.forecastG=this.chartEl.append("g").attr("class","forecast-senate-g senate-g"),this}},{key:"_drawChart",value:function(){var t=this;return this.currentG.selectAll("rect.current").data(this.currentSenateData).enter().append("rect").attr("class",(function(t){return"current ".concat(t.party)})).attr("id",(function(t){return"current-".concat(t.key)})).attr("x",(function(e){return t.scaleX(e.cumu)})).attr("width",(function(e){return t.scaleX(e.number)})).attr("y",this.currentY).attr("height",this.rectHeight),this.forecastG.selectAll("rect.forecast").data(be.filter(this.currentSenateData,(function(t,e){return 0===e||3===e}))).enter().append("rect").attr("class",(function(t){return"forecast ".concat(t.party)})).attr("id",(function(t){return"forecast-".concat(t.key)})).attr("x",(function(e){return t.scaleX(e.cumu)})).attr("width",(function(e){return t.scaleX(e.number)})).attr("y",this.forecastY).attr("height",this.rectHeight),this.forecastG.selectAll("rect.race").data(this.races).enter().append("rect").attr("class",(function(e){var n=be.sortBy(e.candidates,(function(t){return-1*t.winprob}))[0],r=n.party,a=we.senate.lean(Math.round(n.winprob));if(be.indexOf(t.runoffRaces,e.race)>-1){var i=we.senate.getRunoffLean(e.candidates);a=we.senate.lean(Math.round(i.winprob)),r=i.party}return"race ".concat(e.race," ").concat(a," ").concat(r)})).attr("id",(function(t){return"forecast-".concat(t.race)})).attr("x",(function(e,n){return t.scaleX(t.currentSenateData[1].cumu+n+.1)})).attr("width",this.scaleX(.9)).attr("y",this.forecastY).attr("stroke-width",this.scaleX(.1)).attr("height",this.rectHeight),this}},{key:"_drawText",value:function(){this.currentG.append("text").attr("class","hed").attr("id","current-hed").attr("x",0).attr("y",this.currentY-this.sectionHeight).attr("dy","1em").text(_e.senate_map.summary.current_title);var t=this.currentSenateData[1].number,e=this.currentSenateData[2].number;this.currentG.append("text").attr("class","sent").attr("id","current-sent").attr("x",this.width).attr("y",this.currentY-this.sectionHeight).attr("dy","1em").attr("text-anchor","end").html(_e.senate_map.summary.sent.replace("{D}",e).replace("{R}",t)),this.forecastG.append("text").attr("class","hed").attr("id","forecast-hed").attr("x",0).attr("y",this.forecastY-this.sectionHeight).attr("dy","1em").text(_e.senate_map.summary.forecast_title);var n=be.filter(this.currentSenateData,(function(t){return t.cumu<=50.5})).length-1,r=0;return 1===n||2===n?r=1:3===n&&(r=2),this.annoG.append("line").attr("class","vote-line majority-line").attr("x1",this.scaleX(50.5)+r*this.spaceBuffer).attr("x2",this.scaleX(50.5)+r*this.spaceBuffer).attr("y1",this.currentY-5).attr("y2",this.forecastY+this.rectHeight+5),this.annoG.append("text").attr("class","vote-text majority-text bg").attr("x",this.scaleX(50.5)+r*this.spaceBuffer).attr("y",this.currentY+(this.forecastY+this.rectHeight-this.currentY)/2).attr("text-anchor","middle").attr("dy","0.25em").text(_e.senate_map.summary.majority_label),this.annoG.append("text").attr("class","vote-text majority-text").attr("x",this.scaleX(50.5)+r*this.spaceBuffer).attr("y",this.currentY+(this.forecastY+this.rectHeight-this.currentY)/2).attr("text-anchor","middle").attr("dy","0.25em").text(_e.senate_map.summary.majority_label),this}},{key:"_addHover",value:function(){var t=this;return this.forecastG.selectAll("rect.race").on("mouseover",(function(e){t.highlightRace(e.race),t.linkedCharts.forEach((function(t){t.highlightRace(e.race)}))})).on("mouseout",(function(e){t.unhighlightAll(),t.linkedCharts.forEach((function(t){t.unhighlightAll()}))})).on("click",(function(t){var e;(e=window.forecastNavigator).navigateToState.apply(e,fe(we.senate.clickRace(t)))})),this}},{key:"highlightRace",value:function(t){this.forecastG.select("#forecast-".concat(t)).raise().classed("highlighted",!0)}},{key:"unhighlightAll",value:function(){this.forecastG.selectAll("rect.race").classed("highlighted",!1)}}])&&pe(n.prototype,r),a&&pe(n,a),o}(f.a);function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Oe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ee(t,e,n){return(Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Te(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Ae(t,e){return(Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function De(t,e){return!e||"object"!==ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=Te(e);if(Ce()){var r=Te(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return De(this,t)});function o(){return je(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){var t=this;Ee(Te(o.prototype),"init",this).call(this),this.isMobile||Promise.all([this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_race_summary.json")),this.appData.fetch("".concat(staticUrl,"/us_map.json")),this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_incumbents.json"))]).then((function(e){var n=Se(e,3);t.races=n[0],t.mapData=n[1],t.incumbents=n[2],t.charts={},t._drawMap(),t._drawSummary(),t._linkCharts(),Ee(Te(o.prototype),"initEnd",t).call(t)}))}},{key:"onModelChange",value:function(t){Ee(Te(o.prototype),"onModelChange",this).call(this,t),this.initialized&&(h.a.select("#senate-map-chart").html(null),h.a.select("#senate-map-summary-chart").html(null),this._drawMap(),this._drawSummary(),this._linkCharts(),Ee(Te(o.prototype),"initEnd",this).call(this))}},{key:"_drawMap",value:function(){this.map=new ue(this.races,this.mapData,"#senate-map-chart",this.model,this.chamber,this.incumbents,{margin:{top:0,left:0,bottom:20,right:10},title:""}),this.map.init(),this.charts["#senate-map-chart"]=this.map}},{key:"_drawSummary",value:function(){this.summary=new xe(this.races,this.incumbents,"#senate-map-summary-chart",this.model,this.chamber,{title:""}),this.summary.init(),this.charts["#senate-map-summary-chart"]=this.summary}},{key:"_linkCharts",value:function(){var t=this,e=Object.keys(this.charts);e.forEach((function(n){t.charts[n].linkedCharts=e.filter((function(t){return t!==n})).map((function(e){return t.charts[e]}))}))}}])&&Me(n.prototype,r),a&&Me(n,a),o}(u.a);function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||Be(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(t){return function(t){if(Array.isArray(t))return Ie(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Be(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(t,e){if(t){if("string"==typeof t)return Ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(t,e):void 0}}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function He(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ze=n(21),We=n(27),Ye=n(90),qe=n(16),Xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=Ge(e);if(Ue()){var r=Ge(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return He(this,t)});function o(t,e,n,r,a,s){var c;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(c=i.call(this,t,n,s)).model=r,c.chamber=a,c.dataByModel=ze.indexBy(c.data,(function(t){return t.type})),c.candidateData=e,c.toWatch=s.toWatch,c.incumbents=s.incumbents,c.houseState=s.houseState,"house"!==c.chamber){var l=window.innerWidth<350?200:230;c.width=l-c.margin.left-c.margin.right}else c.width=190-c.margin.left-c.margin.right;return c.height=30-c.margin.top-c.margin.bottom,c.sort="competitive",c.houseHedTemplate=ze.template(We.race_list.hed.house_template,{interpolate:/\{\{(.+?)\}\}/g}),c.houseDekTemplate=ze.template(We.race_list.dek.house_template,{interpolate:/\{\{(.+?)\}\}/g}),c}return n=o,(r=[{key:"init",value:function(){this._calculateScale(),this._processData(),this._drawTable(),this._drawCharts(),this._updateHedAndDek()}},{key:"_processData",value:function(){var t=this;this._processSpecialElecData(),this.chartData=this.dataByModel[this.model].races,this.toWatch?this.chartData=ze.sortBy(this.chartData,(function(t){return Math.abs(+t.margin.mean)})).slice(0,50):("house"===this.chamber&&(this.chartData=ze.filter(this.chartData,(function(e){return e.race.includes(t.houseState)}))),this.chartData=ze.sortBy(this.chartData,(function(t){return"".concat(t.race.split("-")[0],"-").concat(t.race.split("-")[1].padStart(3,"0"))}))),this.chartData.forEach((function(e){var n=t.candidateData.blankets[e.race]||t.candidateData[e.race],r=e.race_list_runoff_candidates||e.candidates;r.forEach((function(t){var e=n.find((function(e){return e.name===t.fullname}));e&&(t.incumbent=e.incumbent,t.short=e.short)}));var a={R:-1,D:1,O:2},i=ze.uniq(ze.pluck(r,"party"));ze.indexOf(i,"D")>-1&&-1===ze.indexOf(i,"R")&&(a={O:-1,D:1}),e.race_list_runoff_candidates=ze.sortBy(r,(function(t){return a[t.party]||a.O}));var o=ze.find(t.incumbents,(function(t){return e.race===t.race}));o||(o=ze.find(t.incumbents,(function(t){return e.race.replace("-1","-0")===t.race}))),e.incumbParty=o.party}))}},{key:"_calculateScale",value:function(){var t=this,e=0;this.data.forEach((function(t){t.races.forEach((function(t){100===t.margin.lo&&100===t.margin.hi||Math.abs(t.margin.hi)>e&&(e=Math.abs(t.margin.hi))}))})),e=25*Math.ceil(e/25),this.xScale=h.a.scaleLinear().domain([-1*e,e]).range([0,this.width+this.margin.left+this.margin.right]),this.ticks=h.a.range(-100,101,"house"===this.chamber?50:25).filter((function(e){return e>=t.xScale.domain()[0]&&e<=t.xScale.domain()[1]}))}},{key:"_drawTable",value:function(){this.parentEl.html(Ye({archie:We,chamber:this.chamber,races:this.chartData,utils:qe,_:ze})),this._drawTickLabels()}},{key:"_updateHedAndDek",value:function(){if("house"!==this.chamber)return this;var t,e;this.container=h.a.select("#race-list"),this.toWatch?(t=We.race_list.hed.house_competitive,e=We.race_list.dek.house_competitive):e=t=qe.states.atLarge[this.houseState]?qe.states.abbrs[this.houseState]:"".concat(qe.states.abbrs[this.houseState]," districts"),this.container.select("h2").html(this.houseHedTemplate({state:t})),this.container.select("p").html(this.houseDekTemplate({where:e}))}},{key:"_drawCharts",value:function(){var t=this;Le(this.parentEl.node().querySelectorAll("tr:not(.axis):not(.legend)")).forEach((function(e,n){t._drawChart(e.querySelector("td.margin-chart")),t._handleClick(e)}))}},{key:"_handleClick",value:function(t){t.addEventListener("click",(function(e){var n=Ne(t.getAttribute("data-race").split("-"),2),r=n[0],a=n[1],i=qe.states.slugs[r],o=[i,a].join("-");"special"===t.getAttribute("data-special")&&(i+="-special"),window.forecastNavigator.navigateToState(i,interactivePage.chamber,o)}))}},{key:"_addSvg",value:function(t){return h.a.select(t).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")"))}},{key:"_drawChart",value:function(t){var e={};["margin-mean","margin-hi","margin-lo"].forEach((function(n){e[n]=+t.getAttribute("data-".concat(n))}));var n=this._addSvg(t);this._drawTicks(n);var r=[];e["margin-lo"]<0&&e["margin-hi"]<0?r=[{party:"R",start:this.xScale(e["margin-lo"]),stop:this.xScale(e["margin-hi"])}]:e["margin-lo"]<0&&e["margin-hi"]>=0?r=[{party:"R",start:this.xScale(e["margin-lo"]),stop:this.xScale(0)},{party:"D",start:this.xScale(0),stop:this.xScale(e["margin-hi"])}]:e["margin-lo"]>0&&(r=[{party:"D",start:this.xScale(e["margin-lo"]),stop:this.xScale(e["margin-hi"])}]),n.selectAll("rect").data(r).enter().append("rect").attr("class",(function(t){return t.party})).attr("x",(function(t){return t.start})).attr("y",0).attr("width",(function(t){return t.stop-t.start})).attr("height",this.height),n.append("circle").attr("cx",this.xScale(e["margin-mean"])).attr("cy",this.height/2).attr("r",6).attr("class",(function(t,n){return e["margin-mean"]>0?"D":"R"}))}},{key:"_drawTickLabels",value:function(){var t=this,e=this._addSvg(document.querySelector("tr.axis td.margin-chart")).append("g").attr("class","tick-labels");e.selectAll("text").data(this.ticks.filter((function(t){return 0!==t}))).enter().append("text").attr("class",(function(t){return t<0?"R":"D"})).attr("x",(function(e){return t.xScale(e)})).attr("y",this.height).text((function(t){return"+".concat(Math.abs(t))})),e.append("line").attr("class","zero").attr("x1",this.xScale(0)).attr("y1",0).attr("x2",this.xScale(0)).attr("y2",this.height+this.margin.top+this.margin.bottom)}},{key:"_drawTicks",value:function(t){var e=this;t.append("g").attr("class","ticks").selectAll("line").data(this.ticks).enter().append("line").attr("class",(function(t){return 0===t?"zero":""})).attr("x1",(function(t){return e.xScale(t)})).attr("y1",-this.margin.top).attr("x2",(function(t){return e.xScale(t)})).attr("y2",this.height+this.margin.top+this.margin.bottom)}},{key:"_processSpecialElecData",value:function(){var t=this;this.candidateData.blankets={},ze.each(this.data,(function(e){e.type===t.model&&ze.each(e.races,(function(e){qe.senate.isBlanket(e.race,!0)&&(e.runoff_computed||(e.runoff_computed=!0,e.race_list_runoff_candidates=qe.senate.processBlanketCands(e.candidates),t.candidateData.blankets[e.race]=[{guess:!1,incumbent:!1,name:"A Republican",party:"R",party_order:1,short:"A Republican"},{guess:!1,incumbent:!1,name:"A Democrat",party:"D",party_order:1,short:"A Democrat"}]))}))}))}}])&&Fe(n.prototype,r),a&&Fe(n,a),o}(f.a);function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ze(t,e,n){return(Ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nn(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tn(t,e){return!e||"object"!==$e(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function en(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rn=n(22)(n(16),n(11)),an=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=nn(e);if(en()){var r=nn(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return tn(this,t)});function o(){return Je(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){Ze(nn(o.prototype),"init",this).call(this),this.createChart(!0),this.addButtonListener(),this.addSelectListener()}},{key:"createChart",value:function(t,e){var n=this;Promise.all([this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_candidates.json")),this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_race_summary.json")),this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_incumbents.json"))]).then((function(r){var a=r[0],i=r[1],s=r[2];n.chart=new Xe(i,a,"#race-list-chart",n.model,n.chamber,{margin:{top:5,right:5,bottom:5,left:5},toWatch:t,houseState:e,incumbents:s}),n.chart.init(),Ze(nn(o.prototype),"initEnd",n).call(n)}))}},{key:"removeChart",value:function(){document.querySelector("#race-list-chart table").innerHTML=""}},{key:"onModelChange",value:function(t){if(Ze(nn(o.prototype),"onModelChange",this).call(this,t),this.initialized){this.model=t;var e=!0;"senate"===this.chamber&&"alpha"===document.getElementById("state-order").getElementsByClassName("active")[0].id&&(e=!1),this.createChart(e)}}},{key:"addSelectListener",value:function(){var t=this;if("house"!==this.chamber)return this;var e=document.querySelector(".race-list-select");this.select=e.querySelector("select"),rn.dom.resizeSelect(this.select),this.select.addEventListener("change",(function(e){var n=t.select.value;t.createChart("competitive-races"===n,n),rn.dom.resizeSelect(t.select)}))}},{key:"addButtonListener",value:function(){var t=this;document.querySelectorAll(".btn-race-list").forEach((function(e){e.addEventListener("click",(function(n){var r=e.getAttribute("id");"alpha"===r?t.createChart(!1):t.createChart(!0),document.querySelector(".btn-race-list:not(#".concat(r,")")).classList.remove("active"),e.classList.add("active")}))}))}}])&&Ke(n.prototype,r),a&&Ke(n,a),o}(u.a);function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ln(t,e,n){return(ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dn(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function un(t,e){return(un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hn(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pn=n(21),vn=n(22)(n(16),n(11)),mn=n(27),yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&un(t,e)}(c,t);var e,r,i,o,s=(e=c,function(){var t,n=dn(e);if(fn()){var r=dn(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return hn(this,t)});function c(){return sn(this,c),s.apply(this,arguments)}return r=c,(i=[{key:"init",value:function(){var t=this;ln(dn(c.prototype),"init",this).call(this),this.elemPug=n(91),this.template=pn.template(mn.state_chamber_nav.text,{interpolate:/\{\{(.+?)\}\}/g}),this.cont=h.a.select(".module.state-chamber-nav"),this.flexCont=this.cont.select(".state-chamber-nav-container"),this.stateAbbr="us"===this.state?this.state:vn.states.slugToAbbr(this.state),this.stateAbbr.match(/\d/)&&(this.districtNum=this.stateAbbr.match(/([A-Z]{2})(\d+)/)[2],this.stateAbbr=this.stateAbbr.match(/([A-Z]{2})(\d)/)[1]),this.stateName="us"===this.state?this.state:vn.states.abbrs[this.stateAbbr];var e=[this.appData.fetch("".concat(staticUrl,"/us_recirc.json"))];"us"!==this.state&&e.push(this.appData.fetch("".concat(staticUrl,"/state_recirc.json"))),Promise.all(e).then((function(e){if(t.usRecircData=e[0],t.stateRecircData=e[1],"us"!==t.state){var n=pn.find(t.stateRecircData.president,(function(t){return t.type===a.b}));t.presData=pn.find(n.states,(function(e){return e.state===t.stateAbbr})),t.senateData=pn.find(t.stateRecircData.senate,(function(t){return t.type===a.a})),t.houseData=pn.find(t.stateRecircData.house,(function(t){return t.type===a.a}))}else t.presData=pn.find(t.usRecircData.president,(function(t){return t.type===a.b})),t.senateData=[],t.houseData=[];t.nationalSenateData=pn.find(t.usRecircData.senate,(function(t){return t.type===a.a})),t.nationalHouseData=pn.find(t.usRecircData.house,(function(t){return t.type===a.a})),t._processSpecialElecData(),t.initStateChamberNav(),t.checkThreeAcross()}))}},{key:"initStateChamberNav",value:function(){this._initPres(),this._initSenate(),this._initHouse()}},{key:"addElem",value:function(t,e,n){var r=this,a=this.flexCont.append("div").attr("class","state-chamber-nav-element ".concat(t)),i=pn.template(mn.state_chamber_nav.heds[t],{interpolate:/\{\{(.+?)\}\}/g}),o=this.stateName;"senate-special"===t&&(o=this.stateAbbr),"house"===t&&n&&(o=n);var s=pn.sortBy(e,(function(t){return-1*t.winprob})),c=s[0].short,l="is";"senate"!==t&&"senate-special"!==t&&"house"!==t||("us"===this.state?(c=s[0].candidate,l="are"):c=s[0].short);var u=vn.formatting.formatLeaderLabel(s[0].winprob),h="50"===u.type?"<i>".concat(u.value,"</i>"):this.template({cand:vn.formatting.capitalize(c),prob:u.value,isAre:l});a.html(this.elemPug({hed:i({state:o}),p:h,button:mn.state_chamber_nav.button})),a.on("click",(function(){if("senate"===t||"senate-special"===t){var e="us"===r.state?"us":"".concat(vn.slugify(r.stateName)).concat("2"===n?"":"-special"),a="us"===r.state?null:"".concat(vn.slugify(r.stateName),"-S").concat(n);window.forecastNavigator.navigateToState(e,"senate",a)}else if("president"===t)window.forecastNavigator.navigateToState(vn.slugify(r.stateName),"president");else if("house"===t){var i="us"===r.state?null:n.match(/([A-Z]{2})-(\d+)/),o="us"===r.state?"us":"".concat(vn.states.abbrToSlug(i[1])),s="us"===r.state?null:"".concat(vn.states.abbrToSlug(i[1]),"-").concat(i[2]);window.forecastNavigator.navigateToState(o,"house",s)}}))}},{key:"_initPres",value:function(){if("president"===this.chamber)return this;var t=pn.map(this.presData.candidates,(function(t){return{short:t.candidate,winprob:t.winprob}}));this.addElem("president",t)}},{key:"_initSenate",value:function(){var t=this;if("senate"===this.chamber){var e="2"===this.state.split("-S")[1]?"3":"2",n=this.senateData.races,r=pn.findIndex(n,(function(n){return n.race==="".concat(t.stateAbbr,"-S").concat(e)}));return r>-1&&this.addElem("senate".concat("3"===e?"-special":""),n[r].state_chamber_nav_runoff_candidates||n[r].candidates,e),this}if("us"===this.state){var a=this.nationalSenateData;return this.addElem("senate",a.state_chamber_nav_runoff_candidates||a.candidates),this}var i=this.senateData.races,o=pn.findIndex(i,(function(e){return e.race==="".concat(t.stateAbbr,"-S2")}));if(o>-1&&(this.addElem("senate",i[o].state_chamber_nav_runoff_candidates||i[o].candidates,"2"),"house"===this.chamber))return this;var s=pn.findIndex(i,(function(e){return e.race==="".concat(t.stateAbbr,"-S3")}));s>-1&&this.addElem("senate-special",i[s].state_chamber_nav_runoff_candidates||i[s].candidates,"3")}},{key:"_initHouse",value:function(){var t=this;if("us"===this.state&&"house"!==this.chamber&&this.addElem("house",this.nationalHouseData.candidates),"us"!==this.state){var e=pn.filter(this.houseData.races,(function(e){return e.race.includes(t.stateAbbr)}));if("house"===this.chamber&&(e=pn.filter(e,(function(e){return e.race!=="".concat(t.stateAbbr,"-").concat(t.districtNum)}))),e.length<1)return;e=pn.sortBy(e,(function(t){return Math.abs(t.margin_mean)})),this.addElem("house",e[0].candidates,e[0].race)}}},{key:"_processSpecialElecData",value:function(){pn.each(this.senateData.races,(function(t){vn.senate.isBlanket(t.race,!0)&&(t.state_chamber_nav_runoff_candidates=vn.senate.processBlanketCands(t.candidates))}))}},{key:"checkThreeAcross",value:function(){var t=h.a.selectAll(".state-chamber-nav-element");t.size()>2&&(t.classed("three-across",!0),t.select("p.state-chamber-nav-title").classed("three-across",!0))}}])&&cn(r.prototype,i),o&&cn(r,o),c}(u.a);function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _n(t,e){return!e||"object"!==gn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sn=n(21),On=n(16),jn=n(27),Mn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(s,t);var e,r,a,i,o=(e=s,function(){var t,n=kn(e);if(xn()){var r=kn(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _n(this,t)});function s(t,e,r,a,i,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(l=o.call(this,t,r,c)).model=a,l.dataByModel=Sn.indexBy(l.data,(function(t){return t.type})),l.mapData=e,l.tooltipCont=h.a.select("#house-map-tooltip-container"),l.tooltipEl=l.tooltipCont.select("#house-map-tooltip"),l.tooltipTemplate=n(86),l}return r=s,(a=[{key:"init",value:function(){this._calculateScale(),this._processData(),this._drawChartFrame(),this._drawMap(),this._drawStateOutlines(),this._drawMapLabels(),this._addHoverAndClick()}},{key:"_calculateScale",value:function(){var t=[],e=[];this.mapData.districts.forEach((function(n){n.points.forEach((function(n){t.push(n[0]),e.push(n[1])}))}));var n=h.a.extent(t),r=h.a.extent(e),a=n[1]-n[0],i=r[1]-r[0],o=this.width/a,s=this.height/i;this.scale=Math.min(o,s)}},{key:"_processData",value:function(){this.raceData=Sn.indexBy(this.dataByModel[this.model].races,"race")}},{key:"_drawMap",value:function(){var t=this;this.mapG=this.chartEl.append("g").attr("class","map").attr("transform","scale(".concat(this.scale,")translate(").concat(24*this.scale,",").concat(10*this.scale,")")),this.mapG.append("g").attr("class","districts").selectAll("path").data(this.mapData.districts).enter().append("path").attr("class",(function(e){var n=t.getRaceLean(e.race),r=On.slugify(n);return"".concat(r," ").concat(On.slugify(e.race))})).attr("d",(function(t){return"M".concat(t.points.map((function(t){return t.join(" ")})).join("L"),"Z")}))}},{key:"_drawStateOutlines",value:function(){var t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,e=t?" ":",";this.mapG.append("g").attr("class","state-outline").selectAll("path").data(this.mapData.outlines).enter().append("path").attr("d",(function(n,r){var a=n.outline.map((function(t){return"M".concat(t.map((function(t){return t.join(e)})).join("L"))}));return t?a.join(" "):a})).lower()}},{key:"_drawMapLabels",value:function(){this.mapG.selectAll("g.labels").data(["bg","fg"]).enter().append("g").attr("class",(function(t){return"labels ".concat(t)})).selectAll("text").data(this.mapData.labels).enter().append("text").attr("transform",(function(t,e){return"translate(".concat(t.x,", ").concat(t.y,")")})).text((function(t,e){return t.state}))}},{key:"_addHoverAndClick",value:function(){var t=this;this.mapG.selectAll("path").on("mouseover",(function(e,n){t.highlightDistrict(e),t.showTooltip(e),t.linkedCharts.forEach((function(t){t.highlightRace(e.race)}))})).on("mouseout",(function(){t.unhighlightDistrict(),t.hideTooltip(),t.linkedCharts.forEach((function(t){t.unhighlightAll()}))})).on("click",(function(t,e){var n=On.states.slugs[t.state];window.forecastNavigator.navigateToState(n,interactivePage.chamber,[n,t.district].join("-"))}))}},{key:"hideTooltip",value:function(){this.tooltipCont.style("opacity",0)}},{key:"showTooltip",value:function(t){this.tooltipCont.style("opacity",1);var e={},n=this.raceData[t.race];e.state=On.house.raceDisplay(n.race),e.leanText=this.getRaceLean(t.race),e.leanClass=On.slugify(e.leanText);var r=Sn.sortBy(n.candidates,(function(t){return-1*t.winprob})),a=Sn.map(r,(function(t){return{candidate:t.candidate,fullname:t.party?t.fullname:"All others",party:t.party?t.party:"O",voteshare:t.voteshare,winprob:t.winprob,incumb:t.incumbent}}));e.leader=a[0].candidate,e.candidates=a,e.archie=jn.senate_map.tooltip,e.formatting=On.formatting,e.parties=On.parties,this.tooltipEl.html(this.tooltipTemplate(e));var i=this.mapG.select("path.".concat(On.slugify(t.race))).node().getBBox(),o=(i.x+i.width/2)*this.scale,s=(i.y+i.height)*this.scale;this._moveTooltip(o,s)}},{key:"_moveTooltip",value:function(t,e){this.tooltipCont.style("left","".concat(t,"px")).style("top","".concat(e,"px")),this.tooltipEl.classed("tooltip-position-left",!1),this.tooltipEl.classed("tooltip-position-right",!1),t<this.width/4?this.tooltipEl.classed("tooltip-position-left",!0):t>this.width-this.width/4&&this.tooltipEl.classed("tooltip-position-right",!0),this.tooltipCont.classed("tooltip-position-above",!1),e>this.height/2&&this.tooltipCont.classed("tooltip-position-above",!0)}},{key:"highlightDistrict",value:function(t){this.mapG.classed("highlighted",!0),this.mapG.selectAll("g.state-outline path").classed("highlighted",(function(e){return e.state===t.state})),this.mapG.selectAll("g.districts path").each((function(e,n,r){var a=h.a.select(r[n]);e.race===t.race?a.classed("highlighted",!0).raise():a.classed("highlighted",!1)})),this.mapG.selectAll("g.labels.fg text").classed("highlighted",(function(e){return e.state===t.state}))}},{key:"unhighlightDistrict",value:function(){this.mapG.classed("highlighted",!1)}},{key:"getRaceLean",value:function(t){var e=this.raceData[t],n=On.senate.getRunoffLean(e.candidates),r=On.senate.lean(Math.round(n.winprob));return"".concat(On.formatting.capitalize(r)," ").concat("toss-up"===r?"":n.party)}}])&&bn(r.prototype,a),i&&bn(r,i),s}(f.a);function En(t){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t){return function(t){if(Array.isArray(t))return Dn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Dn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tn(t,e){return(Tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pn(t,e){return!e||"object"!==En(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ln=n(21),Bn=n(16),In=n(27),Fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tn(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=Nn(e);if(Rn()){var r=Nn(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Pn(this,t)});function o(t,e,n,r,a,s){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(c=i.call(this,t,n,s)).model=r,c.incumbents=e,c.dataByModel=Ln.indexBy(c.data,(function(t){return t.type})),c.linkedCharts=[],c.currentY=25,c.forecastY=100,c.sectionHeight=25,c.rectHeight=20,c}return n=o,(r=[{key:"init",value:function(){this._processData()._calculateScales()._drawChartFrame()._drawGroups()._drawText()._drawChart()._addHover()}},{key:"_processData",value:function(){var t=["R","L","D"];this.currentHouseData=Ln.groupBy(this.incumbents,(function(t){return t.party})),this.currentHouseData=Ln.map(this.currentHouseData,(function(t,e){return{key:e,party:t[0].party,number:t.length,races:t}})),this.currentHouseData=Ln.sortBy(this.currentHouseData,(function(e){return Ln.indexOf(t,e.key)}));var e=0;Ln.each(this.currentHouseData,(function(t,n){t.cumu=e,e+=t.number})),this.raceData=this.dataByModel[this.model],this.races=Ln.sortBy(this.raceData.races,(function(t){var e=Bn.senate.getRunoffLean(t.candidates),n=Bn.senate.lean(Math.round(e.winprob)),r=e.party,a=e.winprob;return t.lean=n,t.leaderParty=e.party,("R"===r?-1:1)*+a}));var n=["solid-R","likely-R","lean-R","toss-up","lean-D","likely-D","solid-D"];this.racesSummary=Ln.groupBy(this.races,(function(t){return"".concat(t.lean).concat("toss-up"===t.lean?"":"-"+t.leaderParty)})),this.racesSummary=Ln.map(this.racesSummary,(function(t,e){return{key:e,number:t.length}})),this.racesSummary=Ln.sortBy(this.racesSummary,(function(t){return Ln.indexOf(n,t.key)}));var r=0;return Ln.each(this.racesSummary,(function(t,e){t.cumu=r,r+=t.number})),this}},{key:"_calculateScales",value:function(){return this.scaleX=h.a.scaleLinear().domain([0,this.incumbents.length]).range([0,this.width]),this}},{key:"_drawGroups",value:function(){return this.annoG=this.chartEl.append("g").attr("class","line-anno-g"),this.currentG=this.chartEl.append("g").attr("class","current-house-g house-g"),this.forecastG=this.chartEl.append("g").attr("class","forecast-house-g house-g"),this.forecastAnnoG=this.chartEl.append("g").attr("class","forecast-anno-g"),this}},{key:"_drawChart",value:function(){var t=this;return this.currentG.selectAll("rect.current").data(this.currentHouseData).enter().append("rect").attr("class",(function(t){return"current ".concat(t.party)})).attr("id",(function(t){return"current-".concat(t.key)})).attr("x",(function(e){return t.scaleX(e.cumu)})).attr("width",(function(e){return t.scaleX(e.number)})).attr("y",this.currentY).attr("height",this.rectHeight),this.forecastG.selectAll("rect.forecast").data(this.races).enter().append("rect").attr("class",(function(e){var n=e.leaderParty,r=e.lean;if(Ln.indexOf(t.runoffRaces,e.race)>-1){var a=Bn.senate.getRunoffLean(e.candidates);r=Bn.senate.lean(Math.round(a.winprob)),n=a.party}return"race ".concat(e.race," ").concat(r," ").concat(n)})).attr("id",(function(t){return"forecast-".concat(t.race)})).attr("x",(function(e,n){return t.scaleX(n)})).attr("width",this.scaleX(1)).attr("y",this.forecastY).attr("height",this.rectHeight),this}},{key:"_drawText",value:function(){var t=this;this.currentG.append("text").attr("class","hed").attr("id","current-hed").attr("x",0).attr("y",this.currentY-this.sectionHeight).attr("dy","1em").text(In.house_map.summary.current_title),this.currentG.append("text").attr("class","sent").attr("id","current-sent").attr("x",this.width).attr("y",this.currentY-31).attr("dy","1em").attr("text-anchor","end").html(In.house_map.summary.sent1),this.currentG.append("text").attr("class","sent").attr("id","current-sent-two").attr("x",this.width).attr("y",this.currentY-16).attr("dy","1em").attr("text-anchor","end").html(In.house_map.summary.sent2),this.forecastG.append("text").attr("class","hed").attr("id","forecast-hed").attr("x",0).attr("y",this.forecastY-this.sectionHeight).attr("dy","1em").text(In.house_map.summary.forecast_title);var e="0.25em";return this.annoG.append("line").attr("class","vote-line majority-line").attr("x1",this.scaleX(this.incumbents.length/2+.5)).attr("x2",this.scaleX(this.incumbents.length/2+.5)).attr("y1",this.currentY-5).attr("y2",this.forecastY+this.rectHeight+5),this.annoG.append("text").attr("class","vote-text majority-text bg").attr("x",this.scaleX(this.incumbents.length/2+.5)).attr("y",this.currentY+(this.forecastY+this.rectHeight-this.currentY)/2).attr("text-anchor","middle").attr("dy",e).text(In.house_map.summary.majority_label),this.annoG.append("text").attr("class","vote-text majority-text").attr("x",this.scaleX(this.incumbents.length/2+.5)).attr("y",this.currentY+(this.forecastY+this.rectHeight-this.currentY)/2).attr("text-anchor","middle").attr("dy",e).text(In.house_map.summary.majority_label),this.forecastAnnoG.selectAll("line").data([this.racesSummary[2],this.racesSummary[4]]).enter().append("line").attr("x1",(function(e){return t.scaleX(e.cumu+e.number/2)})).attr("x2",(function(e){return t.scaleX(e.cumu+e.number/2)})).attr("y1",this.forecastY+this.rectHeight+1).attr("y2",this.forecastY+this.rectHeight+8),this.forecastAnnoG.selectAll("text.forecast-count-bg").data(this.racesSummary).enter().append("text").attr("class",(function(t){return"forecast-count-bg ".concat(t.key)})).attr("x",(function(e){return t.scaleX(e.cumu+e.number/2)})).attr("y",(function(e,n){return 0===n||n===t.racesSummary.length-1?t.forecastY+t.rectHeight/2:n%2==0?t.forecastY+t.rectHeight+18:t.forecastY+t.rectHeight/2})).attr("dy",e).attr("text-anchor","middle").text((function(t,e){return 0===e?"".concat(t.number," seats"):t.number})),this.forecastAnnoG.selectAll("text.forecast-count").data(this.racesSummary).enter().append("text").attr("class",(function(t){return"forecast-count ".concat(t.key)})).attr("x",(function(e){return t.scaleX(e.cumu+e.number/2)})).attr("y",(function(e,n){return 0===n||n===t.racesSummary.length-1?t.forecastY+t.rectHeight/2:n%2==0?t.forecastY+t.rectHeight+18:t.forecastY+t.rectHeight/2})).attr("dy",e).attr("text-anchor","middle").text((function(t,e){return 0===e?"".concat(t.number," seats"):t.number})),this}},{key:"_addHover",value:function(){var t=this;return this.forecastG.selectAll("rect.race").on("mouseover",(function(e){t.highlightRace(e.race),t.linkedCharts.forEach((function(t){t.highlightDistrict(e),t.showTooltip(e)}))})).on("mouseout",(function(e){t.unhighlightAll(),t.linkedCharts.forEach((function(t){t.unhighlightDistrict(),t.hideTooltip()}))})).on("click",(function(t){var e;(e=window.forecastNavigator).navigateToState.apply(e,An(Bn.senate.clickRace(t)))})),this}},{key:"highlightRace",value:function(t){this.forecastG.select("#forecast-".concat(t)).raise().classed("highlighted",!0)}},{key:"unhighlightAll",value:function(){this.forecastG.selectAll("rect.race").classed("highlighted",!1)}}])&&Cn(n.prototype,r),a&&Cn(n,a),o}(f.a);function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Un(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wn(t,e,n){return(Wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$n(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Yn(t,e){return(Yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qn(t,e){return!e||"object"!==Vn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yn(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=$n(e);if(Xn()){var r=$n(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return qn(this,t)});function o(){return Gn(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){var t=this;Wn($n(o.prototype),"init",this).call(this),Promise.all([this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_race_summary.json")),this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_carto.json")),this.appData.fetch("".concat(staticUrl,"/").concat(this.chamber,"_incumbents.json"))]).then((function(e){var n=Hn(e,3);t.races=n[0],t.mapData=n[1],t.incumbents=n[2],t.charts={},t._drawMap(),t._drawSummary(),t._linkCharts(),Wn($n(o.prototype),"initEnd",t).call(t)}))}},{key:"_drawMap",value:function(){this.map=new Mn(this.races,this.mapData,"#house-map-chart",this.model,this.chamber,{margin:{top:0,left:-15,bottom:20,right:25},title:""}),this.map.init(),this.charts["#house-map-chart"]=this.map}},{key:"_drawSummary",value:function(){this.summary=new Fn(this.races,this.incumbents,"#house-map-summary-chart",this.model,this.chamber,{title:""}),this.summary.init(),this.charts["#house-map-summary-chart"]=this.summary}},{key:"_linkCharts",value:function(){var t=this,e=Object.keys(this.charts);e.forEach((function(n){t.charts[n].linkedCharts=e.filter((function(t){return t!==n})).map((function(e){return t.charts[e]}))}))}},{key:"onModelChange",value:function(t){Wn($n(o.prototype),"onModelChange",this).call(this,t),this.initialized&&(h.a.select("#house-map-chart").html(null),h.a.select("#house-map-summary-chart").html(null),this._drawMap(),this._drawSummary(),this._linkCharts(),Wn($n(o.prototype),"initEnd",this).call(this))}}])&&zn(n.prototype,r),a&&zn(n,a),o}(u.a);function Kn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Zn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tr=n(92),er=n(16),nr=n(21),rr=n(27),ar={"Aaron Gilmer":"Gilmer","André Carson":"Carson","Ann Dugas":"Dugas","Arrigg Koh":"Koh","Barzee Flores":"Barzee Flores","Benny Bernal":"Bernal","Bernice Johnson":"Johnson","Blunt Rochester":"Blunt Rochester","Brown Pelzer":"Brown Pelzer","Carlton Fleenor":"Fleenor","Casper Stockham":"Stockham","Cortes Barragan":"Barragan","Daniel Schoolcraft":"Schoolcraft","Diaz Barragán":"Barragán","Dirksen Londrigan":"Londrigan","G Bill Beeman":"Beeman","Gay Scanlon":"Scanlon","Grechen Shirley":"Shirley","Gregor Knauer":"Knauer","Herrera Beutler":"Herrera Beutler","Jackson Lee":"Jackson Lee","James Aguilera":"Aguilera","Jean Charbonneau":"Charbonneau","Jennings Hegar":"Hegar","Jerome Bell":"Bell","José E. Serrano":"Serrano","Lamar Foster":"Foster","Lance Graham":"Graham","Lee Lake":"Lake","Lee Tillman":"Tillman","Leonel Valiente":"Valiente","Lou Leeder":"Leeder","Lou O'Hara Hill":"O'Hara Hill","Lynne Sanchez":"Sanchez","Marquez Peterson":"Marquez Peterson","McMorris Rodgers":"McMorris Rodgers","Mitsch Bush":"Mitsch Bush","Moran Palmer":"Palmer","Ortiz Jones":"Ortiz Jones","Pannill Fletcher":"Fletcher","Patrick Maloney":"Maloney","Paul Kabat":"Kabat","Pendergast Sindt":"Sindt","Preston Kulkarni":"Kulkarni","Rene Lambert":"Lambert","Reynero Pate":"Pate","Robert Martin":"Martin","Rose Spaulding":"Spaulding","Rosenquest Smith":"Smith","Ryne Swafford":"Swafford","Sick of D.C. Casson":"Casson","Skip Sandman":"Sandman","Steve McFall":"McFall","Stotts Pearson":"Pearson","Ted Evans":"Evans","Torres Small":"Torres Small","Van Drew":"Van Drew","Von Loor":"Van Loor","Wasserman Schultz":"Wasserman Schultz","Watson Coleman":"Watson Coleman","Wayne Lorch":"Lorch","Weston Wright":"Wright","William Powers":"Powers"},ir=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.selector=e,this.chamberData={},this.chamberMatchStrings={},this.chamberMatchStringsByLabel={},this.currentChamber=null,this.hasInitialized=!1,this.isTablet=window.innerWidth<=1023}var e,n,r;return e=t,(n=[{key:"init",value:function(t,e){var n=this;t!==this.currentChamber&&(this.currentChamber=t,Object.prototype.hasOwnProperty.call(this.chamberData,t)||(this.chamberData[t]=e,this.chamberMatchStrings[t]=this.createMatchStrings(t,e),this.chamberMatchStringsByLabel[t]=nr.indexBy(this.chamberMatchStrings[t],"label")),this.hasInitialized||(this.ta=tr(this.selector,{items:1e3,matcher:function(t){return!0},sorter:function(t){return t},source:function(t,e){return e(n.queryMatcher(t))}}),this.enable(),document.addEventListener("keyup",(function(t){n.checkKey(t)})),this.xOut(),this.hasInitialized=!0))}},{key:"createMatchStrings",value:function(t,e){var n=[];return e.forEach((function(e){var r,a,i=Kn(e,4),o=i[0],s=i[1],c=i[2],l=i[3],u="senate"===t&&s;if("senate"===t)a=[r="".concat(er.states.abbrs[o]).concat(u?" special":""),"".concat(o).concat(u?" special":"")];else if("house"===t){var h="".concat(o,"-").concat(s);a=[r=er.house.raceDisplay(h),"".concat(o," ").concat(s),"".concat(o,"-").concat(s),"".concat(o).concat(s),"".concat(o," ").concat(er.formatting.ordinal(s))]}n.push({label:r,state:o,seat:o,district:s,districtMatch:!0,seatMatch:!0,strings:a,special:u,race:l}),c.forEach((function(t){if("Others"!==t){var e=t.replace(/^([A-Z]+\.)+ /,"").replace(/^([A-Z]+\.)+ /,"").replace(/^[A-Za-z]+( [A-Za-z]+\.)? /,"").replace(/^".*?" /,"").replace(/ ([IV]+|(J|S)r\.)$/,"");Object.prototype.hasOwnProperty.call(ar,e)&&(e=ar[e]),n.push({label:"".concat(t," (").concat(r,")"),state:o,district:s,seat:o,candidateMatch:!0,strings:[t,e],special:u,race:l})}}))})),n}},{key:"enable",value:function(){var t=this;this.inputEl.value="",this.inputEl.addEventListener("change",(function(){var e=t.chamberMatchStringsByLabel[t.currentChamber][t.inputEl.value];if(e){t.hideClearBtn(),t.inputEl.value="";var n=er.states.slugs[e.state];"senate"===t.currentChamber&&e.special&&(n+="-special"),t.currentChamber,window.forecastNavigator.navigateToState(n,t.currentChamber,e.race)}})),h.a.select(".header-race-search input").on("click",(function(){t.activateSearch()}));var e=document.querySelector(".header-race-search input");document.body.parentNode.addEventListener("click",(function(n){e.contains(n.target)||t.deactivateSearch()}))}},{key:"activateSearch",value:function(){h.a.select(".header-race-search input").attr("placeholder",rr.house_senate_search.placeholder_active),this.isTablet&&this.hideLogo(),h.a.select(".header-race-search input").transition().duration(500).style("width","290px")}},{key:"deactivateSearch",value:function(){this.isTablet&&this.showLogo(),h.a.select(".header-race-search input").attr("placeholder",rr.house_senate_search.placeholder).transition().duration(500).style("width",this.isTablet?"100px":"150px"),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}},{key:"xOut",value:function(){var t=this;this.hideClearBtn(),this.inputEl.addEventListener("input",(function(t){var e=!t.target.value;h.a.selectAll(".js-btn-clear").classed("hidden",e)})),h.a.select(".js-btn-clear").on("click",(function(){t.hideClearBtn(),t.deactivateSearch(),t.enable()}))}},{key:"hideClearBtn",value:function(){h.a.selectAll(".js-btn-clear").classed("hidden",!0)}},{key:"hideLogo",value:function(){h.a.selectAll(".header-logo").classed("off-screen",!0)}},{key:"showLogo",value:function(){h.a.selectAll(".header-logo").classed("off-screen",!1)}},{key:"queryMatcher",value:function(t){var e=-1!==er.states.order.indexOf(t.toUpperCase()),n=new RegExp("^".concat(t),"i"),r={};this.chamberMatchStrings[this.currentChamber].forEach((function(t){t.strings.forEach((function(e){n.test(e)&&(r[t.label]=t)}))}));var a=Object.keys(r);return a.sort((function(t,n){if(e){if(r[t].districtMatch&&r[n].districtMatch)return r[t].state===r[n].state?h.a.ascending(+r[t].district,+r[n].district):h.a.ascending(t,n);if(r[t].districtMatch&&!r[n].districtMatch)return-1;if(!r[t].districtMatch&&r[n].districtMatch)return 1}return r[t].state===r[n].state?h.a.ascending(+r[t].district,+r[n].district):h.a.ascending(t,n)})),a}},{key:"checkKey",value:function(t){t&&27==+t.keyCode&&(this.deactivateSearch(),this.hideClearBtn())}},{key:"inputEl",get:function(){return document.querySelector(this.selector)}}])&&Qn(e.prototype,n),r&&Qn(e,r),t}(),or=n(85);function sr(t){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return lr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){o=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fr(t,e,n){return(fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mr(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function dr(t,e){return(dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pr(t,e){return!e||"object"!==sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function mr(t){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dr(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=mr(e);if(vr()){var r=mr(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return pr(this,t)});function o(){return ur(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){function t(t){t.addEventListener("click",(function(e){e.preventDefault();var n=t.getAttribute("dataset-url");Object(or.download)(n);var r,a=Object(or.parse)(n),i=(a.author,a.repo),o=(a.branch,a.path),s=a.type;if("repo"===s)r=i;else{if("folder"!==s)throw new Error("Invalid URL. URL must be a GitHub repo or folder.");r=o}window.ga&&window.ga("downloadTracker.send","event","click","download",r)}))}fr(mr(o.prototype),"init",this).call(this);var e,n=cr(document.querySelectorAll(".download-link"));try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}fr(mr(o.prototype),"initEnd",this).call(this)}}])&&hr(n.prototype,r),a&&hr(n,a),o}(u.a);function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _r(t,e,n){return(_r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Or(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function xr(t,e){return(xr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kr(t,e){return!e||"object"!==gr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Or(t){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jr=n(21),Mr=n(27),Er=n(22)(n(16),n(11)),Ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xr(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=Or(e);if(Sr()){var r=Or(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return kr(this,t)});function o(){return br(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){_r(Or(o.prototype),"init",this).call(this);var t=[8,10,5,1,13,12,2];this.appData.fetch("".concat(staticUrl,"/scenarios.json")).then((function(e){var n=e[0].scenarios;h.a.select("#scenarios").select("table").select("tbody").selectAll("tr").data(Mr.scenarios.order).enter().append("tr").attr("class",(function(e){return jr.indexOf(t,+e.id)>-1?"underline":""})).each((function(t,e,r){var a=h.a.select(r[e]),i=jr.find(n,(function(e){return+e.id==+t.id})),o="".concat(t.display).concat(t.footnote?"<span>"+t.footnote+"</span>":"");a.append("td").attr("class","scenario").html(o),a.append("td").attr("class","prob").html(Er.formatting.probToFrac(i.chance))}))}))}}])&&wr(n.prototype,r),a&&wr(n,a),o}(u.a);function Dr(t){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pr(t,e,n){return(Pr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Br(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Rr(t,e){return(Rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nr(t,e){return!e||"object"!==Dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ir=n(27),Fr=n(21),Vr=n(16),Hr=n(102),Ur=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rr(t,e)}(o,t);var e,n,r,a,i=(e=o,function(){var t,n=Br(e);if(Lr()){var r=Br(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Nr(this,t)});function o(){return Cr(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"init",value:function(){if(Pr(Br(o.prototype),"init",this).call(this),Hr.frozen){document.querySelector("#freeze-banner").classList.remove("lazy-load-hide"),this.template=Fr.template(Ir.freeze_banner,{interpolate:/\{\{(.+?)\}\}/g});var t="president"===this.chamber?"presidential":Vr.formatting.capitalize(this.chamber);document.querySelector("#freeze-banner").innerHTML=this.template({chamber:t}),Pr(Br(o.prototype),"initEnd",this).call(this)}}}])&&Tr(n.prototype,r),a&&Tr(n,a),o}(u.a);function Gr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(t,e)||Wr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Wr(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){o=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}function Wr(t,e){if(t){if("string"==typeof t)return Yr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yr(t,e):void 0}}function Yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}window.updateOmnitureData=window.updateOmnitureData||function(){};var Xr=n(22)(n(16),n(11)),$r=n(87),Jr=n(27),Kr=n(103),Zr=n(21),Qr=n(104),ta=n(105),ea=n(77),na=n(73),ra={president:{national:[["freeze-banner",Ur],["lede",jt.a],["topline",l.a],["state-chamber-nav",yn],["ec-distributions",C],["ec-margins",T.a],["change",P.a],["scenarios",Ar],["state-recirc",Ot],["byline",yr]],state:[["freeze-banner",Ur],["topline",l.a],["state-chamber-nav",yn],["change",P.a],["latest-polls",q],["polls-to-forecast",it],["state-recirc",Ot]]},senate:{national:[["freeze-banner",Ur],["seat-distribution",Xt],["state-chamber-nav",yn],["senate-map",Pe],["change",$t.a],["race-list",an],["byline",yr]],state:[["freeze-banner",Ur],["topline",l.a],["state-chamber-nav",yn],["change",$t.a],["latest-polls",q]]},house:{national:[["freeze-banner",Ur],["seat-distribution",Xt],["house-map",Jn],["change",$t.a],["state-chamber-nav",yn],["race-list",an],["byline",yr]],state:[["freeze-banner",Ur],["topline",l.a],["state-chamber-nav",yn],["change",$t.a],["latest-polls",q]]}},aa={},ia=new a.c,oa=new i.a,sa=new o.a,ca=new c,la=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.headerSelect=document.querySelector(".header-state-select select")}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=this;this._populateDropdownDisplays(),this.initPage(),this.search=new ir(".header-race-search input"),this.headerSelect.addEventListener("change",(function(e){var n=Xr.states.abbrToSlug(e.target.value)||"us";t.navigateToState(n,interactivePage.chamber)}));var e,n=zr(document.querySelectorAll(".chamber-nav .chamber-link-cont"));try{var r=function(){var n=e.value,r=n.getAttribute("data-chamber");n.addEventListener("click",(function(e){e.preventDefault(),t.navigateToState("us",r),h.a.select(".chamber-tooltip.".concat(r)).classed("show",!1)})),n.addEventListener("mouseover",(function(t){interactivePage.chamber===r&&"us"===interactivePage.stateSlug||h.a.select(".chamber-tooltip.".concat(r)).classed("show",!0)})),n.addEventListener("mouseout",(function(t){h.a.select(".chamber-tooltip.".concat(r)).classed("show",!1)}))};for(n.s();!(e=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}var a,i=zr(document.querySelectorAll(".national-nav"));try{for(i.s();!(a=i.n()).done;)a.value.addEventListener("click",(function(e){e.preventDefault(),t.navigateToState("us",interactivePage.chamber)}))}catch(t){i.e(t)}finally{i.f()}window.addEventListener("popstate",(function(e){var n=window.location.pathname.replace(staticUrl,"").split("/").filter((function(t){return""!==t})),r="president",a="us",i=null;if(Object.prototype.hasOwnProperty.call(ra,n[0])){if(r=n[0],n[1])if(a=n[1],"senate"===r)i="".concat(a,"-S2"),a.match(/-special/)&&(a=a.replace(/-special/,""),i="".concat(a,"-S3"));else if("house"===r){var o=n[2];i="".concat(a,"-").concat(o)}}else Object.prototype.hasOwnProperty.call(Xr.states.toAbbrs,n[0])&&(a=n[0]);t.navigateToState(a,r,i,!0)}))}},{key:"_populateDropdownDisplays",value:function(){var t=this,e=["ME","NE"];this.isMobile=window.innerWidth<767,Zr.each(this.headerSelect.children,(function(n,r){0===r?n.innerHTML=t.isMobile?Jr.nav.nationalmob:Jr.nav.national:Zr.each(n.children,(function(n){var r,a=n.getAttribute("value"),i=Xr.states.dropdownContests[a];if(a.match(/\d/)){var o=a.match(/([A-Z]{2})(\d)/),s=Xr.states.abbrs[o[1]];r="".concat(Xr.getAPStateAbbrev(s)," ").concat(Xr.formatting.ordinal(+o[2]))}else r=Xr.getAPStateAbbrev(i);n.innerHTML=t.isMobile?r:i,!t.isMobile&&Zr.indexOf(e,a)>-1&&(n.innerHTML="".concat(n.innerHTML," (statewide)"))}))}))}},{key:"showMapButton",value:function(t){h.a.selectAll(".national-nav").classed("visible","us"!==t)}},{key:"navigateToState",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=null;if("house"===e&&n){var i=n.split("-");a=i[i.length-1]}interactivePage.stateSlug=n||t,interactivePage.chamber=e,this.search&&this.search.deactivateSearch(),this.headerSelect.value=Xr.states.slugToAbbr(t)||"US",Xr.dom.resizeSelect(this.headerSelect);var o=Xr.states.abbrs[Xr.states.toAbbrs[t.replace("-special","")]]||"us";if(t.match(/-\d/)){var s=t.match(/([a-z]+)-(\d)/),c=s[1],l=Xr.states.toAbbrs[c],u=Xr.states.abbrs[l],f=Xr.formatting.ordinal(+s[2]);o="".concat(u,"’s ").concat(f," District")}var d={pageconfig:$r,utils:Xr,archie:Jr,archieRecirc:Kr,staticUrl:staticUrl,stateSlug:n||t,state:o,_:Zr,chamber:e};document.querySelector(".page-body").innerHTML=Qr(d);var p="house"!==e&&"senate"!==e&&"us"===t;if(h.a.select(".lede-wrap").classed("hidden",!p).html(p?ta(d):""),!r){var v=[staticUrl];"president"!==e&&v.push(e),"us"!==t&&v.push(t),"house"===e&&a&&v.push(a),window.history.pushState("","","".concat(v.join("/"),"/"))}window.scrollTo(0,0),this.initPage(r),this.updateMetadata(e),window.updateOmnitureData()}},{key:"initPage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],aa={},h.a.selectAll(".chamber-link-cont").classed("active",!1),h.a.selectAll(".chamber-link-cont.".concat(interactivePage.chamber)).classed("active",!0);var t=function(t){t.forEach((function(t){var e=Gr(t,2),n=e[0],r=e[1],a=document.querySelector("#".concat(n));aa[n]=new r(oa,sa,interactivePage.stateSlug,ia.selected,!1,interactivePage.chamber),Xr.dom.inView(a)?aa[n].init():window.addEventListener("scroll",(function(t){aa[n]&&!aa[n].initialized&&Xr.dom.inView(a)&&aa[n].init()}))}))};Xr.dom.resizeSelect(this.headerSelect),ia.init(),this.initSearch(),t(ra[interactivePage.chamber]["us"===interactivePage.stateSlug?"national":"state"]),ia.removeAllListeners();var e=function(t){ia.on("change",(function(e){aa[t].onModelChange(e)}))};for(var n in aa)e(n);if(this.showMapButton(interactivePage.stateSlug),ca.init(),"us"!==interactivePage.stateSlug&&Zr.each(document.querySelectorAll(".fivey-wrap"),(function(t){t.classList.add("hidden")})),document.querySelector("#js-timestamp")){var r=ea.updated,a=!isNaN(new Date(r).getTime()),i=a?new Date(r).getTime():parseInt(r,10);document.querySelector("#js-timestamp").innerHTML="Updated "+na().ago(i)}}},{key:"initSearch",value:function(){var t=this,e="house"===interactivePage.chamber||"senate"===interactivePage.chamber;h.a.select("header.page-header").classed("has-search",e),e&&oa.fetch("".concat(staticUrl,"/").concat(interactivePage.chamber,"_search.json")).then((function(e){t.search.init(interactivePage.chamber,e)}))}},{key:"updateMetadata",value:function(t){var e=interactivePage.metadata[t];document.title=e.metaTitle+" | FiveThirtyEight",document.querySelector('meta[property="og:title"]').content=e.metaTitle,document.querySelector('meta[property="og:description"]').content=e.metaDescription,document.querySelector('meta[name="description"]').content=e.metaDescription,document.querySelector('link[rel="canonical"]').href=e.metaCanonicalUrl,document.querySelector('meta[property="og:url"]').content=e.metaCanonicalUrl,document.querySelector('meta[property="og:image"]').content=e.metaImage,document.querySelector('meta[name="twitter:image:src"]').content=e.metaImage}}])&&qr(e.prototype,n),r&&qr(e,r),t}();n(106);var ua=n(87),ha=n(22)(n(16),n(11)),fa=(n(77),n(73),n(21));history.scrollRestoration="auto";var da=new la;da.init(),window.forecastNavigator=da,document.addEventListener("DOMContentLoaded",(function(t){var e={senate:"Senate",house:"House",president:"Presidential"}[interactivePage.chamber]||"",n="Feedback on FiveThirtyEight's 2020 ".concat(e," Forecast"),r=encodeURIComponent("\n\n--\n"+window.location.href)+encodeURIComponent("\n"+navigator.userAgent),a=fa.find(document.querySelectorAll("div#byline.module.byline div.byline-footer p.noteb a.footer"),(function(t){if(null!==t.getAttribute("href"))return t})),i=a.getAttribute("href")+"?subject="+n+"&body="+r;a.setAttribute("href",i)})),new ha.Recirc({tag:ha.slugify(ua.primarytag),url:ua.url});new ha.Analytics(r.a);window.ga&&window.ga("create","UA-60673836-4","auto","downloadTracker"),new ha.SocialButtons(ua)}]);